var M="http://www.w3.org/1999/xhtml",m=new WeakMap,W=new WeakMap,T=new WeakMap,j={},w=(t,i=globalThis.document.documentElement,h=i.parentNode,a=M,O=!1)=>{var g,y,p,C,b,x,K,S,d,A;if(!h)throw new Error("No parent to render to");if(typeof t=="boolean"){i&&h.removeChild(i);return}if(!(globalThis!=null&&globalThis.isSkruvSSR)&&((g=t==null?void 0:t.t)==null?void 0:g.toLowerCase())==="skruvtext"&&((y=t==null?void 0:t.c)==null?void 0:y[0])){t.r=()=>!i||!h.contains(i)?!1:(w(t,i,h,a),!0),w((p=t==null?void 0:t.c)==null?void 0:p[0],i);return}let k=typeof t=="string"||typeof t=="number";if(O||!i||k&&i.nodeName!=="#text"||!k&&i.nodeName.toLowerCase()!==t.t.toLowerCase()){let s=i;if(k?i=document.createTextNode(""+t):(t.t==="svg"&&(a="http://www.w3.org/2000/svg"),t.t==="math"&&(a="http://www.w3.org/1998/Math/MathML"),t.t==="feed"&&(a="http://www.w3.org/2005/Atom"),(t.t==="urlset"||t.t==="sitemapindex")&&(a="https://www.sitemaps.org/schemas/sitemap/0.9"),i=(j[t.t]||(j[t.t]=document.createElementNS(a,t.t))).cloneNode(!1)),s?h.replaceChild(i,s):h.appendChild(i),k)return}if(k){i.textContent!=t&&(i.textContent=""+t);return}t.r&&(t.r=()=>!i||!h.contains(i)?!1:(w(t,i,h,a),!0)),t.t==="foreignObject"&&(a=M);let f=t.c.flat(1/0);globalThis!=null&&globalThis.isSkruvSSR||(f=f.filter(s=>{var l;return!((l=s==null?void 0:s.t)!=null&&l.startsWith("skruv"))}));let o={};if(((C=f[0])==null?void 0:C.constructor)===Object&&!((b=f[0])!=null&&b.isSkruvDom)){o=f[0],f=f.slice(1);let s=T.get(i);s||(s={},T.set(i,s));for(let[l,e]of Object.entries(o))if(""+s[l]!=""+e){if(l==="skruvAfterCreate"){setTimeout(()=>e(i),0),s[l]=e;continue}if(!l.startsWith("skruv")){if(l[0]==="o"&&l[1]==="n"){let v=l.slice(2);s[l]?e||i.removeEventListener(v,e):(s[l]&&i.removeEventListener(v,e),i.addEventListener(v,e)),s[l]=e;continue}(l==="checked"||l==="selected"||l==="value"||i.nodeName.includes("-"))&&(i[l]=e),e!==void 0?i.setAttribute(l,""+e):i.removeAttribute(l),s[l]=e}}}for(let s of i.getAttributeNames().filter(l=>!Object.keys(o).includes(l)))i.removeAttribute(s);if(!f.length&&i.childNodes.length){if(o.skruvWaitForNotEmpty)return;i.replaceChildren();return}if(i.childNodes.length>f.length)for(let s=i.childNodes.length-1;s>=f.length;s--)i.removeChild(i.childNodes[s]);for(let s=0;s<f.length;s++){let l=!1,e;if((x=f[s])!=null&&x.c)if(e=m.get((K=f[s].c[0])==null?void 0:K.skruvKey),e){if(e!==i.childNodes[s]&&(e===i.childNodes[s+1]?i.removeChild(i.childNodes[s]):i.childNodes[s]&&m.get((A=(d=(S=f[s+1])==null?void 0:S.c)==null?void 0:d[0])==null?void 0:A.skruvKey)===i.childNodes[s]?i.insertBefore(e,i.childNodes[s]):i.childNodes[s]?i.replaceChild(e,i.childNodes[s]):i.appendChild(e)),l=f[s].c[0].skruvKey!==W.get(i.childNodes[s]),!l){let v=m.get(i.childNodes[s]);if(v){let E=!0;for(let L in f[s].c[0].skruvKey)f[s].c[0].skruvKey[L]!==v[L]&&(E=!1);if(E)continue}}}else l=m.has(i.childNodes[s]);w(f[s],i.childNodes[s]||!1,i,a,l)}o.skruvKey&&(m.set(o.skruvKey,i),W.set(i,o.skruvKey),m.set(i,{...o.skruvKey}))},F=new Proxy({},{get:(t,i)=>(...h)=>({isSkruvDom:!0,t:i,c:h})});export{F as elementFactory,w as render};
//# sourceMappingURL=skruv.min.js.map
