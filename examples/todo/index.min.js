var F=Symbol.for("skruvDom"),w="data-event-";var T=(e,...n)=>{var i,l,o;return{s:F,t:e.toUpperCase(),...!((i=n[0])!=null&&i[Symbol.asyncIterator])&&((l=n[0])==null?void 0:l.constructor)===Object&&((o=n[0])==null?void 0:o.s)!==F?{a:n[0],c:n.slice(1)}:{a:{},c:n}}},S=new WeakMap,x={},A=(e,n=globalThis.document.documentElement,i=n.parentNode,l=!1,o=(i==null?void 0:i.ownerDocument)||(n==null?void 0:n.ownerDocument))=>{let t=n,r=[];if(!i||!o||t&&!i.contains(t))return!1;if(typeof e=="boolean"||e===null||e===void 0)return t&&i.removeChild(t),!0;if(!t||(typeof e=="string"||typeof e=="number")&&(t==null?void 0:t.nodeName)!=="#text"||(e==null?void 0:e.t)&&(t==null?void 0:t.nodeName)!==(e==null?void 0:e.t)?(typeof e=="string"||typeof e=="number"?t=(x.text||(x.text=o.createTextNode(""))).cloneNode():l||e.t==="svg"?t=(x[e.t]||(x[e.t]=o.createElementNS("http://www.w3.org/2000/svg",e.t))).cloneNode():t=(x[e.t]||(x[e.t]=o.createElement(e.t))).cloneNode(),n?i.replaceChild(t,n):i.appendChild(t)):r=t.childNodes,typeof e=="string"||typeof e=="number")return""+t.data!=""+e&&(t.data=e),!0;e._r&&(e._r._r=()=>A(e,t,i,l));for(let s in e.a)s[0]!=="_"&&(s[0]==="o"&&s[1]==="n"?!t[w+s]||""+t[w+s]!=""+e.a[s]?(t[w+s]&&t.removeEventListener(s.slice(2),t[w+s]),t.addEventListener(s.slice(2),e.a[s]),t[w+s]=e.a[s]):e.a[s]||t.removeEventListener(s.slice(2),t[w+s]):e.a[s]!==t.getAttribute(s)&&((typeof e.a[s]=="boolean"&&(e.t==="INPUT"&&s==="checked"||e.t==="OPTION"&&s==="selected")||typeof e.a[s]=="object")&&(t[s]=e.a[s]),e.a[s]?t.setAttribute(s,""+e.a[s]):t.removeAttribute(s)));let c=e.c.flat(1/0);if(!c.length&&r.length)return t.replaceChildren(),!0;if(r.length>c.length)for(let s=c.length;s<r.length;s++)t.removeChild(r[s]);for(let s=0;s<c.length;s++){if(S.has(c[s])){let h=S.get(c[s]);h&&h!==r[s]&&(h===r[s+1]?t.removeChild(r[s]):S.has(c[s+1])&&S.get(c[s+1])===r[s]?t.insertBefore(h,r[s]):r[s]?t.replaceChild(h,r[s]):t.appendChild(h),S.set(c[s],r[s]));continue}A(c[s],r[s]||!1,t,l)}return S.set(e,t),!0},X=new Proxy({},{get:(e,n)=>(...i)=>T(n,...i)});var k=()=>{},z=new Promise(e=>{k=e}),$=new Map,q=e=>{let n=0;if(e.length===0)return n.toString();for(let i=0;i<e.length;i++)n=(n<<5)-n+e.charCodeAt(i),n|=0;return n.toString()},L=(e,...n)=>{var M;let i=e.reduce((f,m,a)=>{var d;return f.push(m),f.push(((d=n==null?void 0:n[a])==null?void 0:d.toString())||""),f},[]).join(""),l=/^\[.*?(?:(["'])(?:.|\\\1)*\1.*)*\]/,o=/([([,]|:scope\b)/,t=/^:scope\b/;function r(f,m){let a=f.search(o);if(a===-1)return{selector:`${m} ${f}`,rest:""};if(f[a]===",")return{selector:`${m} ${f.substring(0,a)}`,rest:f.substring(a+1)};let d=!0,D=!1;a=f.search(/\S/);let C=0;e:for(;a<f.length;++a){let G=f[a];switch(G){case"[":{let I=l.exec(f.substring(a));a+=(I?I[0].length:1)-1;continue}case"(":++C;continue;case":":if(d)if(t.test(f.substring(a))){if(C)return null}else continue;else continue;f=f.substring(0,a)+m+f.substring(a+6),a+=m.length,D=!0,--a;continue;case")":C&&--C;continue}if(!C)switch(G){case",":break e;case" ":case">":case"~":case"+":if(!d)continue;d=!1}}return{selector:(D?"":`${m} `)+f.substring(0,a),rest:f.substring(a+1)}}function c(f,m){let a=[];for(;f;){let d=r(f,m);if(d===null)return":not(*)";a.push(d.selector),f=d.rest}return a.join(", ")}function s(f,m){if(f instanceof CSSMediaRule){let a=f.cssRules.length;for(let d=0;d<a;++d)s(f.cssRules[d],m);return}f instanceof CSSStyleRule&&(f.selectorText=c(f.selectorText,m))}let h=q(i),y=`skruv-css-scope-${h}`,g=`.${y}`;if($.has(h))return y;let b;if(!(globalThis!=null&&globalThis.CSSOM)&&!((M=globalThis.document)!=null&&M.implementation))throw new Error("No css parser available. Either add CSSOM to globalThis or run in browser.");if(globalThis!=null&&globalThis.CSSOM)b=CSSOM.parse(i);else{let f=globalThis.document.implementation.createHTMLDocument(""),m=f.createElement("style");m.innerText=i,f.body.append(m),b=m.sheet,f.body.removeChild(m)}Array.from((b==null?void 0:b.cssRules)||[]).forEach(f=>s(f,g));let Z=Array.from((b==null?void 0:b.cssRules)||[]).map(f=>f.cssText||"").join("");return $.set(h,Z),k(),y};async function*V(){for(yield Array.from($.values()).join("");;)await z,yield Array.from($.values()).join(""),z=new Promise(e=>{k=e})}var B=(globalThis==null?void 0:globalThis.requestAnimationFrame)||(e=>setTimeout(e,0)),H=e=>{let n=class{constructor(o){this.name=o,this._scheduled=!1,this._skruv_promise=new Promise(t=>{this._skruv_resolve=t})}_resolve(){this._skruv_parent&&this._skruv_parent._resolve&&this._skruv_parent._resolve(),!this._scheduled&&(this._scheduled=!0,B(()=>{this._skruv_resolve(),this._skruv_promise=new Promise(o=>{this._skruv_resolve=o}),this._scheduled=!1}))}set(o,t,r){return t==="_skruv_parent"?(this._skruv_parent=r,!0):(o[t]!==r&&(o[t]=this.recurse(t,r,o)),!0)}get(o,t,r){return t==="getGenerator"?c=>({key:[c,o],[Symbol.asyncIterator]:()=>{let s=!1;return{next:async()=>(s?await this._skruv_promise:s=!0,{done:!1,value:r[c]})}}}):t==="skruv_resolve"?()=>this._resolve():t==="toJSON"?o.constructor===Object?Object.getOwnPropertyNames(o).reduce((c,s)=>{var h;return c[s]=((h=o[s])==null?void 0:h.toJSON)||o[s],c},{}):o.constructor===Array?o.map(c=>(c==null?void 0:c.toJSON)||c):o:t===Symbol.asyncIterator?()=>{let c=!1;return{next:async()=>(c?await this._skruv_promise:c=!0,{done:!1,value:r})}}:o[t]}deleteProperty(o,t){let r=delete o[t];return this._resolve(),r}recurse(o,t,r){var c;if(t&&t.constructor)if(t.constructor===Object&&((c=r==null?void 0:r[o])==null?void 0:c.constructor)===Object){for(let s of Object.getOwnPropertyNames(t))r[o][s]!==t[s]&&(r[o][s]=t[s]);for(let s of Object.getOwnPropertyNames(r[o]).filter(h=>!Object.getOwnPropertyNames(t).includes(h)))delete r[o][s],this._resolve();return r[o]}else if(t.constructor===Object){let s=new this.constructor(`${this.name}.${o}`);t=Object.keys(t).reduce((h,y)=>(h[y]=this.recurse(`${o}.${y}`,t[y]),typeof h[y]=="object"&&h[y]!==null&&(h[y]._skruv_parent=s),h),{}),t=new Proxy(t,s),t._skruv_parent=this,this._resolve()}else if(t.constructor===Array){let s=new this.constructor(`${this.name}.${o}`);t=t.map((h,y)=>{let g=this.recurse(`${o}[${y}]`,h);return typeof g=="object"&&g!==null&&(g._skruv_parent=s),g}),t=new Proxy(t,s),t._skruv_parent=this,this._resolve()}else this._resolve();else this._resolve();return t}},i=new Proxy(e.constructor===Array?[]:{},new n("root"));return Object.assign(i,e),i};var p=!0,j=new WeakMap,E=()=>{},te=new Promise(e=>{E=()=>e(!0)}),O=new Set,J=(e,n,i,l,o)=>{var t;return p&&!(typeof o=="object"&&"a"in o&&((t=o==null?void 0:o.a)==null?void 0:t["data-skruv-finished"])===!1)&&(O.delete(e),O.size||(p=!1,E())),j.set(e,o),i[n]=o,l._r._r()},P=(e,n,i,l,o=!0)=>{if(typeof e=="string"||typeof e=="number"||typeof e=="boolean"||e===null)return e;if(j.has(e))return j.get(e);if(typeof e=="object"&&Symbol.asyncIterator in e||typeof e=="function"&&e.constructor.name==="AsyncGeneratorFunction")return p&&O.add(e),j.set(e,null),(async()=>{for await(let t of typeof e=="function"?e():e)if(!J(e,n,i,l,P(t,n,i,l,!1)))break})(),null;if(typeof e=="object"&&"then"in e&&typeof e.then=="function"||typeof e=="function"&&e.constructor.name==="AsyncFunction")return p&&O.add(e),j.set(e,null),(async()=>J(e,n,i,l,P(await(typeof e=="function"?e():e),n,i,l,!1)))(),null;if(typeof e=="function"){if(typeof n=="string"&&(n[0]==="o"&&n[1]==="n"||n[0]==="_"))return e;let t=P(e(),n,i,l,!1);return j.set(e,t),t}if(typeof e=="object"){let t={_r:{_r:()=>((p&&!O.size||!p)&&(p=!1,E()),!0)}},r=t;Array.isArray(e)&&(t=[],r=l),n==="a"&&(r=l);for(let c in e){let s=P(e[c],c,t,r,!1);(s!==null||e[c]===null)&&(t[c]=s)}return(o&&p&&!O.size||!p)&&(p=!1,E()),t}return e};var U=e=>e.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(n,i)=>(i?"-":"")+n.toLowerCase()),W="#fragment",u=(e,n={})=>_(e,n),_=(e,n={})=>{if(e===W&&n.children)return n.children;if(e===W)return[];let{children:i,...l}=n;return Object.keys(l).filter(o=>o!==U(o)).forEach(o=>{l[U(o)]=l[o],delete l[o]}),l["class-name"]&&(l.class=l["class-name"],delete l["class-name"]),l["html-for"]&&(l.for=l["html-for"],delete l["html-for"]),i?T(e,l||{},i):T(e,l||{})};var R=H({todos:["Write todos"]}),K=L`:scope{color:#f1f1f1;background:#0f0f0f}body{max-width:40ch;margin:0 auto}form{display:flex}input{flex:1}a{color:#9b9b9b}`;A(P(_("html",{lang:"en-US",class:K,children:[_("head",{children:[u("title",{children:R.todos.getGenerator(0)}),u("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),u("style",{children:V})]}),u("body",{children:_("main",{children:[u("h1",{children:R.todos.getGenerator(0)}),_("form",{onsubmit:e=>{e.preventDefault(),R.todos.unshift(new FormData(e.target).get("todo")),e.target.reset()},children:[u("input",{name:"todo"}),u("button",{children:"New!"})]}),u("ol",{children:async function*(){for await(let e of R.todos)yield e.map((n,i)=>_("li",{children:[n," ",u("a",{href:"#",onclick:l=>{l.preventDefault(),e.splice(i,1)},children:"x"})]}))}})]})})]})));
//# sourceMappingURL=index.min.js.map
