var p=Symbol.for("skruvDom"),h="data-skruv-key",c="http://www.w3.org/1999/xhtml",K="http://www.w3.org/2000/svg",O="http://www.w3.org/1998/Math/MathML",g=new WeakMap,E=new WeakMap,L=new WeakMap,S={},j=(e,t=globalThis.document.documentElement,a=t.parentNode,m=c,A=!1)=>{var v,y,C,n,k,b;if(!a)throw new Error("No parent to render to");if(typeof e=="boolean"){t&&a.removeChild(t);return}let w=typeof e=="string"||typeof e=="number";if(A||!t||w&&t.nodeName!=="#text"||!w&&t.nodeName.toLowerCase()!==e.t.toLowerCase()){let i=t;if(w?t=document.createTextNode(""+e):(e.t==="svg"&&(m=K),e.t==="math"&&(m=O),t=(S[e.t]||(S[e.t]=document.createElementNS(m,e.t))).cloneNode(!1)),i?a.replaceChild(t,i):a.appendChild(t),w)return}if(w){t.textContent!=e&&(t.textContent=""+e);return}e.r&&(e.r=()=>!t||!a.contains(t)?!1:(j(e,t,a,m),!0)),e.t==="foreignObject"&&(m=c);let l=e.c.flat(1/0),s={};if(((v=l[0])==null?void 0:v.constructor)===Object&&((y=l[0])==null?void 0:y.s)!==p){s=l[0],l=l.slice(1);for(let i in s)if(i!==h)if(i[0]==="o"&&i[1]==="n"){let f=L.get(t);f||(f={},L.set(t,f));let o=i.slice(2);if(!f[i]||""+f[i]!=""+s[i]){if(o==="create"){setTimeout(()=>s[i](t),0),f[i]=s[i];continue}f[i]&&t.removeEventListener(o,f[i]),t.addEventListener(o,s[i]),f[i]=s[i]}else s[i]||t.removeEventListener(o,f[i])}else s[i]!==t.getAttribute(i)&&((i==="checked"||i==="selected"||i==="value"||typeof s[i]=="object")&&(t[i]=s[i]),s[i]?t.setAttribute(i,""+s[i]):t.removeAttribute(i))}if(!l.length&&t.childNodes.length){if(s["data-skruv-wait-for-not-empty"])return;t.replaceChildren();return}if(t.childNodes.length>l.length)for(let i=t.childNodes.length-1;i>=l.length;i--)t.removeChild(t.childNodes[i]);for(let i=0;i<l.length;i++){let f=!1,o;if(l[i].constructor===Object)if(o=g.get((C=l[i].c[0])==null?void 0:C[h]),o){if(o!==t.childNodes[i]&&(o===t.childNodes[i+1]?t.removeChild(t.childNodes[i]):t.childNodes[i]&&g.get((b=(k=(n=l[i+1])==null?void 0:n.c)==null?void 0:k[0])==null?void 0:b[h])===t.childNodes[i]?t.insertBefore(o,t.childNodes[i]):t.childNodes[i]?t.replaceChild(o,t.childNodes[i]):t.appendChild(o)),f=l[i].c[0][h]!==E.get(t.childNodes[i]),!f){let d=g.get(t.childNodes[i]);if(d){let x=!0;for(let M in l[i].c[0][h])l[i].c[0][h][M]!==d[M]&&(x=!1);if(x)continue}}}else f=g.has(t.childNodes[i]);j(l[i],t.childNodes[i]||!1,t,m,f)}s[h]&&(g.set(s[h],t),E.set(t,s[h]),g.set(t,{...s[h]}))},T=new Proxy({},{get:(e,t)=>(...a)=>({s:p,t,c:a})}),W=(e,...t)=>({s:p,t:e,c:t});export{T as elementFactory,W as h,j as render};
//# sourceMappingURL=index.min.js.map
