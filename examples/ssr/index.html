<!DOCTYPE html><html lang="en-US" class="skruv-css-scope-1654833168"><head><title>Write todos</title><meta name="viewport" content="width=device-width, initial-scale=1"/><style>.skruv-css-scope-1654833168 {color: #f1f1f1; background: #0f0f0f;}.skruv-css-scope-1654833168 body {max-width: 40ch; margin: 0 auto;}.skruv-css-scope-1654833168 form {display: flex; align-items: end;}.skruv-css-scope-1654833168 label {flex: 1;}.skruv-css-scope-1654833168 input {width: 100%;}.skruv-css-scope-1654833168 a {color: #9b9b9b;}</style><link rel="icon" href="/icon.svg" type="image/svg+xml" sizes="any"/><meta name="description" content="Skruv todo-list"/></head><body><main><main></main><h1>Write todos</h1><form><label>What do you need to do?<input type="text" name="todo"/></label><button>New!</button></form><ol><li>Write todos <a href="#">x</a></li></ol></main><script type="module">var E="http://www.w3.org/1999/xhtml",q="http://www.w3.org/2000/svg",Q="http://www.w3.org/1998/Math/MathML",g=new WeakMap,D=new WeakMap,G=new WeakMap,L={},O=(t,e=globalThis.document.documentElement,f=e.parentNode,h=E,n=!1)=>{var a,m,u,p,y,C,x;if(!f)throw new Error("No parent to render to");if(typeof t=="boolean"){e&&f.removeChild(e);return}let o=typeof t=="string"||typeof t=="number";if(n||!e||o&&e.nodeName!=="#text"||!o&&e.nodeName.toLowerCase()!==t.t.toLowerCase()){let s=e;if(o?e=document.createTextNode(""+t):(t.t==="svg"&&(h=q),t.t==="math"&&(h=Q),e=(L[t.t]||(L[t.t]=document.createElementNS(h,t.t))).cloneNode(!1)),s?f.replaceChild(e,s):f.appendChild(e),o)return}if(o){e.textContent!=t&&(e.textContent=""+t);return}t.r&&(t.r=()=>!e||!f.contains(e)?!1:(O(t,e,f,h),!0)),t.t==="foreignObject"&&(h=E);let r=t.c.flat(1/0),c={};if(((a=r[0])==null?void 0:a.constructor)===Object&&!((m=r[0])!=null&&m.isSkruvDom)){c=r[0],r=r.slice(1);let s=G.get(e);s||(s={},G.set(e,s));for(let[l,i]of Object.entries(c))if(""+s[l]!=""+i&&l!=="data-skruv-key"){if(l==="data-skruv-after-create"){setTimeout(()=>i(e),0),s[l]=i;continue}if(l[0]==="o"&&l[1]==="n"){let d=l.slice(2);s[l]?i||e.removeEventListener(d,i):(s[l]&&e.removeEventListener(d,i),e.addEventListener(d,i)),s[l]=i;continue}(l==="checked"||l==="selected"||l==="value"||e.nodeName.includes("-"))&&(e[l]=i),i?e.setAttribute(l,""+i):e.removeAttribute(l),s[l]=i}}if(!r.length&&e.childNodes.length){if(c["data-skruv-wait-for-not-empty"])return;e.replaceChildren();return}if(e.childNodes.length>r.length)for(let s=e.childNodes.length-1;s>=r.length;s--)e.removeChild(e.childNodes[s]);for(let s=0;s<r.length;s++){let l=!1,i;if((u=r[s])!=null&&u.c)if(i=g.get((p=r[s].c[0])==null?void 0:p["data-skruv-key"]),i){if(i!==e.childNodes[s]&&(i===e.childNodes[s+1]?e.removeChild(e.childNodes[s]):e.childNodes[s]&&g.get((x=(C=(y=r[s+1])==null?void 0:y.c)==null?void 0:C[0])==null?void 0:x["data-skruv-key"])===e.childNodes[s]?e.insertBefore(i,e.childNodes[s]):e.childNodes[s]?e.replaceChild(i,e.childNodes[s]):e.appendChild(i)),l=r[s].c[0]["data-skruv-key"]!==D.get(e.childNodes[s]),!l){let d=g.get(e.childNodes[s]);if(d){let j=!0;for(let w in r[s].c[0]["data-skruv-key"])r[s].c[0]["data-skruv-key"][w]!==d[w]&&(j=!1);if(j)continue}}}else l=g.has(e.childNodes[s]);O(r[s],e.childNodes[s]||!1,e,h,l)}c["data-skruv-key"]&&(g.set(c["data-skruv-key"],e),D.set(e,c["data-skruv-key"]),g.set(e,{...c["data-skruv-key"]}))},F=new Proxy({},{get:(t,e)=>(...f)=>({isSkruvDom:!0,t:e,c:f})});var v=()=>{},W=new Promise(t=>{v=t}),T=new Map,X=t=>{let e=0;if(t.length===0)return e.toString();for(let f=0;f<t.length;f++)e=(e<<5)-e+t.charCodeAt(f),e|=0;return e.toString()},z=(t,...e)=>{var x;let f=t.reduce((s,l,i)=>{var d;return s.push(l),s.push(((d=e==null?void 0:e[i])==null?void 0:d.toString())||""),s},[]).join(""),h=/^\[.*?(?:(["'])(?:.|\\\1)*\1.*)*\]/,n=/([([,]|:scope\b)/,o=/^:scope\b/;function r(s,l){let i=s.search(n);if(i===-1)return{selector:`${l} ${s}`,rest:""};if(s[i]===",")return{selector:`${l} ${s.substring(0,i)}`,rest:s.substring(i+1)};let d=!0,j=!1;i=s.search(/\S/);let w=0;t:for(;i<s.length;++i){let R=s[i];switch(R){case"[":{let $=h.exec(s.substring(i));i+=($?$[0].length:1)-1;continue}case"(":++w;continue;case":":if(d)if(o.test(s.substring(i))){if(w)return null}else continue;else continue;s=s.substring(0,i)+l+s.substring(i+6),i+=l.length,j=!0,--i;continue;case")":w&&--w;continue}if(!w)switch(R){case",":break t;case" ":case">":case"~":case"+":if(!d)continue;d=!1}}return{selector:(j?"":`${l} `)+s.substring(0,i),rest:s.substring(i+1)}}function c(s,l){let i=[];for(;s;){let d=r(s,l);if(d===null)return":not(*)";i.push(d.selector),s=d.rest}return i.join(", ")}function a(s,l){if(s instanceof CSSMediaRule){let i=s.cssRules.length;for(let d=0;d<i;++d)a(s.cssRules[d],l);return}s instanceof CSSStyleRule&&(s.selectorText=c(s.selectorText,l))}let m=X(f),u=`skruv-css-scope-${m}`,p=`.${u}`;if(T.has(m))return u;let y;if(!(globalThis!=null&&globalThis.CSSOM)&&!((x=globalThis.document)!=null&&x.implementation))throw new Error("No css parser available. Either add CSSOM to globalThis or run in browser.");if(globalThis!=null&&globalThis.CSSOM)y=CSSOM.parse(f);else{let s=globalThis.document.implementation.createHTMLDocument(""),l=s.createElementNS("http://www.w3.org/1999/xhtml","style");l.innerText=f,s.body.append(l),y=l.sheet,s.body.removeChild(l)}Array.from((y==null?void 0:y.cssRules)||[]).forEach(s=>a(s,p));let C=Array.from((y==null?void 0:y.cssRules)||[]).map(s=>s.cssText||"").join("");return T.set(m,C),v(),u};async function*I(){for(yield Array.from(T.values()).join("");;)await W,yield Array.from(T.values()).join(""),W=new Promise(t=>{v=t})}var V=t=>{let e=class A{constructor(){this._scheduled=!1,this._skruv_promise=new Promise(n=>{this._skruv_resolve=n})}_resolve(){this._skruv_parent&&this._skruv_parent._resolve&&this._skruv_parent._resolve(),!this._scheduled&&(this._scheduled=!0,setTimeout(()=>{this._skruv_resolve(""),this._skruv_promise=new Promise(n=>{this._skruv_resolve=n}),this._scheduled=!1},0))}set(n,o,r){return o==="_skruv_parent"?(this._skruv_parent=r,!0):(n[o]!==r&&(n[o]=this.recurse(o,r,n)),!0)}get(n,o,r){return o==="getGenerator"?c=>({key:[c,n],[Symbol.asyncIterator]:()=>{let a=!1;return{next:async()=>(a?await this._skruv_promise:a=!0,{done:!1,value:r[c]})}}}):o==="toJSON"?n.constructor===Object?Object.getOwnPropertyNames(n).reduce((c,a)=>{var m;return c[a]=((m=n[a])==null?void 0:m.toJSON)||n[a],c},{}):n.constructor===Array?n.map(c=>(c==null?void 0:c.toJSON)||c):n:o===Symbol.asyncIterator?()=>{let c=!1;return{next:async()=>(c?await this._skruv_promise:c=!0,{done:!1,value:r})}}:n[o]}deleteProperty(n,o){let r=delete n[o];return this._resolve(),r}recurse(n,o,r){var c;if(o&&o.constructor)if(o.constructor===Object&&((c=r==null?void 0:r[n])==null?void 0:c.constructor)===Object){for(let a of Object.getOwnPropertyNames(o))r[n][a]!==o[a]&&(r[n][a]=o[a]);for(let a of Object.getOwnPropertyNames(r[n]).filter(m=>!Object.getOwnPropertyNames(o).includes(m)))delete r[n][a],this._resolve();return r[n]}else if(o.constructor===Object){let a=new A;o=Object.keys(o).reduce((m,u)=>(m[u]=this.recurse(`${n}.${u}`,o[u]),typeof m[u]=="object"&&m[u]!==null&&(m[u]._skruv_parent=a),m),{}),o=new Proxy(o,a),o._skruv_parent=this,this._resolve()}else if(o.constructor===Array){let a=new A;o=o.map((m,u)=>{let p=this.recurse(`${n}[${u}]`,m);return typeof p=="object"&&p!==null&&(p._skruv_parent=a),p}),o=new Proxy(o,a),o._skruv_parent=this,this._resolve()}else this._resolve();else this._resolve();return o}},f=new Proxy(t.constructor===Array?[]:{},new e("root"));return Object.assign(f,t),f};var H=Symbol.for("skruvDom"),b=!0,S=new WeakMap,P=()=>{},K=new Promise(t=>{P=()=>{b=!1,setTimeout(()=>t(""),0)}}),_=new Set,J=(t,e,f,h,n)=>{var o,r;return b&&!(typeof n=="object"&&"c"in n&&((r=(o=n==null?void 0:n.c)==null?void 0:o[0])==null?void 0:r["data-skruv-finished"])===!1)&&(_.delete(t),_.size||P()),S.set(t,n),f[e]=n,h.r?h.r():!0},k=(t,e=null,f=null,h=null,n=!0)=>{if(typeof t=="string"||typeof t=="number"||typeof t=="boolean"||t===null)return t;if(S.has(t))return S.get(t);if(e&&f&&h){if(typeof t=="object"&&Symbol.asyncIterator in t||typeof t=="function"&&t.constructor.name==="AsyncGeneratorFunction")return b&&_.add(t),S.set(t,null),(async()=>{for await(let o of typeof t=="function"?t():t)if(!J(t,e,f,h,k(o,e,f,h,!1)))break})(),null;if(typeof t=="object"&&"then"in t&&typeof t.then=="function"||typeof t=="function"&&t.constructor.name==="AsyncFunction")return b&&_.add(t),S.set(t,null),(async()=>J(t,e,f,h,k(await(typeof t=="function"?t():t),e,f,h,!1)))(),null;if(typeof t=="function"){if(e[0]==="o"&&e[1]==="n"||e==="r"&&(f==null?void 0:f.s)===H)return t;let o=k(t(),e,f,h,!1);return S.set(t,o),o}}if(typeof t=="object"){let o={},r=o;t.s===H?o.r=()=>((b&&!_.size||!b)&&P(),!0):h!=null&&h.r&&(r=h),Array.isArray(t)&&(o=[]);for(let c in t){let a=k(t[c],c,o,r,!1);(a!==null||t[c]===null)&&(o[c]=a)}return(n&&b&&!_.size||!b)&&P(),o}return t};var{html:Y,head:Z,title:N,meta:B,link:tt,body:et,main:U,h1:st,form:ot,label:it,input:nt,button:rt,ol:lt,li:ft,a:ct,style:at,script:ht}=F,M=V({todos:["Write todos"]}),dt=z`:scope{color:#f1f1f1;background:#0f0f0f}body{max-width:40ch;margin:0 auto}form{display:flex;align-items:end}label{flex:1}input{width:100%}a{color:#9b9b9b}`,mt=k(Y({lang:"en-US",class:dt},Z(N(M.todos.getGenerator(0)),B({name:"viewport",content:"width=device-width, initial-scale=1"}),at(I),tt({rel:"icon",href:"/icon.svg",type:"image/svg+xml",sizes:"any"}),B({name:"description",content:"Skruv todo-list"})),et(U(U(),st(M.todos.getGenerator(0)),ot({onsubmit:t=>{t.preventDefault();let e=""+new FormData(t.currentTarget).get("todo");M.todos.unshift(e),t.currentTarget.reset()}},it("What do you need to do?",nt({type:"text",name:"todo"})),rt("New!")),async function*(){for await(let t of M)yield lt(t.todos.map((e,f)=>ft(`${e} `,ct({href:"#",onclick:h=>{h.preventDefault(),t.todos.splice(f,1)}},"x"))))}),!!globalThis.skruvSSRScript&&ht({type:"module"},globalThis.skruvSSRScript)))),ut=async()=>{await K,O(mt),await new Promise(t=>setTimeout(t,0))};ut();export{ut as doRender};
//# sourceMappingURL=index.min.js.map
</script></body></html>