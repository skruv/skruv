var M="http://www.w3.org/1999/xhtml",A="http://www.w3.org/2000/svg",O="http://www.w3.org/1998/Math/MathML",v=new WeakMap,E=new WeakMap,L=new WeakMap,S={},c=(l,i=globalThis.document.documentElement,f=i.parentNode,o=M,j=!1)=>{var d,g,y,w,p,n,C;if(!f)throw new Error("No parent to render to");if(typeof l=="boolean"){i&&f.removeChild(i);return}let m=typeof l=="string"||typeof l=="number";if(j||!i||m&&i.nodeName!=="#text"||!m&&i.nodeName.toLowerCase()!==l.t.toLowerCase()){let e=i;if(m?i=document.createTextNode(""+l):(l.t==="svg"&&(o=A),l.t==="math"&&(o=O),i=(S[l.t]||(S[l.t]=document.createElementNS(o,l.t))).cloneNode(!1)),e?f.replaceChild(i,e):f.appendChild(i),m)return}if(m){i.textContent!=l&&(i.textContent=""+l);return}l.r&&(l.r=()=>!i||!f.contains(i)?!1:(c(l,i,f,o),!0)),l.t==="foreignObject"&&(o=M);let a=l.c.flat(1/0),h={};if(((d=a[0])==null?void 0:d.constructor)===Object&&!((g=a[0])!=null&&g.isSkruvDom)){h=a[0],a=a.slice(1);let e=L.get(i);e||(e={},L.set(i,e));for(let[t,s]of Object.entries(h))if(""+e[t]!=""+s&&t!=="data-skruv-key"){if(t==="data-skruv-after-create"){setTimeout(()=>s(i),0),e[t]=s;continue}if(t[0]==="o"&&t[1]==="n"){let k=t.slice(2);e[t]?s||i.removeEventListener(k,s):(e[t]&&i.removeEventListener(k,s),i.addEventListener(k,s)),e[t]=s;continue}(t==="checked"||t==="selected"||t==="value"||i.nodeName.includes("-"))&&(i[t]=s),s?i.setAttribute(t,""+s):i.removeAttribute(t),e[t]=s}}if(!a.length&&i.childNodes.length){if(h["data-skruv-wait-for-not-empty"])return;i.replaceChildren();return}if(i.childNodes.length>a.length)for(let e=i.childNodes.length-1;e>=a.length;e--)i.removeChild(i.childNodes[e]);for(let e=0;e<a.length;e++){let t=!1,s;if((y=a[e])!=null&&y.c)if(s=v.get((w=a[e].c[0])==null?void 0:w["data-skruv-key"]),s){if(s!==i.childNodes[e]&&(s===i.childNodes[e+1]?i.removeChild(i.childNodes[e]):i.childNodes[e]&&v.get((C=(n=(p=a[e+1])==null?void 0:p.c)==null?void 0:n[0])==null?void 0:C["data-skruv-key"])===i.childNodes[e]?i.insertBefore(s,i.childNodes[e]):i.childNodes[e]?i.replaceChild(s,i.childNodes[e]):i.appendChild(s)),t=a[e].c[0]["data-skruv-key"]!==E.get(i.childNodes[e]),!t){let k=v.get(i.childNodes[e]);if(k){let b=!0;for(let x in a[e].c[0]["data-skruv-key"])a[e].c[0]["data-skruv-key"][x]!==k[x]&&(b=!1);if(b)continue}}}else t=v.has(i.childNodes[e]);c(a[e],i.childNodes[e]||!1,i,o,t)}h["data-skruv-key"]&&(v.set(h["data-skruv-key"],i),E.set(i,h["data-skruv-key"]),v.set(i,{...h["data-skruv-key"]}))},T=new Proxy({},{get:(l,i)=>(...f)=>({isSkruvDom:!0,t:i,c:f})});export{T as elementFactory,c as render};
//# sourceMappingURL=index.min.js.map
