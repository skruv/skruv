var n="http://www.w3.org/1999/xhtml",v=new WeakMap,A=new WeakMap,E=new WeakMap,M={},S=(s,i=globalThis.document.documentElement,h=i.parentNode,o=n,L=!1)=>{var g,k,y,p,C,b,d;if(!h)throw new Error("No parent to render to");if(typeof s=="boolean"){i&&h.removeChild(i);return}let w=typeof s=="string"||typeof s=="number";if(L||!i||w&&i.nodeName!=="#text"||!w&&i.nodeName.toLowerCase()!==s.t.toLowerCase()){let e=i;if(w?i=document.createTextNode(""+s):(s.t==="svg"&&(o="http://www.w3.org/2000/svg"),s.t==="math"&&(o="http://www.w3.org/1998/Math/MathML"),s.t==="feed"&&(o="http://www.w3.org/2005/Atom"),(s.t==="urlset"||s.t==="sitemapindex")&&(o="https://www.sitemaps.org/schemas/sitemap/0.9"),i=(M[s.t]||(M[s.t]=document.createElementNS(o,s.t))).cloneNode(!1)),e?h.replaceChild(i,e):h.appendChild(i),w)return}if(w){i.textContent!=s&&(i.textContent=""+s);return}s.r&&(s.r=()=>!i||!h.contains(i)?!1:(S(s,i,h,o),!0)),s.t==="foreignObject"&&(o=n);let f=s.c.flat(1/0);globalThis!=null&&globalThis.isSkruvSSR||(f=f.filter(e=>{var t;return!((t=e==null?void 0:e.t)!=null&&t.startsWith("skruv"))}));let a={};if(((g=f[0])==null?void 0:g.constructor)===Object&&!((k=f[0])!=null&&k.isSkruvDom)){a=f[0],f=f.slice(1);let e=E.get(i);e||(e={},E.set(i,e));for(let[t,l]of Object.entries(a))if(""+e[t]!=""+l){if(t==="skruvAfterCreate"){setTimeout(()=>l(i),0),e[t]=l;continue}if(!t.startsWith("skruv")){if(t[0]==="o"&&t[1]==="n"){let m=t.slice(2);e[t]?l||i.removeEventListener(m,l):(e[t]&&i.removeEventListener(m,l),i.addEventListener(m,l)),e[t]=l;continue}(t==="checked"||t==="selected"||t==="value"||i.nodeName.includes("-"))&&(i[t]=l),l!==void 0?i.setAttribute(t,""+l):i.removeAttribute(t),e[t]=l}}}for(let e of i.getAttributeNames().filter(t=>!Object.keys(a).includes(t)))i.removeAttribute(e);if(!f.length&&i.childNodes.length){if(a.skruvWaitForNotEmpty)return;i.replaceChildren();return}if(i.childNodes.length>f.length)for(let e=i.childNodes.length-1;e>=f.length;e--)i.removeChild(i.childNodes[e]);for(let e=0;e<f.length;e++){let t=!1,l;if((y=f[e])!=null&&y.c)if(l=v.get((p=f[e].c[0])==null?void 0:p.skruvKey),l){if(l!==i.childNodes[e]&&(l===i.childNodes[e+1]?i.removeChild(i.childNodes[e]):i.childNodes[e]&&v.get((d=(b=(C=f[e+1])==null?void 0:C.c)==null?void 0:b[0])==null?void 0:d.skruvKey)===i.childNodes[e]?i.insertBefore(l,i.childNodes[e]):i.childNodes[e]?i.replaceChild(l,i.childNodes[e]):i.appendChild(l)),t=f[e].c[0].skruvKey!==A.get(i.childNodes[e]),!t){let m=v.get(i.childNodes[e]);if(m){let K=!0;for(let x in f[e].c[0].skruvKey)f[e].c[0].skruvKey[x]!==m[x]&&(K=!1);if(K)continue}}}else t=v.has(i.childNodes[e]);S(f[e],i.childNodes[e]||!1,i,o,t)}a.skruvKey&&(v.set(a.skruvKey,i),A.set(i,a.skruvKey),v.set(i,{...a.skruvKey}))},W=new Proxy({},{get:(s,i)=>(...h)=>({isSkruvDom:!0,t:i,c:h})});export{W as elementFactory,S as render};
//# sourceMappingURL=skruv.min.js.map
