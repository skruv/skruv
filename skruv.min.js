var M="http://www.w3.org/1999/xhtml",m=new WeakMap,S=new WeakMap,A=new WeakMap,E={},L=(s,t=globalThis.document.documentElement,f=t.parentNode,h=M,j=!1)=>{var w,d,g,y,p,b,C;if(!f)throw new Error("No parent to render to");if(typeof s=="boolean"){t&&f.removeChild(t);return}let v=typeof s=="string"||typeof s=="number";if(j||!t||v&&t.nodeName!=="#text"||!v&&t.nodeName.toLowerCase()!==s.t.toLowerCase()){let i=t;if(v?t=document.createTextNode(""+s):(s.t==="svg"&&(h="http://www.w3.org/2000/svg"),s.t==="math"&&(h="http://www.w3.org/1998/Math/MathML"),s.t==="feed"&&(h="http://www.w3.org/2005/Atom"),(s.t==="urlset"||s.t==="sitemapindex")&&(h="https://www.sitemaps.org/schemas/sitemap/0.9"),t=(E[s.t]||(E[s.t]=document.createElementNS(h,s.t))).cloneNode(!1)),i?f.replaceChild(t,i):f.appendChild(t),v)return}if(v){t.textContent!=s&&(t.textContent=""+s);return}s.r&&(s.r=()=>!t||!f.contains(t)?!1:(L(s,t,f,h),!0)),s.t==="foreignObject"&&(h=M);let a=s.c.flat(1/0);globalThis!=null&&globalThis.isSkruvSSR||(a=a.filter(i=>{var e;return!((e=i==null?void 0:i.t)!=null&&e.startsWith("skruv-"))}));let o={};if(((w=a[0])==null?void 0:w.constructor)===Object&&!((d=a[0])!=null&&d.isSkruvDom)){o=a[0],a=a.slice(1);let i=A.get(t);i||(i={},A.set(t,i));for(let[e,l]of Object.entries(o))if(""+i[e]!=""+l&&e!=="data-skruv-key"){if(e==="data-skruv-after-create"){setTimeout(()=>l(t),0),i[e]=l;continue}if(e[0]==="o"&&e[1]==="n"){let k=e.slice(2);i[e]?l||t.removeEventListener(k,l):(i[e]&&t.removeEventListener(k,l),t.addEventListener(k,l)),i[e]=l;continue}(e==="checked"||e==="selected"||e==="value"||t.nodeName.includes("-"))&&(t[e]=l),l!==void 0?t.setAttribute(e,""+l):t.removeAttribute(e),i[e]=l}}for(let i of t.getAttributeNames().filter(e=>!Object.keys(o).includes(e)))t.removeAttribute(i);if(!a.length&&t.childNodes.length){if(o["data-skruv-wait-for-not-empty"])return;t.replaceChildren();return}if(t.childNodes.length>a.length)for(let i=t.childNodes.length-1;i>=a.length;i--)t.removeChild(t.childNodes[i]);for(let i=0;i<a.length;i++){let e=!1,l;if((g=a[i])!=null&&g.c)if(l=m.get((y=a[i].c[0])==null?void 0:y["data-skruv-key"]),l){if(l!==t.childNodes[i]&&(l===t.childNodes[i+1]?t.removeChild(t.childNodes[i]):t.childNodes[i]&&m.get((C=(b=(p=a[i+1])==null?void 0:p.c)==null?void 0:b[0])==null?void 0:C["data-skruv-key"])===t.childNodes[i]?t.insertBefore(l,t.childNodes[i]):t.childNodes[i]?t.replaceChild(l,t.childNodes[i]):t.appendChild(l)),e=a[i].c[0]["data-skruv-key"]!==S.get(t.childNodes[i]),!e){let k=m.get(t.childNodes[i]);if(k){let n=!0;for(let x in a[i].c[0]["data-skruv-key"])a[i].c[0]["data-skruv-key"][x]!==k[x]&&(n=!1);if(n)continue}}}else e=m.has(t.childNodes[i]);L(a[i],t.childNodes[i]||!1,t,h,e)}o["data-skruv-key"]&&(m.set(o["data-skruv-key"],t),S.set(t,o["data-skruv-key"]),m.set(t,{...o["data-skruv-key"]}))},O=new Proxy({},{get:(s,t)=>(...f)=>({isSkruvDom:!0,t,c:f})});export{O as elementFactory,L as render};
//# sourceMappingURL=skruv.min.js.map
