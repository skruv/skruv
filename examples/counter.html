<!DOCTYPE html>
<title>Skruv counter example</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script type="module">
  import { createState, elements, render } from '../skruv.min.js'
  const {
    html,
    head,
    title,
    meta,
    body,
    main,
    h1,
    input,
    ul,
    li,
    button
  } = elements

  export const state = createState({
    todos: [],
    value: ""
  })

  render(
    html({ lang: 'en-US' },
      head({},
        title({}, 'Skruv counter example'),
        meta({ name: 'viewport', content: 'width=device-width, initial-scale=1' })
      ),
      body({},
        main({},
          h1({}, 'To do list'),
          async function* () {
            for await (const currentState of state) {
              yield [
                input({ type: "text", oninput: e => currentState.value = e.target.value }),
                ul({},
                  currentState.todos.map((todo) => li({}, todo))
                ),
                button({ onclick: () => { currentState.todos.push(currentState.value) } }, 'New!')
              ]
            }
          }
        )
      )
    )
  )
</script>