var x=Symbol.for("skruvDom"),k=Symbol.for("skruvDomPrepared"),w=new WeakMap,S=new WeakMap,L=new WeakMap,_=()=>{},G=new Promise(t=>{_=()=>t()}),g=new Set,p=(globalThis==null?void 0:globalThis.SkruvWaitForAsync)||!!document.querySelector("data-skruv-ssr-rendered");var E=(t,...e)=>{var s,o,f,m,c;return{s:x,t,...typeof e[0]=="object"&&!Array.isArray(e[0])&&!(e[0]instanceof Function)&&!(e[0]instanceof Function&&((f=(o=(s=e[0])==null?void 0:s.prototype)==null?void 0:o.toString)==null?void 0:f.call(o))==="[object AsyncGenerator]")&&!((m=e[0])!=null&&m[Symbol.asyncIterator])&&((c=e[0])==null?void 0:c.s)!==x?{_a:e[0],_c:e.slice(1)}:{_a:{},_c:e},r:{r:()=>(p&&!g.size&&(p=!1,_()),!0)}}},C=(t,e,s)=>{var f,m;let o=(c,a)=>{var d;return p&&((d=a==null?void 0:a._a)==null?void 0:d["data-skruv-finished"])!==!1&&(g.delete(c),a&&((a==null?void 0:a.s)===x?b(a):C(a,e,s))),w.set(c,a),e.r.r()};if(w.has(t))return w.get(t);if(typeof t=="object"&&(t==null?void 0:t[Symbol.asyncIterator])){let c=t;return p&&g.add(c),w.set(c,null),(async()=>{for await(let a of c)if(!o(t,a))break})(),!1}else{if(t instanceof Function&&((m=(f=t==null?void 0:t.prototype)==null?void 0:f.toString)==null?void 0:m.call(f))==="[object AsyncGenerator]")return p&&g.add(t),w.set(t,null),(async()=>{for await(let c of t())if(!o(t,c))break})(),!1;if(typeof t=="object"&&t!==null&&(t==null?void 0:t.then)instanceof Function){let c=t;return p&&g.add(t),w.set(c,null),(async()=>o(c,await c))(),!1}else{if(typeof t=="function"&&t.constructor.name==="AsyncFunction")return p&&g.add(t),w.set(t,null),(async()=>o(t,await t()))(),!1;if(typeof t=="function")return s?t():t;if(typeof t=="string"||typeof t=="number")return s?E("#text",{data:t.toString()}):t.toString();if(typeof t=="boolean")return t}}throw new Error("Unkown type in syncify: "+JSON.stringify(t))},F=(t,e)=>{let s=t.flat(1/0).map(o=>(o==null?void 0:o.s)===x?b(o):C(o,e,!0)).flat(1/0).filter(o=>o!==null&&typeof o!="boolean"&&typeof o!="undefined");return s.find(o=>(o==null?void 0:o.p)!==k)!==void 0?F(s,e):s},b=t=>{let e=Object.fromEntries(Object.entries(t._a).filter(s=>s[1]!==null&&typeof s[1]!="undefined").map(([s,o])=>s==="data-skruv-key"?[s,o]:[s,C(o,t,!1)]).filter(s=>s[1]!==null&&typeof s[1]!="undefined"));return{p:k,...t,a:e,c:F(t._c,t)}},O=(t,e,s,o)=>{var T;if(t.p!==k)throw new Error("unkown type in render: "+JSON.stringify(t));for(let n of t.c)if(n.p!==k)throw new Error("unkown type in render: "+JSON.stringify(n));if(!s||e&&!s.contains(e))return!1;let f=e.ownerDocument,m=f.documentElement;for(let n of e.getAttributeNames().filter(i=>!Object.keys(t.a).includes(i)))e.removeAttribute(n);for(let[n,i]of Object.entries(t.a))if(n!=="data-skruv-key"){if(n.slice(0,2)==="on"){let l=S.get(e),r=l==null?void 0:l[n],y=n.slice(2);if(l||(l={},S.set(e,l)),i instanceof Function){r&&r.toString()!==i.toString()&&(e.removeEventListener(y,r),l[n]=null),r||(l[n]=i,e.addEventListener(y,i));continue}r&&!i&&(e.removeEventListener(y,r),l[n]=null)}if(i===null||i===!1){e.getAttribute(n)&&e.removeAttribute(n);continue}e.setAttribute(n,i.toString()),n==="value"&&(typeof i=="number"||typeof i=="string")&&e instanceof HTMLInputElement&&(e[n]=i.toString()),(typeof i=="boolean"&&(e instanceof HTMLInputElement&&n==="checked"||e instanceof HTMLOptionElement&&n==="selected")||typeof i=="object")&&(e[n]=i)}if(t.r.r=()=>O(b(t),e,s,o),t.a["data-skruv-opaque"])return!0;let c=Array.from(e.childNodes),a=t.c,d=[],I=(n,i)=>n.nodeName.toLowerCase()===i.t&&!d.includes(n);for(let n=0;n<a.length;n++){let i=a[n],l=i.a["data-skruv-key"]?L.get(i.a["data-skruv-key"]):c.find(r=>I(r,i));l?d[n]=l:d[n]=null}let P=c.filter(n=>!d.includes(n));if(t.c.length||!t.a["data-skruv-wait-for-not-empty"])for(let n of P.filter(i=>!!i))e.removeChild(n),setTimeout(()=>{var i;!(m!=null&&m.contains(n))&&((i=S.get(n))==null?void 0:i.onremove)&&n.dispatchEvent(new CustomEvent("remove"))},1);for(let n=0;n<d.length;n++){let i=t.c[n],l=!1;if(d[n]){if(d[n]!==e.childNodes[n]){let y=d[n];y&&(n===0?e.prepend(y):e.childNodes[n-1].after(y))}}else{let y;t.t==="#comment"?y=f.createComment(""):i.t==="#text"?y=f.createTextNode(""):i.p===k&&(o||i.t==="svg")?y=f.createElementNS("http://www.w3.org/2000/svg",i.t):y=f.createElement(i.t),l=!0,e.childNodes[n]?e.replaceChild(y,e.childNodes[n]):n===0?e.prepend(y):e.childNodes[n-1].after(y)}let r=e.childNodes[n];if(r instanceof Text||r instanceof Comment){r.data!==i.a.data&&(r.data=i.a.data.toString());continue}if(!(r instanceof HTMLElement||r instanceof SVGElement))throw new Error("Child node of unknown type: "+JSON.stringify({childNode:r,child:i}));i.a["data-skruv-key"]&&!L.has(i.a["data-skruv-key"])&&L.set(i.a["data-skruv-key"],r),O(i,r,e,o||t.t==="svg"),l&&((T=S.get(r))==null?void 0:T.oncreate)&&r.dispatchEvent(new CustomEvent("create"))}return!0},M=async(t,e=document.documentElement,s=e==null?void 0:e.parentNode,o=!1)=>{if(!s)throw new Error("Skruv: No parent to render to");if(!(s instanceof HTMLElement||s instanceof SVGElement||s instanceof Document||s instanceof Window))throw new Error("Skruv: Parent of wrong type");p&&(b(t).r.r(),await G),O(b(t),e,s,o)},W={},R=new Proxy(W,{get:(t,e)=>(...s)=>E(e,...s)});var H=t=>t.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(e,s)=>(s?"-":"")+e.toLowerCase()),A="#fragment",h=(t,e={})=>j(t,e),j=(t,e={})=>{if(t===A&&e.children)return e.children;if(t===A)return[];let{children:s,...o}=e;return Object.keys(o).filter(f=>f!==H(f)).forEach(f=>{o[H(f)]=o[f],delete o[f]}),o["class-name"]&&(o.class=o["class-name"],delete o["class-name"]),o["html-for"]&&(o.for=o["html-for"],delete o["html-for"]),s?E(t,o||{},s):E(t,o||{})};var J=":root{color:#fff;background:#0f0f0f}";M(j("html",{lang:"en-US",children:[h(A,{children:j("head",{children:[h("title",{children:"jsx"}),h("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),h("style",{children:J})]})}),h("body",{children:h("div",{children:h("p",{children:"Hello world"})})})]}));
//# sourceMappingURL=index.min.js.map
