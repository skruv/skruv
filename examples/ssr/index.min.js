var N=Symbol.for("skruvDom");var V=(e,...n)=>{var r,d;return{s:N,t:e.toUpperCase(),...typeof n[0]=="object"&&!Array.isArray(n[0])&&!(n[0]instanceof Function)&&!((r=n[0])!=null&&r[Symbol.asyncIterator])&&((d=n[0])==null?void 0:d.s)!==N?{a:n[0],c:n.slice(1)}:{a:{},c:n}}},g=new WeakMap,_={},T=(e,n=globalThis.document.documentElement,r=n==null?void 0:n.parentNode,d=!1)=>{var l,h;if(typeof e=="boolean"||e===null)return!0;if(!r||!r.ownerDocument)throw new Error("no parentNode!");if(!globalThis.document.documentElement.contains(r))return!1;let t=n,s=[],f=t==null?void 0:t.nodeName;if(!t||f!==e.t&&(typeof e=="string"||typeof e=="number")&&f!=="#text"?(typeof e=="string"||typeof e=="number"?t=(_.text||(_.text=r.ownerDocument.createTextNode(""))).cloneNode():d||e.t==="svg"?t=(_[e.t]||(_[e.t]=r.ownerDocument.createElementNS("http://www.w3.org/2000/svg",e.t))).cloneNode():t=(_[e.t]||(_[e.t]=r.ownerDocument.createElement(e.t))).cloneNode(),n?r.replaceChild(t,n):r.appendChild(t)):s=Array.from(t.childNodes),t instanceof Text&&(typeof e=="string"||typeof e=="number"))return t.data.toString()!==e.toString()&&(t.data=e),!0;if(!(t instanceof Element)||typeof e!="object")return!0;e._r&&(e._r._r=()=>T(e,t,r,d));for(let o in e.a)o[0]!=="_"&&(o[0]==="o"&&o[1]==="n"?!t["data-event-"+o]||((l=t["data-event-"+o])==null?void 0:l.toString())!==((h=e.a[o])==null?void 0:h.toString())?(t["data-event-"+o]&&t.removeEventListener(o.slice(2),t["data-event-"+o]),t.addEventListener(o.slice(2),e.a[o]),t["data-event-"+o]=e.a[o]):e.a[o]||t.removeEventListener(o.slice(2),t["data-event-"+o]):e.a[o]!==t.getAttribute(o)&&((typeof e.a[o]=="boolean"&&(t instanceof HTMLInputElement&&o==="checked"||t instanceof HTMLOptionElement&&o==="selected")||typeof e.a[o]=="object")&&(t[o]=e.a[o]),e.a[o]?t.setAttribute(o,e.a[o].toString()):t.removeAttribute(o)));let c=e.c.flat(1/0);if(!c.length&&s.length)return t.replaceChildren(),!0;if(s.length>c.length)for(let o=c.length;o<s.length;o++)t.removeChild(s[o]);for(let o=0;o<c.length;o++){if(g.has(c[o])){let p=g.get(c[o]);p&&p!==t.childNodes[o]&&(p===t.childNodes[o+1]?t.removeChild(t.childNodes[o]):g.has(c[o+1])&&g.get(c[o+1])===t.childNodes[o]?t.insertBefore(p,t.childNodes[o]):t.childNodes[o]?t.replaceChild(p,t.childNodes[o]):t.appendChild(p),g.set(e,t));continue}T(c[o],s[o]||!1,t,d)}return g.set(e,t),!0},M=new Proxy({},{get:(e,n)=>(...r)=>V(n,...r)});var C=()=>{},D=new Promise(e=>{C=e}),O=new Map,z=e=>{let n=0;if(e.length===0)return n.toString();for(let r=0;r<e.length;r++)n=(n<<5)-n+e.charCodeAt(r),n|=0;return n.toString()},F=(e,...n)=>{var E;let r=e.reduce((i,m,a)=>{var u;return i.push(m),i.push(((u=n==null?void 0:n[a])==null?void 0:u.toString())||""),i},[]).join(""),d=/^\[.*?(?:(["'])(?:.|\\\1)*\1.*)*\]/,t=/([([,]|:scope\b)/,s=/^:scope\b/;function f(i,m){let a=i.search(t);if(a===-1)return{selector:`${m} ${i}`,rest:""};if(i[a]===",")return{selector:`${m} ${i.substring(0,a)}`,rest:i.substring(a+1)};let u=!0,$=!1;a=i.search(/\S/);let j=0;e:for(;a<i.length;++a){let R=i[a];switch(R){case"[":{let k=d.exec(i.substring(a));a+=(k?k[0].length:1)-1;continue}case"(":++j;continue;case":":if(u)if(s.test(i.substring(a))){if(j)return null}else continue;else continue;i=i.substring(0,a)+m+i.substring(a+6),a+=m.length,$=!0,--a;continue;case")":j&&--j;continue}if(!j)switch(R){case",":break e;case" ":case">":case"~":case"+":if(!u)continue;u=!1}}return{selector:($?"":`${m} `)+i.substring(0,a),rest:i.substring(a+1)}}function c(i,m){let a=[];for(;i;){let u=f(i,m);if(u===null)return":not(*)";a.push(u.selector),i=u.rest}return a.join(", ")}function l(i,m){if(i instanceof CSSMediaRule){let a=i.cssRules.length;for(let u=0;u<a;++u)l(i.cssRules[u],m);return}i instanceof CSSStyleRule&&(i.selectorText=c(i.selectorText,m))}let h=z(r),o=`skruv-css-scope-${h}`,p=`.${o}`;if(O.has(h))return o;let b;if(!(globalThis!=null&&globalThis.CSSOM)&&!((E=globalThis.document)!=null&&E.implementation))throw new Error("No css parser available. Either add CSSOM to globalThis or run in browser.");if(globalThis!=null&&globalThis.CSSOM)b=CSSOM.parse(r);else{let i=globalThis.document.implementation.createHTMLDocument(""),m=i.createElement("style");m.innerText=r,i.body.append(m),b=m.sheet,i.body.removeChild(m)}Array.from((b==null?void 0:b.cssRules)||[]).forEach(i=>l(i,p));let H=Array.from((b==null?void 0:b.cssRules)||[]).map(i=>i.cssText||"").join("");return O.set(h,H),C(),o};async function*G(){for(yield Array.from(O.values()).join("");;)await D,yield Array.from(O.values()).join(""),D=new Promise(e=>{C=e})}var J=(globalThis==null?void 0:globalThis.requestAnimationFrame)||(e=>setTimeout(e,0)),I=e=>{let n=class{constructor(t){this.name=t,this._scheduled=!1,this._skruv_promise=new Promise(s=>{this._skruv_resolve=s})}_resolve(){this._skruv_parent&&this._skruv_parent._resolve&&this._skruv_parent._resolve(),!this._scheduled&&(this._scheduled=!0,J(()=>{this._skruv_resolve(),this._skruv_promise=new Promise(t=>{this._skruv_resolve=t}),this._scheduled=!1}))}set(t,s,f){return s==="_skruv_parent"?(this._skruv_parent=f,!0):(t[s]!==f&&(t[s]=this.recurse(s,f,t)),!0)}get(t,s,f){return s==="getGenerator"?c=>({key:[c,t],[Symbol.asyncIterator]:()=>{let l=!1;return{next:async()=>(l?await this._skruv_promise:l=!0,{done:!1,value:f[c]})}}}):s==="skruv_resolve"?()=>this._resolve():s==="toJSON"?t.constructor===Object?Object.getOwnPropertyNames(t).reduce((c,l)=>{var h;return c[l]=((h=t[l])==null?void 0:h.toJSON)||t[l],c},{}):t.constructor===Array?t.map(c=>(c==null?void 0:c.toJSON)||c):t:s===Symbol.asyncIterator?()=>{let c=!1;return{next:async()=>(c?await this._skruv_promise:c=!0,{done:!1,value:f})}}:t[s]}deleteProperty(t,s){let f=delete t[s];return this._resolve(),f}recurse(t,s,f){var c;if(s&&s.constructor)if(s.constructor===Object&&((c=f==null?void 0:f[t])==null?void 0:c.constructor)===Object){for(let l of Object.getOwnPropertyNames(s))f[t][l]!==s[l]&&(f[t][l]=s[l]);for(let l of Object.getOwnPropertyNames(f[t]).filter(h=>!Object.getOwnPropertyNames(s).includes(h)))delete f[t][l],this._resolve();return f[t]}else if(s.constructor===Object){let l=new this.constructor(`${this.name}.${t}`);s=Object.keys(s).reduce((h,o)=>(h[o]=this.recurse(`${t}.${o}`,s[o]),typeof h[o]=="object"&&h[o]!==null&&(h[o]._skruv_parent=l),h),{}),s=new Proxy(s,l),s._skruv_parent=this,this._resolve()}else if(s.constructor===Array){let l=new this.constructor(`${this.name}.${t}`);s=s.map((h,o)=>{let p=this.recurse(`${t}[${o}]`,h);return typeof p=="object"&&p!==null&&(p._skruv_parent=l),p}),s=new Proxy(s,l),s._skruv_parent=this,this._resolve()}else this._resolve();else this._resolve();return s}},r=new Proxy(e.constructor===Array?[]:{},new n("root"));return Object.assign(r,e),r};var y=!0,S=new WeakMap,A=()=>{},de=new Promise(e=>{A=()=>e(!0)}),w=new Set,L=(e,n,r,d,t)=>{var s;return y&&!(typeof t=="object"&&"a"in t&&((s=t==null?void 0:t.a)==null?void 0:s["data-skruv-finished"])===!1)&&(w.delete(e),w.size||(y=!1,A())),S.set(e,t),r[n]=t,d._r._r()},x=(e,n,r,d,t=!0)=>{if(typeof e=="string"||typeof e=="number"||typeof e=="boolean"||e===null)return e;if(S.has(e))return S.get(e);if(typeof e=="object"&&Symbol.asyncIterator in e||typeof e=="function"&&e.constructor.name==="AsyncGeneratorFunction")return y&&w.add(e),S.set(e,null),(async()=>{for await(let s of typeof e=="function"?e():e)if(!L(e,n,r,d,x(s,n,r,d,!1)))break})(),null;if(typeof e=="object"&&"then"in e&&typeof e.then=="function"||typeof e=="function"&&e.constructor.name==="AsyncFunction")return y&&w.add(e),S.set(e,null),(async()=>L(e,n,r,d,x(await(typeof e=="function"?e():e),n,r,d,!1)))(),null;if(typeof e=="function"){if(typeof n=="string"&&(n[0]==="o"&&n[1]==="n"||n[0]==="_"))return e;let s=x(e(),n,r,d,!1);return S.set(e,s),s}if(typeof e=="object"){let s={_r:{_r:()=>((y&&!w.size||!y)&&(y=!1,A()),!0)}},f=s;Array.isArray(e)&&(s=[],f=d);for(let c in e){let l=x(e[c],c,s,f,!1);(l!==null||e[c]===null)&&(s[c]=l)}return(t&&y&&!w.size||!y)&&(y=!1,A()),s}return e};var{html:W,head:v,title:U,meta:q,body:B,main:K,h1:Q,form:X,input:Y,button:Z,ol:ee,li:te,a:oe,style:se,script:ne}=M,P=I({todos:["Write todos"]}),ie=F`:scope{color:#f1f1f1;background:#0f0f0f}body{max-width:40ch;margin:0 auto}form{display:flex}input{flex:1}a{color:#9b9b9b}`;T(x(W({lang:"en-US",class:ie},v(U(P.todos.getGenerator(0)),q({name:"viewport",content:"width=device-width, initial-scale=1"}),se(G)),B(K(Q(P.todos.getGenerator(0)),X({onsubmit:e=>{e.preventDefault(),P.todos.unshift(new FormData(e.target).get("todo")),e.target.reset()}},Y({type:"text",name:"todo"}),Z("New!")),async function*(){for await(let e of P)yield ee(e.todos.map((n,r)=>te(`${n} `,oe({href:"#",onclick:d=>{d.preventDefault(),e.todos.splice(r,1)}},"x"))))}),!!globalThis.skruvSSRScript&&ne({type:"module"},globalThis.skruvSSRScript)))));
//# sourceMappingURL=index.min.js.map
