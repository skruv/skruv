<!DOCTYPE html><html lang="en-US" class="skruv-css-scope-1654833168"><head><title>Write todos</title><meta name="viewport" content="width=device-width, initial-scale=1"/><style>.skruv-css-scope-1654833168 {color: #f1f1f1; background: #0f0f0f;}.skruv-css-scope-1654833168 body {max-width: 40ch; margin: 0 auto;}.skruv-css-scope-1654833168 form {display: flex; align-items: end;}.skruv-css-scope-1654833168 label {flex: 1;}.skruv-css-scope-1654833168 input {width: 100%;}.skruv-css-scope-1654833168 a {color: #9b9b9b;}</style><link rel="icon" href="/icon.svg" type="image/svg+xml" sizes="any"/><meta name="description" content="Skruv todo-list"/></head><body><main><h1>Write todos</h1><form><label>What do you need to do?<input type="text" name="todo"/></label><button>New!</button></form><ol><li>Write todos <a href="#">x</a></li></ol></main><script type="module">var W=Symbol.for("skruvDom"),b="data-skruv-key",_=new WeakMap,F=new WeakMap,L=new WeakMap,P={},T=(e,t=globalThis.document.documentElement,f=t.parentNode,m=!1,n=!1)=>{var h,d,p,g,u,O;if(!f)throw new Error("No parent to render to");if(typeof e=="boolean"){t&&f.removeChild(t);return}let o=typeof e=="string"||typeof e=="number";if(n||!t||o&&(t==null?void 0:t.nodeName)!=="#text"||!o&&(t==null?void 0:t.nodeName.toLowerCase())!==e.t.toLowerCase()){let s=t;if(o?t=document.createTextNode(""+e):m||e.t==="svg"?(m=!0,t=(P[e.t]||(P[e.t]=document.createElementNS("http://www.w3.org/2000/svg",e.t))).cloneNode(!1)):t=(P[e.t]||(P[e.t]=document.createElement(e.t))).cloneNode(!1),s?f.replaceChild(t,s):f.appendChild(t),o)return}if(o){t.textContent!=e&&(t.textContent=""+e);return}e.r&&(e.r=()=>!t||!f.contains(t)?!1:(T(e,t,f,m),!0));let l=e.c.flat(1/0),r={};if(((h=l[0])==null?void 0:h.constructor)===Object&&((d=l[0])==null?void 0:d.s)!==W){r=l[0],l=l.slice(1);for(let s in r)if(s!==b)if(s[0]==="o"&&s[1]==="n"){let i=L.get(t);i||(i={},L.set(t,i));let c=s.slice(2);if(!i[s]||""+i[s]!=""+r[s]){if(c==="create"){setTimeout(()=>r[s](t),0),i[s]=r[s];continue}i[s]&&t.removeEventListener(c,i[s]),t.addEventListener(c,r[s]),i[s]=r[s]}else r[s]||t.removeEventListener(c,i[s])}else r[s]!==t.getAttribute(s)&&((s==="checked"||s==="selected"||s==="value"||typeof r[s]=="object")&&(t[s]=r[s]),r[s]?t.setAttribute(s,""+r[s]):t.removeAttribute(s))}if(!l.length&&t.childNodes.length){if(r["data-skruv-wait-for-not-empty"])return;t.replaceChildren();return}if(t.childNodes.length>l.length)for(let s=t.childNodes.length-1;s>=l.length;s--)t.removeChild(t.childNodes[s]);for(let s=0;s<l.length;s++){let i=!1,c;if(l[s].constructor===Object)if(c=_.get((p=l[s].c[0])==null?void 0:p[b]),c){if(c!==t.childNodes[s]&&(c===t.childNodes[s+1]?t.removeChild(t.childNodes[s]):t.childNodes[s]&&_.get((O=(u=(g=l[s+1])==null?void 0:g.c)==null?void 0:u[0])==null?void 0:O[b])===t.childNodes[s]?t.insertBefore(c,t.childNodes[s]):t.childNodes[s]?t.replaceChild(c,t.childNodes[s]):t.appendChild(c)),i=l[s].c[0][b]!==F.get(t.childNodes[s]),!i){let a=_.get(t.childNodes[s]);if(a){let y=!0;for(let k in l[s].c[0][b])l[s].c[0][b][k]!==a[k]&&(y=!1);if(y)continue}}}else i=_.has(t.childNodes[s]);T(l[s],t.childNodes[s]||!1,t,m&&e.t!=="foreignObject",i)}r[b]&&(_.set(r[b],t),F.set(t,r[b]),_.set(t,{...r[b]}))},z=new Proxy({},{get:(e,t)=>(...f)=>({s:W,t,c:f})});var E=()=>{},I=new Promise(e=>{E=e}),A=new Map,v=e=>{let t=0;if(e.length===0)return t.toString();for(let f=0;f<e.length;f++)t=(t<<5)-t+e.charCodeAt(f),t|=0;return t.toString()},V=(e,...t)=>{var s;let f=e.reduce((i,c,a)=>{var y;return i.push(c),i.push(((y=t==null?void 0:t[a])==null?void 0:y.toString())||""),i},[]).join(""),m=/^\[.*?(?:(["'])(?:.|\\\1)*\1.*)*\]/,n=/([([,]|:scope\b)/,o=/^:scope\b/;function l(i,c){let a=i.search(n);if(a===-1)return{selector:`${c} ${i}`,rest:""};if(i[a]===",")return{selector:`${c} ${i.substring(0,a)}`,rest:i.substring(a+1)};let y=!0,k=!1;a=i.search(/\S/);let C=0;e:for(;a<i.length;++a){let D=i[a];switch(D){case"[":{let G=m.exec(i.substring(a));a+=(G?G[0].length:1)-1;continue}case"(":++C;continue;case":":if(y)if(o.test(i.substring(a))){if(C)return null}else continue;else continue;i=i.substring(0,a)+c+i.substring(a+6),a+=c.length,k=!0,--a;continue;case")":C&&--C;continue}if(!C)switch(D){case",":break e;case" ":case">":case"~":case"+":if(!y)continue;y=!1}}return{selector:(k?"":`${c} `)+i.substring(0,a),rest:i.substring(a+1)}}function r(i,c){let a=[];for(;i;){let y=l(i,c);if(y===null)return":not(*)";a.push(y.selector),i=y.rest}return a.join(", ")}function h(i,c){if(i instanceof CSSMediaRule){let a=i.cssRules.length;for(let y=0;y<a;++y)h(i.cssRules[y],c);return}i instanceof CSSStyleRule&&(i.selectorText=r(i.selectorText,c))}let d=v(f),p=`skruv-css-scope-${d}`,g=`.${p}`;if(A.has(d))return p;let u;if(!(globalThis!=null&&globalThis.CSSOM)&&!((s=globalThis.document)!=null&&s.implementation))throw new Error("No css parser available. Either add CSSOM to globalThis or run in browser.");if(globalThis!=null&&globalThis.CSSOM)u=CSSOM.parse(f);else{let i=globalThis.document.implementation.createHTMLDocument(""),c=i.createElement("style");c.innerText=f,i.body.append(c),u=c.sheet,i.body.removeChild(c)}Array.from((u==null?void 0:u.cssRules)||[]).forEach(i=>h(i,g));let O=Array.from((u==null?void 0:u.cssRules)||[]).map(i=>i.cssText||"").join("");return A.set(d,O),E(),p};async function*H(){for(yield Array.from(A.values()).join("");;)await I,yield Array.from(A.values()).join(""),I=new Promise(e=>{E=e})}var J=e=>{let t=class ${constructor(){this._scheduled=!1,this._skruv_promise=new Promise(n=>{this._skruv_resolve=n})}_resolve(){this._skruv_parent&&this._skruv_parent._resolve&&this._skruv_parent._resolve(),!this._scheduled&&(this._scheduled=!0,setTimeout(()=>{this._skruv_resolve(""),this._skruv_promise=new Promise(n=>{this._skruv_resolve=n}),this._scheduled=!1},0))}set(n,o,l){return o==="_skruv_parent"?(this._skruv_parent=l,!0):(n[o]!==l&&(n[o]=this.recurse(o,l,n)),!0)}get(n,o,l){return o==="getGenerator"?r=>({key:[r,n],[Symbol.asyncIterator]:()=>{let h=!1;return{next:async()=>(h?await this._skruv_promise:h=!0,{done:!1,value:l[r]})}}}):o==="toJSON"?n.constructor===Object?Object.getOwnPropertyNames(n).reduce((r,h)=>{var d;return r[h]=((d=n[h])==null?void 0:d.toJSON)||n[h],r},{}):n.constructor===Array?n.map(r=>(r==null?void 0:r.toJSON)||r):n:o===Symbol.asyncIterator?()=>{let r=!1;return{next:async()=>(r?await this._skruv_promise:r=!0,{done:!1,value:l})}}:n[o]}deleteProperty(n,o){let l=delete n[o];return this._resolve(),l}recurse(n,o,l){var r;if(o&&o.constructor)if(o.constructor===Object&&((r=l==null?void 0:l[n])==null?void 0:r.constructor)===Object){for(let h of Object.getOwnPropertyNames(o))l[n][h]!==o[h]&&(l[n][h]=o[h]);for(let h of Object.getOwnPropertyNames(l[n]).filter(d=>!Object.getOwnPropertyNames(o).includes(d)))delete l[n][h],this._resolve();return l[n]}else if(o.constructor===Object){let h=new $;o=Object.keys(o).reduce((d,p)=>(d[p]=this.recurse(`${n}.${p}`,o[p]),typeof d[p]=="object"&&d[p]!==null&&(d[p]._skruv_parent=h),d),{}),o=new Proxy(o,h),o._skruv_parent=this,this._resolve()}else if(o.constructor===Array){let h=new $;o=o.map((d,p)=>{let g=this.recurse(`${n}[${p}]`,d);return typeof g=="object"&&g!==null&&(g._skruv_parent=h),g}),o=new Proxy(o,h),o._skruv_parent=this,this._resolve()}else this._resolve();else this._resolve();return o}},f=new Proxy(e.constructor===Array?[]:{},new t("root"));return Object.assign(f,e),f};var K=Symbol.for("skruvDom"),w=!0,S=new WeakMap,R=()=>{},U=new Promise(e=>{R=()=>{w=!1,setTimeout(()=>e(""),0)}}),x=new Set,B=(e,t,f,m,n)=>{var o,l;return w&&!(typeof n=="object"&&"c"in n&&((l=(o=n==null?void 0:n.c)==null?void 0:o[0])==null?void 0:l["data-skruv-finished"])===!1)&&(x.delete(e),x.size||R()),S.set(e,n),f[t]=n,m.r?m.r():!0},j=(e,t=null,f=null,m=null,n=!0)=>{if(typeof e=="string"||typeof e=="number"||typeof e=="boolean"||e===null)return e;if(S.has(e))return S.get(e);if(t&&f&&m){if(typeof e=="object"&&Symbol.asyncIterator in e||typeof e=="function"&&e.constructor.name==="AsyncGeneratorFunction")return w&&x.add(e),S.set(e,null),(async()=>{for await(let o of typeof e=="function"?e():e)if(!B(e,t,f,m,j(o,t,f,m,!1)))break})(),null;if(typeof e=="object"&&"then"in e&&typeof e.then=="function"||typeof e=="function"&&e.constructor.name==="AsyncFunction")return w&&x.add(e),S.set(e,null),(async()=>B(e,t,f,m,j(await(typeof e=="function"?e():e),t,f,m,!1)))(),null;if(typeof e=="function"){if(t[0]==="o"&&t[1]==="n"||t==="r"&&(f==null?void 0:f.s)===K)return e;let o=j(e(),t,f,m,!1);return S.set(e,o),o}}if(typeof e=="object"){let o={},l=o;e.s===K?o.r=()=>((w&&!x.size||!w)&&R(),!0):m!=null&&m.r&&(l=m),Array.isArray(e)&&(o=[]);for(let r in e){let h=j(e[r],r,o,l,!1);(h!==null||e[r]===null)&&(o[r]=h)}return(n&&w&&!x.size||!w)&&R(),o}return e};var{html:Q,head:X,title:Y,meta:q,link:Z,body:N,main:ee,h1:te,form:se,label:oe,input:ie,button:ne,ol:le,li:re,a:fe,style:ce,script:he}=z,M=J({todos:["Write todos"]}),ae=V`:scope{color:#f1f1f1;background:#0f0f0f}body{max-width:40ch;margin:0 auto}form{display:flex;align-items:end}label{flex:1}input{width:100%}a{color:#9b9b9b}`,me=j(Q({lang:"en-US",class:ae},X(Y(M.todos.getGenerator(0)),q({name:"viewport",content:"width=device-width, initial-scale=1"}),ce(H),Z({rel:"icon",href:"/icon.svg",type:"image/svg+xml",sizes:"any"}),q({name:"description",content:"Skruv todo-list"})),N(ee(te(M.todos.getGenerator(0)),se({onsubmit:e=>{e.preventDefault(),M.todos.unshift(new FormData(e.target).get("todo"))&&e.target.reset()}},oe("What do you need to do?",ie({type:"text",name:"todo"})),ne("New!")),async function*(){for await(let e of M)yield le(e.todos.map((t,f)=>re(`${t} `,fe({href:"#",onclick:m=>{m.preventDefault(),e.todos.splice(f,1)}},"x"))))}),!!globalThis.skruvSSRScript&&he({type:"module"},globalThis.skruvSSRScript)))),de=async()=>{await U,T(me),await new Promise(e=>setTimeout(e,0))};de();export{de as doRender};
//# sourceMappingURL=index.min.js.map
</script></body></html>