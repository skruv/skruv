var G=Symbol.for("skruvDom"),S="data-event-";var J=(e,...i)=>{var f,h,o;return{s:G,t:e.toUpperCase(),...!((f=i[0])!=null&&f[Symbol.asyncIterator])&&((h=i[0])==null?void 0:h.constructor)===Object&&((o=i[0])==null?void 0:o.s)!==G?{a:i[0],c:i.slice(1)}:{a:{},c:i}}},w=new WeakMap,x={},k=(e,i=globalThis.document.documentElement,f=i.parentNode,h=!1,o=(f==null?void 0:f.ownerDocument)||(i==null?void 0:i.ownerDocument))=>{var c,m,y,u,b;let t=i,n=[];if(!f||!o||t&&!f.contains(t))return!1;if(typeof e=="boolean"||e===null||e===void 0)return t&&f.removeChild(t),!0;if(!t||(typeof e=="string"||typeof e=="number")&&(t==null?void 0:t.nodeName)!=="#text"||(e==null?void 0:e.t)&&(t==null?void 0:t.nodeName)!==(e==null?void 0:e.t)||(t==null?void 0:t._skruvKey)!==((c=e==null?void 0:e.a)==null?void 0:c._key)?(typeof e=="string"||typeof e=="number"?t=(x.text||(x.text=o.createTextNode(""))).cloneNode():h||e.t==="svg"?t=(x[e.t]||(x[e.t]=o.createElementNS("http://www.w3.org/2000/svg",e.t))).cloneNode():t=(x[e.t]||(x[e.t]=o.createElement(e.t))).cloneNode(),i?f.replaceChild(t,i):f.appendChild(t),(m=e==null?void 0:e.a)!=null&&m._key&&(t._skruvKey=(y=e==null?void 0:e.a)==null?void 0:y._key),(u=e==null?void 0:e.a)!=null&&u.oncreate&&((b=e==null?void 0:e.a)==null||b.oncreate(t))):n=t.childNodes,typeof e=="string"||typeof e=="number")return""+t.data!=""+e&&(t.data=e),!0;e._r&&(e._r._r=()=>k(e,t,f,h));for(let s in e.a)s[0]!=="_"&&(s[0]==="o"&&s[1]==="n"?!t[S+s]||""+t[S+s]!=""+e.a[s]?(t[S+s]&&t.removeEventListener(s.slice(2),t[S+s]),t.addEventListener(s.slice(2),e.a[s]),t[S+s]=e.a[s]):e.a[s]||t.removeEventListener(s.slice(2),t[S+s]):e.a[s]!==t.getAttribute(s)&&((typeof e.a[s]=="boolean"&&(e.t==="INPUT"&&s==="checked"||e.t==="OPTION"&&s==="selected")||typeof e.a[s]=="object")&&(t[s]=e.a[s]),e.a[s]?t.setAttribute(s,""+e.a[s]):t.removeAttribute(s)));let l=e.c.flat(1/0);if(!l.length&&n.length)return e.a["data-skruv-wait-for-not-empty"]||t.replaceChildren(),!0;if(n.length>l.length)for(let s=l.length;s<n.length;s++)t.removeChild(n[s]);for(let s=0;s<l.length;s++){if(w.has(l[s])){let g=w.get(l[s]);g&&g!==n[s]&&(g===n[s+1]?t.removeChild(n[s]):w.has(l[s+1])&&w.get(l[s+1])===n[s]?t.insertBefore(g,n[s]):n[s]?t.replaceChild(g,n[s]):t.appendChild(g),w.set(l[s],n[s]));continue}k(l[s],n[s]||!1,t,h)}return w.set(e,t),!0},I=new Proxy({},{get:(e,i)=>(...f)=>J(i,...f)});var R=()=>{},F=new Promise(e=>{R=e}),C=new Map,U=e=>{let i=0;if(e.length===0)return i.toString();for(let f=0;f<e.length;f++)i=(i<<5)-i+e.charCodeAt(f),i|=0;return i.toString()},V=(e,...i)=>{var g;let f=e.reduce((r,d,a)=>{var p;return r.push(d),r.push(((p=i==null?void 0:i[a])==null?void 0:p.toString())||""),r},[]).join(""),h=/^\[.*?(?:(["'])(?:.|\\\1)*\1.*)*\]/,o=/([([,]|:scope\b)/,t=/^:scope\b/;function n(r,d){let a=r.search(o);if(a===-1)return{selector:`${d} ${r}`,rest:""};if(r[a]===",")return{selector:`${d} ${r.substring(0,a)}`,rest:r.substring(a+1)};let p=!0,E=!1;a=r.search(/\S/);let T=0;e:for(;a<r.length;++a){let M=r[a];switch(M){case"[":{let D=h.exec(r.substring(a));a+=(D?D[0].length:1)-1;continue}case"(":++T;continue;case":":if(p)if(t.test(r.substring(a))){if(T)return null}else continue;else continue;r=r.substring(0,a)+d+r.substring(a+6),a+=d.length,E=!0,--a;continue;case")":T&&--T;continue}if(!T)switch(M){case",":break e;case" ":case">":case"~":case"+":if(!p)continue;p=!1}}return{selector:(E?"":`${d} `)+r.substring(0,a),rest:r.substring(a+1)}}function l(r,d){let a=[];for(;r;){let p=n(r,d);if(p===null)return":not(*)";a.push(p.selector),r=p.rest}return a.join(", ")}function c(r,d){if(r instanceof CSSMediaRule){let a=r.cssRules.length;for(let p=0;p<a;++p)c(r.cssRules[p],d);return}r instanceof CSSStyleRule&&(r.selectorText=l(r.selectorText,d))}let m=U(f),y=`skruv-css-scope-${m}`,u=`.${y}`;if(C.has(m))return y;let b;if(!(globalThis!=null&&globalThis.CSSOM)&&!((g=globalThis.document)!=null&&g.implementation))throw new Error("No css parser available. Either add CSSOM to globalThis or run in browser.");if(globalThis!=null&&globalThis.CSSOM)b=CSSOM.parse(f);else{let r=globalThis.document.implementation.createHTMLDocument(""),d=r.createElement("style");d.innerText=f,r.body.append(d),b=d.sheet,r.body.removeChild(d)}Array.from((b==null?void 0:b.cssRules)||[]).forEach(r=>c(r,u));let s=Array.from((b==null?void 0:b.cssRules)||[]).map(r=>r.cssText||"").join("");return C.set(m,s),R(),y};async function*L(){for(yield Array.from(C.values()).join("");;)await F,yield Array.from(C.values()).join(""),F=new Promise(e=>{R=e})}var W=(globalThis==null?void 0:globalThis.requestAnimationFrame)||(e=>setTimeout(e,0)),z=e=>{let i=class{constructor(o){this.name=o,this._scheduled=!1,this._skruv_promise=new Promise(t=>{this._skruv_resolve=t})}_resolve(){this._skruv_parent&&this._skruv_parent._resolve&&this._skruv_parent._resolve(),!this._scheduled&&(this._scheduled=!0,W(()=>{this._skruv_resolve(),this._skruv_promise=new Promise(o=>{this._skruv_resolve=o}),this._scheduled=!1}))}set(o,t,n){return t==="_skruv_parent"?(this._skruv_parent=n,!0):(o[t]!==n&&(o[t]=this.recurse(t,n,o)),!0)}get(o,t,n){return t==="getGenerator"?l=>({key:[l,o],[Symbol.asyncIterator]:()=>{let c=!1;return{next:async()=>(c?await this._skruv_promise:c=!0,{done:!1,value:n[l]})}}}):t==="skruv_resolve"?()=>this._resolve():t==="toJSON"?o.constructor===Object?Object.getOwnPropertyNames(o).reduce((l,c)=>{var m;return l[c]=((m=o[c])==null?void 0:m.toJSON)||o[c],l},{}):o.constructor===Array?o.map(l=>(l==null?void 0:l.toJSON)||l):o:t===Symbol.asyncIterator?()=>{let l=!1;return{next:async()=>(l?await this._skruv_promise:l=!0,{done:!1,value:n})}}:o[t]}deleteProperty(o,t){let n=delete o[t];return this._resolve(),n}recurse(o,t,n){var l;if(t&&t.constructor)if(t.constructor===Object&&((l=n==null?void 0:n[o])==null?void 0:l.constructor)===Object){for(let c of Object.getOwnPropertyNames(t))n[o][c]!==t[c]&&(n[o][c]=t[c]);for(let c of Object.getOwnPropertyNames(n[o]).filter(m=>!Object.getOwnPropertyNames(t).includes(m)))delete n[o][c],this._resolve();return n[o]}else if(t.constructor===Object){let c=new this.constructor(`${this.name}.${o}`);t=Object.keys(t).reduce((m,y)=>(m[y]=this.recurse(`${o}.${y}`,t[y]),typeof m[y]=="object"&&m[y]!==null&&(m[y]._skruv_parent=c),m),{}),t=new Proxy(t,c),t._skruv_parent=this,this._resolve()}else if(t.constructor===Array){let c=new this.constructor(`${this.name}.${o}`);t=t.map((m,y)=>{let u=this.recurse(`${o}[${y}]`,m);return typeof u=="object"&&u!==null&&(u._skruv_parent=c),u}),t=new Proxy(t,c),t._skruv_parent=this,this._resolve()}else this._resolve();else this._resolve();return t}},f=new Proxy(e.constructor===Array?[]:{},new i("root"));return Object.assign(f,e),f};var _=!0,j=new WeakMap,A=()=>{},me=new Promise(e=>{A=()=>e(!0)}),O=new Set,H=(e,i,f,h,o)=>{var t;return _&&!(typeof o=="object"&&"a"in o&&((t=o==null?void 0:o.a)==null?void 0:t["data-skruv-finished"])===!1)&&(O.delete(e),O.size||(_=!1,A())),j.set(e,o),f[i]=o,h._r._r()},P=(e,i,f,h,o=!0)=>{if(typeof e=="string"||typeof e=="number"||typeof e=="boolean"||e===null)return e;if(j.has(e))return j.get(e);if(typeof e=="object"&&Symbol.asyncIterator in e||typeof e=="function"&&e.constructor.name==="AsyncGeneratorFunction")return _&&O.add(e),j.set(e,null),(async()=>{for await(let t of typeof e=="function"?e():e)if(!H(e,i,f,h,P(t,i,f,h,!1)))break})(),null;if(typeof e=="object"&&"then"in e&&typeof e.then=="function"||typeof e=="function"&&e.constructor.name==="AsyncFunction")return _&&O.add(e),j.set(e,null),(async()=>H(e,i,f,h,P(await(typeof e=="function"?e():e),i,f,h,!1)))(),null;if(typeof e=="function"){if(typeof i=="string"&&(i[0]==="o"&&i[1]==="n"||i[0]==="_"))return e;let t=P(e(),i,f,h,!1);return j.set(e,t),t}if(typeof e=="object"){let t={_r:{_r:()=>((_&&!O.size||!_)&&(_=!1,A()),!0)}},n=t;Array.isArray(e)&&(t=[],n=h),i==="a"&&(t={},n=h);for(let l in e){let c=P(e[l],l,t,n,!1);(c!==null||e[l]===null)&&(t[l]=c)}return(o&&_&&!O.size||!_)&&(_=!1,A()),t}return e};var{html:v,head:K,title:q,meta:B,body:N,main:Q,h1:X,form:Y,input:Z,button:ee,ol:te,li:se,a:oe,style:ie,script:ne}=I,$=z({todos:["Write todos"]}),re=V`:scope{color:#f1f1f1;background:#0f0f0f}body{max-width:40ch;margin:0 auto}form{display:flex}input{flex:1}a{color:#9b9b9b}`;k(P(v({lang:"en-US",class:re},K(q($.todos.getGenerator(0)),B({name:"viewport",content:"width=device-width, initial-scale=1"}),ie(L)),N(Q(X($.todos.getGenerator(0)),Y({onsubmit:e=>{e.preventDefault(),$.todos.unshift(new FormData(e.target).get("todo")),e.target.reset()}},Z({type:"text",name:"todo"}),ee("New!")),async function*(){for await(let e of $)yield te(e.todos.map((i,f)=>se(`${i} `,oe({href:"#",onclick:h=>{h.preventDefault(),e.todos.splice(f,1)}},"x"))))}),!!globalThis.skruvSSRScript&&ne({type:"module"},globalThis.skruvSSRScript)))));
//# sourceMappingURL=index.min.js.map
