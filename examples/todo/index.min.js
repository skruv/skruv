var G=Symbol.for("skruvDom"),b="data-skruv-key",x=new WeakMap,I=new WeakMap,V=new WeakMap,P={},$=(e,t=globalThis.document.documentElement,a=t.parentNode,c=!1,i=!1)=>{var h,d,p,g,y,k,T,n;if(typeof e=="boolean"){t&&a.removeChild(t);return}let o=typeof e=="string"||typeof e=="number";if(i||!t||o&&(t==null?void 0:t.nodeName)!=="#text"||!o&&(t==null?void 0:t.nodeName.toLowerCase())!==e.t.toLowerCase()){let s=t;if(o?t=document.createTextNode(e):c||e.t==="svg"?(c=!0,t=(P[e.t]||(P[e.t]=document.createElementNS("http://www.w3.org/2000/svg",e.t))).cloneNode(!1)):t=(P[e.t]||(P[e.t]=document.createElement(e.t))).cloneNode(!1),s?a.replaceChild(t,s):a.appendChild(t),o)return;(h=e.c[0])!=null&&h.oncreate&&((d=e==null?void 0:e.c[0])==null||d.oncreate(t))}if(o){t.data!=e&&(t.data=e);return}e._r&&(e._r._r=()=>!t||!a.contains(t)?!1:($(e,t,a,c),!0));let r=e.c.flat(1/0),l={};if(((p=r[0])==null?void 0:p.constructor)===Object&&((g=r[0])==null?void 0:g.s)!==G){l=r[0],r=r.slice(1);for(let s in l)if(!(s===b||s[0]==="_"))if(s[0]==="o"&&s[1]==="n"){let f=V.get(t);f||(f={},V.set(t,f));let m=s.slice(2);!f[s]||""+f[s]!=""+l[s]?(f[s]&&t.removeEventListener(m,f[s]),t.addEventListener(m,l[s]),f[s]=l[s]):l[s]||t.removeEventListener(m,f[s])}else l[s]!==t.getAttribute(s)&&((s==="checked"||s==="selected"||s==="value"||typeof l[s]=="object")&&(t[s]=l[s]),l[s]?t.setAttribute(s,""+l[s]):t.removeAttribute(s))}if(!r.length&&t.childNodes.length){if(l["data-skruv-wait-for-not-empty"])return;t.replaceChildren();return}if(t.childNodes.length>r.length)for(let s=r.length;s<t.childNodes.length;s++)t.removeChild(t.childNodes[s]);for(let s=0;s<r.length;s++){let f=!1,m;if(r[s].constructor===Object)if(m=x.get((y=r[s].c[0])==null?void 0:y[b]),m){if(m!==t.childNodes[s]&&(m===t.childNodes[s+1]?t.removeChild(t.childNodes[s]):x.get((n=(T=(k=r[s+1])==null?void 0:k.c)==null?void 0:T[0])==null?void 0:n[b])===t.childNodes[s]?t.insertBefore(m,t.childNodes[s]):t.childNodes[s]?t.replaceChild(m,t.childNodes[s]):t.appendChild(m)),f=r[s].c[0][b]!==I.get(t.childNodes[s]),!f){let A=x.get(t.childNodes[s]),w=!0;for(let F in r[s].c[0][b])r[s].c[0][b][F]!==A[F]&&(w=!1);if(w)continue}}else f=x.has(t.childNodes[s]);$(r[s],t.childNodes[s]||!1,t,c,f)}l[b]&&(x.set(l[b],t),I.set(t,l[b]),x.set(t,{...l[b]}))},v=new Proxy({},{get:(e,t)=>(...a)=>({s:G,t,c:a})}),L=(e,...t)=>({s:G,t:e,c:t});var D=()=>{},H=new Promise(e=>{D=e}),M=new Map,Q=e=>{let t=0;if(e.length===0)return t.toString();for(let a=0;a<e.length;a++)t=(t<<5)-t+e.charCodeAt(a),t|=0;return t.toString()},J=(e,...t)=>{var T;let a=e.reduce((n,s,f)=>{var m;return n.push(s),n.push(((m=t==null?void 0:t[f])==null?void 0:m.toString())||""),n},[]).join(""),c=/^\[.*?(?:(["'])(?:.|\\\1)*\1.*)*\]/,i=/([([,]|:scope\b)/,o=/^:scope\b/;function r(n,s){let f=n.search(i);if(f===-1)return{selector:`${s} ${n}`,rest:""};if(n[f]===",")return{selector:`${s} ${n.substring(0,f)}`,rest:n.substring(f+1)};let m=!0,A=!1;f=n.search(/\S/);let w=0;e:for(;f<n.length;++f){let z=n[f];switch(z){case"[":{let W=c.exec(n.substring(f));f+=(W?W[0].length:1)-1;continue}case"(":++w;continue;case":":if(m)if(o.test(n.substring(f))){if(w)return null}else continue;else continue;n=n.substring(0,f)+s+n.substring(f+6),f+=s.length,A=!0,--f;continue;case")":w&&--w;continue}if(!w)switch(z){case",":break e;case" ":case">":case"~":case"+":if(!m)continue;m=!1}}return{selector:(A?"":`${s} `)+n.substring(0,f),rest:n.substring(f+1)}}function l(n,s){let f=[];for(;n;){let m=r(n,s);if(m===null)return":not(*)";f.push(m.selector),n=m.rest}return f.join(", ")}function h(n,s){if(n instanceof CSSMediaRule){let f=n.cssRules.length;for(let m=0;m<f;++m)h(n.cssRules[m],s);return}n instanceof CSSStyleRule&&(n.selectorText=l(n.selectorText,s))}let d=Q(a),p=`skruv-css-scope-${d}`,g=`.${p}`;if(M.has(d))return p;let y;if(!(globalThis!=null&&globalThis.CSSOM)&&!((T=globalThis.document)!=null&&T.implementation))throw new Error("No css parser available. Either add CSSOM to globalThis or run in browser.");if(globalThis!=null&&globalThis.CSSOM)y=CSSOM.parse(a);else{let n=globalThis.document.implementation.createHTMLDocument(""),s=n.createElement("style");s.innerText=a,n.body.append(s),y=s.sheet,n.body.removeChild(s)}Array.from((y==null?void 0:y.cssRules)||[]).forEach(n=>h(n,g));let k=Array.from((y==null?void 0:y.cssRules)||[]).map(n=>n.cssText||"").join("");return M.set(d,k),D(),p};async function*K(){for(yield Array.from(M.values()).join("");;)await H,yield Array.from(M.values()).join(""),H=new Promise(e=>{D=e})}var X=(globalThis==null?void 0:globalThis.requestAnimationFrame)||(e=>setTimeout(e,0)),Z=e=>{let t=class{constructor(i){this.name=i,this._scheduled=!1,this._skruv_promise=new Promise(o=>{this._skruv_resolve=o})}_resolve(){this._skruv_parent&&this._skruv_parent._resolve&&this._skruv_parent._resolve(),!this._scheduled&&(this._scheduled=!0,X(()=>{this._skruv_resolve(),this._skruv_promise=new Promise(i=>{this._skruv_resolve=i}),this._scheduled=!1}))}set(i,o,r){return o==="_skruv_parent"?(this._skruv_parent=r,!0):(i[o]!==r&&(i[o]=this.recurse(o,r,i)),!0)}get(i,o,r){return o==="getGenerator"?l=>({key:[l,i],[Symbol.asyncIterator]:()=>{let h=!1;return{next:async()=>(h?await this._skruv_promise:h=!0,{done:!1,value:r[l]})}}}):o==="skruv_resolve"?()=>this._resolve():o==="toJSON"?i.constructor===Object?Object.getOwnPropertyNames(i).reduce((l,h)=>{var d;return l[h]=((d=i[h])==null?void 0:d.toJSON)||i[h],l},{}):i.constructor===Array?i.map(l=>(l==null?void 0:l.toJSON)||l):i:o===Symbol.asyncIterator?()=>{let l=!1;return{next:async()=>(l?await this._skruv_promise:l=!0,{done:!1,value:r})}}:i[o]}deleteProperty(i,o){let r=delete i[o];return this._resolve(),r}recurse(i,o,r){var l;if(o&&o.constructor)if(o.constructor===Object&&((l=r==null?void 0:r[i])==null?void 0:l.constructor)===Object){for(let h of Object.getOwnPropertyNames(o))r[i][h]!==o[h]&&(r[i][h]=o[h]);for(let h of Object.getOwnPropertyNames(r[i]).filter(d=>!Object.getOwnPropertyNames(o).includes(d)))delete r[i][h],this._resolve();return r[i]}else if(o.constructor===Object){let h=new this.constructor(`${this.name}.${i}`);o=Object.keys(o).reduce((d,p)=>(d[p]=this.recurse(`${i}.${p}`,o[p]),typeof d[p]=="object"&&d[p]!==null&&(d[p]._skruv_parent=h),d),{}),o=new Proxy(o,h),o._skruv_parent=this,this._resolve()}else if(o.constructor===Array){let h=new this.constructor(`${this.name}.${i}`);o=o.map((d,p)=>{let g=this.recurse(`${i}[${p}]`,d);return typeof g=="object"&&g!==null&&(g._skruv_parent=h),g}),o=new Proxy(o,h),o._skruv_parent=this,this._resolve()}else this._resolve();else this._resolve();return o}},a=new Proxy(e.constructor===Array?[]:{},new t("root"));return Object.assign(a,e),a};var _=!0,j=new WeakMap,E=()=>{},oe=new Promise(e=>{E=()=>e(!0)}),O=new Set,q=(e,t,a,c,i)=>{var o;return _&&!(typeof i=="object"&&"a"in i&&((o=i==null?void 0:i.a)==null?void 0:o["data-skruv-finished"])===!1)&&(O.delete(e),O.size||(_=!1,setTimeout(()=>E(),0))),j.set(e,i),a[t]=i,c._r._r()},C=(e,t,a,c,i=!0)=>{if(typeof e=="string"||typeof e=="number"||typeof e=="boolean"||e===null)return e;if(j.has(e))return j.get(e);if(typeof e=="object"&&Symbol.asyncIterator in e||typeof e=="function"&&e.constructor.name==="AsyncGeneratorFunction")return _&&O.add(e),j.set(e,null),(async()=>{for await(let o of typeof e=="function"?e():e)if(!q(e,t,a,c,C(o,t,a,c,!1)))break})(),null;if(typeof e=="object"&&"then"in e&&typeof e.then=="function"||typeof e=="function"&&e.constructor.name==="AsyncFunction")return _&&O.add(e),j.set(e,null),(async()=>q(e,t,a,c,C(await(typeof e=="function"?e():e),t,a,c,!1)))(),null;if(typeof e=="function"){if(typeof t=="string"&&(t[0]==="o"&&t[1]==="n"||t[0]==="_"))return e;let o=C(e(),t,a,c,!1);return j.set(e,o),o}if(typeof e=="object"){let o={_r:{_r:()=>((_&&!O.size||!_)&&(_=!1,setTimeout(()=>E(),0)),!0)}},r=o;Array.isArray(e)&&(o=[],r=c),t==="a"&&(o={},r=c);for(let l in e){let h=C(e[l],l,o,r,!1);(h!==null||e[l]===null)&&(o[l]=h)}return(i&&_&&!O.size||!_)&&(_=!1,setTimeout(()=>E(),0)),o}return e};var B=e=>e.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(t,a)=>(a?"-":"")+t.toLowerCase()),U="#fragment",u=(e,t={})=>S(e,t),S=(e,t={})=>{if(e===U&&t.children)return t.children;if(e===U)return[];let{children:a,...c}=t;return Object.keys(c).filter(i=>i!==B(i)).forEach(i=>{c[B(i)]=c[i],delete c[i]}),c["class-name"]&&(c.class=c["class-name"],delete c["class-name"]),c["html-for"]&&(c.for=c["html-for"],delete c["html-for"]),a?L(e,c||{},a):L(e,c||{})};var R=Z({todos:["Write todos"]}),Y=J`:scope{color:#f1f1f1;background:#0f0f0f}body{max-width:40ch;margin:0 auto}form{display:flex}input{flex:1}a{color:#9b9b9b}`;$(C(S("html",{lang:"en-US",class:Y,children:[S("head",{children:[u("title",{children:R.todos.getGenerator(0)}),u("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),u("style",{children:K})]}),u("body",{children:S("main",{children:[u("h1",{children:R.todos.getGenerator(0)}),S("form",{onsubmit:e=>{e.preventDefault(),R.todos.unshift(new FormData(e.target).get("todo")),e.target.reset()},children:[u("input",{name:"todo"}),u("button",{children:"New!"})]}),u("ol",{children:async function*(){for await(let e of R.todos)yield e.map((t,a)=>S("li",{children:[t," ",u("a",{href:"#",onclick:c=>{c.preventDefault(),e.splice(a,1)},children:"x"})]}))}})]})})]})));
//# sourceMappingURL=index.min.js.map
