var F=Symbol.for("skruvDom");var C=(e,...n)=>{var i,c;return{s:F,t:e.toUpperCase(),...typeof n[0]=="object"&&!Array.isArray(n[0])&&!(n[0]instanceof Function)&&!((i=n[0])!=null&&i[Symbol.asyncIterator])&&((c=n[0])==null?void 0:c.s)!==F?{a:n[0],c:n.slice(1)}:{a:{},c:n}}},w=new WeakMap,S={},T=(e,n=globalThis.document.documentElement,i=n==null?void 0:n.parentNode,c=!1)=>{var f,d;if(typeof e=="boolean"||e===null)return!0;if(!i||!i.ownerDocument)throw new Error("no parentNode!");if(!globalThis.document.documentElement.contains(i))return!1;let t=n,s=[],a=t==null?void 0:t.nodeName;if(!t||a!==e.t&&(typeof e=="string"||typeof e=="number")&&a!=="#text"?(typeof e=="string"||typeof e=="number"?t=(S.text||(S.text=i.ownerDocument.createTextNode(""))).cloneNode():c||e.t==="svg"?t=(S[e.t]||(S[e.t]=i.ownerDocument.createElementNS("http://www.w3.org/2000/svg",e.t))).cloneNode():t=(S[e.t]||(S[e.t]=i.ownerDocument.createElement(e.t))).cloneNode(),n?i.replaceChild(t,n):i.appendChild(t)):s=Array.from(t.childNodes),t instanceof Text&&(typeof e=="string"||typeof e=="number"))return t.data.toString()!==e.toString()&&(t.data=e),!0;if(!(t instanceof Element)||typeof e!="object")return!0;e._r&&(e._r._r=()=>T(e,t,i,c));for(let o in e.a)o[0]!=="_"&&(o[0]==="o"&&o[1]==="n"?!t["data-event-"+o]||((f=t["data-event-"+o])==null?void 0:f.toString())!==((d=e.a[o])==null?void 0:d.toString())?(t["data-event-"+o]&&t.removeEventListener(o.slice(2),t["data-event-"+o]),t.addEventListener(o.slice(2),e.a[o]),t["data-event-"+o]=e.a[o]):e.a[o]||t.removeEventListener(o.slice(2),t["data-event-"+o]):e.a[o]!==t.getAttribute(o)&&((typeof e.a[o]=="boolean"&&(t instanceof HTMLInputElement&&o==="checked"||t instanceof HTMLOptionElement&&o==="selected")||typeof e.a[o]=="object")&&(t[o]=e.a[o]),e.a[o]?t.setAttribute(o,e.a[o].toString()):t.removeAttribute(o)));let l=e.c.flat(1/0);if(!l.length&&s.length)return t.replaceChildren(),!0;if(s.length>l.length)for(let o=l.length;o<s.length;o++)t.removeChild(s[o]);for(let o=0;o<l.length;o++){if(w.has(l[o])){let p=w.get(l[o]);p&&p!==t.childNodes[o]&&(p===t.childNodes[o+1]?t.removeChild(t.childNodes[o]):w.has(l[o+1])&&w.get(l[o+1])===t.childNodes[o]?t.insertBefore(p,t.childNodes[o]):t.childNodes[o]?t.replaceChild(p,t.childNodes[o]):t.appendChild(p),w.set(e,t));continue}T(l[o],s[o]||!1,t,c)}return w.set(e,t),!0},K=new Proxy({},{get:(e,n)=>(...i)=>C(n,...i)});var k=()=>{},G=new Promise(e=>{k=e}),P=new Map,U=e=>{let n=0;if(e.length===0)return n.toString();for(let i=0;i<e.length;i++)n=(n<<5)-n+e.charCodeAt(i),n|=0;return n.toString()},L=(e,...n)=>{var M;let i=e.reduce((r,m,h)=>{var u;return r.push(m),r.push(((u=n==null?void 0:n[h])==null?void 0:u.toString())||""),r},[]).join(""),c=/^\[.*?(?:(["'])(?:.|\\\1)*\1.*)*\]/,t=/([([,]|:scope\b)/,s=/^:scope\b/;function a(r,m){let h=r.search(t);if(h===-1)return{selector:`${m} ${r}`,rest:""};if(r[h]===",")return{selector:`${m} ${r.substring(0,h)}`,rest:r.substring(h+1)};let u=!0,R=!1;h=r.search(/\S/);let A=0;e:for(;h<r.length;++h){let D=r[h];switch(D){case"[":{let N=c.exec(r.substring(h));h+=(N?N[0].length:1)-1;continue}case"(":++A;continue;case":":if(u)if(s.test(r.substring(h))){if(A)return null}else continue;else continue;r=r.substring(0,h)+m+r.substring(h+6),h+=m.length,R=!0,--h;continue;case")":A&&--A;continue}if(!A)switch(D){case",":break e;case" ":case">":case"~":case"+":if(!u)continue;u=!1}}return{selector:(R?"":`${m} `)+r.substring(0,h),rest:r.substring(h+1)}}function l(r,m){let h=[];for(;r;){let u=a(r,m);if(u===null)return":not(*)";h.push(u.selector),r=u.rest}return h.join(", ")}function f(r,m){if(r instanceof CSSMediaRule){let h=r.cssRules.length;for(let u=0;u<h;++u)f(r.cssRules[u],m);return}r instanceof CSSStyleRule&&(r.selectorText=l(r.selectorText,m))}let d=U(i),o=`skruv-css-scope-${d}`,p=`.${o}`;if(P.has(d))return o;let g;if(!(globalThis!=null&&globalThis.CSSOM)&&!((M=globalThis.document)!=null&&M.implementation))throw new Error("No css parser available. Either add CSSOM to globalThis or run in browser.");if(globalThis!=null&&globalThis.CSSOM)g=CSSOM.parse(i);else{let r=globalThis.document.implementation.createHTMLDocument(""),m=r.createElement("style");m.innerText=i,r.body.append(m),g=m.sheet,r.body.removeChild(m)}Array.from((g==null?void 0:g.cssRules)||[]).forEach(r=>f(r,p));let W=Array.from((g==null?void 0:g.cssRules)||[]).map(r=>r.cssText||"").join("");return P.set(d,W),k(),o};async function*I(){for(yield Array.from(P.values()).join("");;)await G,yield Array.from(P.values()).join(""),G=new Promise(e=>{k=e})}var Z=(globalThis==null?void 0:globalThis.requestAnimationFrame)||(e=>setTimeout(e,0)),z=e=>{let n=class{constructor(t){this.name=t,this._scheduled=!1,this._skruv_promise=new Promise(s=>{this._skruv_resolve=s})}_resolve(){this._skruv_parent&&this._skruv_parent._resolve&&this._skruv_parent._resolve(),!this._scheduled&&(this._scheduled=!0,Z(()=>{this._skruv_resolve(),this._skruv_promise=new Promise(t=>{this._skruv_resolve=t}),this._scheduled=!1}))}set(t,s,a){return s==="_skruv_parent"?(this._skruv_parent=a,!0):(t[s]!==a&&(t[s]=this.recurse(s,a,t)),!0)}get(t,s,a){return s==="getGenerator"?l=>({key:[l,t],[Symbol.asyncIterator]:()=>{let f=!1;return{next:async()=>(f?await this._skruv_promise:f=!0,{done:!1,value:a[l]})}}}):s==="skruv_resolve"?()=>this._resolve():s==="toJSON"?t.constructor===Object?Object.getOwnPropertyNames(t).reduce((l,f)=>{var d;return l[f]=((d=t[f])==null?void 0:d.toJSON)||t[f],l},{}):t.constructor===Array?t.map(l=>(l==null?void 0:l.toJSON)||l):t:s===Symbol.asyncIterator?()=>{let l=!1;return{next:async()=>(l?await this._skruv_promise:l=!0,{done:!1,value:a})}}:t[s]}deleteProperty(t,s){let a=delete t[s];return this._resolve(),a}recurse(t,s,a){var l;if(s&&s.constructor)if(s.constructor===Object&&((l=a==null?void 0:a[t])==null?void 0:l.constructor)===Object){for(let f of Object.getOwnPropertyNames(s))a[t][f]!==s[f]&&(a[t][f]=s[f]);for(let f of Object.getOwnPropertyNames(a[t]).filter(d=>!Object.getOwnPropertyNames(s).includes(d)))delete a[t][f],this._resolve();return a[t]}else if(s.constructor===Object){let f=new this.constructor(`${this.name}.${t}`);s=Object.keys(s).reduce((d,o)=>(d[o]=this.recurse(`${t}.${o}`,s[o]),typeof d[o]=="object"&&d[o]!==null&&(d[o]._skruv_parent=f),d),{}),s=new Proxy(s,f),s._skruv_parent=this,this._resolve()}else if(s.constructor===Array){let f=new this.constructor(`${this.name}.${t}`);s=s.map((d,o)=>{let p=this.recurse(`${t}[${o}]`,d);return typeof p=="object"&&p!==null&&(p._skruv_parent=f),p}),s=new Proxy(s,f),s._skruv_parent=this,this._resolve()}else this._resolve();else this._resolve();return s}},i=new Proxy(e.constructor===Array?[]:{},new n("root"));return Object.assign(i,e),i};var y=!0,x=new WeakMap,E=()=>{},ee=new Promise(e=>{E=()=>e(!0)}),j=new Set,H=(e,n,i,c,t)=>{var s;return y&&!(typeof t=="object"&&"a"in t&&((s=t==null?void 0:t.a)==null?void 0:s["data-skruv-finished"])===!1)&&(j.delete(e),j.size||(y=!1,E())),x.set(e,t),i[n]=t,c._r._r()},O=(e,n,i,c,t=!0)=>{if(typeof e=="string"||typeof e=="number"||typeof e=="boolean"||e===null)return e;if(x.has(e))return x.get(e);if(typeof e=="object"&&Symbol.asyncIterator in e||typeof e=="function"&&e.constructor.name==="AsyncGeneratorFunction")return y&&j.add(e),x.set(e,null),(async()=>{for await(let s of typeof e=="function"?e():e)if(!H(e,n,i,c,O(s,n,i,c,!1)))break})(),null;if(typeof e=="object"&&"then"in e&&typeof e.then=="function"||typeof e=="function"&&e.constructor.name==="AsyncFunction")return y&&j.add(e),x.set(e,null),(async()=>H(e,n,i,c,O(await(typeof e=="function"?e():e),n,i,c,!1)))(),null;if(typeof e=="function"){if(typeof n=="string"&&(n[0]==="o"&&n[1]==="n"||n[0]==="_"))return e;let s=O(e(),n,i,c,!1);return x.set(e,s),s}if(typeof e=="object"){let s={_r:{_r:()=>((y&&!j.size||!y)&&(y=!1,E()),!0)}},a=s;Array.isArray(e)&&(s=[],a=c);for(let l in e){let f=O(e[l],l,s,a,!1);(f!==null||e[l]===null)&&(s[l]=f)}return(t&&y&&!j.size||!y)&&(y=!1,E()),s}return e};var V=e=>e.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(n,i)=>(i?"-":"")+n.toLowerCase()),J="#fragment",b=(e,n={})=>_(e,n),_=(e,n={})=>{if(e===J&&n.children)return n.children;if(e===J)return[];let{children:i,...c}=n;return Object.keys(c).filter(t=>t!==V(t)).forEach(t=>{c[V(t)]=c[t],delete c[t]}),c["class-name"]&&(c.class=c["class-name"],delete c["class-name"]),c["html-for"]&&(c.for=c["html-for"],delete c["html-for"]),i?C(e,c||{},i):C(e,c||{})};var $=z({todos:["Write todos"]}),q=L`:scope{color:#f1f1f1;background:#0f0f0f}body{max-width:40ch;margin:0 auto}form{display:flex}input{flex:1}a{color:#9b9b9b}`;T(O(_("html",{lang:"en-US",class:q,children:[_("head",{children:[b("title",{children:$.todos.getGenerator(0)}),b("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),b("style",{children:I})]}),b("body",{children:_("main",{children:[b("h1",{children:$.todos.getGenerator(0)}),_("form",{onsubmit:e=>{e.preventDefault(),$.todos.unshift(new FormData(e.target).get("todo")),e.target.reset()},children:[b("input",{name:"todo"}),b("button",{children:"New!"})]}),b("ol",{children:async function*(){for await(let e of $.todos)yield e.map((n,i)=>_("li",{children:[n," ",b("a",{href:"#",onclick:c=>{c.preventDefault(),e.splice(i,1)},children:"x"})]}))}})]})})]})));
//# sourceMappingURL=index.min.js.map
