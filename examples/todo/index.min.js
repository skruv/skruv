var z=Symbol.for("skruvDom"),x="data-event-";var $=(e,...o)=>{var i,l,s;return{s:z,t:e.toUpperCase(),...!((i=o[0])!=null&&i[Symbol.asyncIterator])&&((l=o[0])==null?void 0:l.constructor)===Object&&((s=o[0])==null?void 0:s.s)!==z?{a:o[0],c:o.slice(1)}:{a:{},c:o}}},j=new WeakMap,O={},k=(e,o=globalThis.document.documentElement,i=o.parentNode,l=!1,s=(i==null?void 0:i.ownerDocument)||(o==null?void 0:o.ownerDocument))=>{var a,m,y,g,b;let t=o,r=[];if(!i||!s||t&&!i.contains(t))return!1;if(typeof e=="boolean"||e===null||e===void 0)return t&&i.removeChild(t),!0;if(!t||(typeof e=="string"||typeof e=="number")&&(t==null?void 0:t.nodeName)!=="#text"||(e==null?void 0:e.t)&&(t==null?void 0:t.nodeName)!==(e==null?void 0:e.t)||(t==null?void 0:t._skruvKey)!==((a=e==null?void 0:e.a)==null?void 0:a._key)?(typeof e=="string"||typeof e=="number"?t=(O.text||(O.text=s.createTextNode(""))).cloneNode():l||e.t==="svg"?t=(O[e.t]||(O[e.t]=s.createElementNS("http://www.w3.org/2000/svg",e.t))).cloneNode():t=(O[e.t]||(O[e.t]=s.createElement(e.t))).cloneNode(),o?i.replaceChild(t,o):i.appendChild(t),(m=e==null?void 0:e.a)!=null&&m._key&&(t._skruvKey=(y=e==null?void 0:e.a)==null?void 0:y._key),(g=e==null?void 0:e.a)!=null&&g.oncreate&&((b=e==null?void 0:e.a)==null||b.oncreate(t))):r=t.childNodes,typeof e=="string"||typeof e=="number")return""+t.data!=""+e&&(t.data=e),!0;e._r&&(e._r._r=()=>k(e,t,i,l));for(let n in e.a)n[0]!=="_"&&(n[0]==="o"&&n[1]==="n"?!t[x+n]||""+t[x+n]!=""+e.a[n]?(t[x+n]&&t.removeEventListener(n.slice(2),t[x+n]),t.addEventListener(n.slice(2),e.a[n]),t[x+n]=e.a[n]):e.a[n]||t.removeEventListener(n.slice(2),t[x+n]):e.a[n]!==t.getAttribute(n)&&((typeof e.a[n]=="boolean"&&(e.t==="INPUT"&&n==="checked"||e.t==="OPTION"&&n==="selected")||typeof e.a[n]=="object")&&(t[n]=e.a[n]),e.a[n]?t.setAttribute(n,""+e.a[n]):t.removeAttribute(n)));let c=e.c.flat(1/0);if(!c.length&&r.length)return e.a["data-skruv-wait-for-not-empty"]||t.replaceChildren(),!0;if(r.length>c.length)for(let n=c.length;n<r.length;n++)t.removeChild(r[n]);for(let n=0;n<c.length;n++){if(j.has(c[n])){let w=j.get(c[n]);w&&w!==r[n]&&(w===r[n+1]?t.removeChild(r[n]):j.has(c[n+1])&&j.get(c[n+1])===r[n]?t.insertBefore(w,r[n]):r[n]?t.replaceChild(w,r[n]):t.appendChild(w),j.set(c[n],r[n]));continue}k(c[n],r[n]||!1,t,l)}return j.set(e,t),!0},X=new Proxy({},{get:(e,o)=>(...i)=>$(o,...i)});var D=()=>{},L=new Promise(e=>{D=e}),E=new Map,Z=e=>{let o=0;if(e.length===0)return o.toString();for(let i=0;i<e.length;i++)o=(o<<5)-o+e.charCodeAt(i),o|=0;return o.toString()},V=(e,...o)=>{var w;let i=e.reduce((f,d,h)=>{var p;return f.push(d),f.push(((p=o==null?void 0:o[h])==null?void 0:p.toString())||""),f},[]).join(""),l=/^\[.*?(?:(["'])(?:.|\\\1)*\1.*)*\]/,s=/([([,]|:scope\b)/,t=/^:scope\b/;function r(f,d){let h=f.search(s);if(h===-1)return{selector:`${d} ${f}`,rest:""};if(f[h]===",")return{selector:`${d} ${f.substring(0,h)}`,rest:f.substring(h+1)};let p=!0,G=!1;h=f.search(/\S/);let T=0;e:for(;h<f.length;++h){let I=f[h];switch(I){case"[":{let F=l.exec(f.substring(h));h+=(F?F[0].length:1)-1;continue}case"(":++T;continue;case":":if(p)if(t.test(f.substring(h))){if(T)return null}else continue;else continue;f=f.substring(0,h)+d+f.substring(h+6),h+=d.length,G=!0,--h;continue;case")":T&&--T;continue}if(!T)switch(I){case",":break e;case" ":case">":case"~":case"+":if(!p)continue;p=!1}}return{selector:(G?"":`${d} `)+f.substring(0,h),rest:f.substring(h+1)}}function c(f,d){let h=[];for(;f;){let p=r(f,d);if(p===null)return":not(*)";h.push(p.selector),f=p.rest}return h.join(", ")}function a(f,d){if(f instanceof CSSMediaRule){let h=f.cssRules.length;for(let p=0;p<h;++p)a(f.cssRules[p],d);return}f instanceof CSSStyleRule&&(f.selectorText=c(f.selectorText,d))}let m=Z(i),y=`skruv-css-scope-${m}`,g=`.${y}`;if(E.has(m))return y;let b;if(!(globalThis!=null&&globalThis.CSSOM)&&!((w=globalThis.document)!=null&&w.implementation))throw new Error("No css parser available. Either add CSSOM to globalThis or run in browser.");if(globalThis!=null&&globalThis.CSSOM)b=CSSOM.parse(i);else{let f=globalThis.document.implementation.createHTMLDocument(""),d=f.createElement("style");d.innerText=i,f.body.append(d),b=d.sheet,f.body.removeChild(d)}Array.from((b==null?void 0:b.cssRules)||[]).forEach(f=>a(f,g));let n=Array.from((b==null?void 0:b.cssRules)||[]).map(f=>f.cssText||"").join("");return E.set(m,n),D(),y};async function*H(){for(yield Array.from(E.values()).join("");;)await L,yield Array.from(E.values()).join(""),L=new Promise(e=>{D=e})}var q=(globalThis==null?void 0:globalThis.requestAnimationFrame)||(e=>setTimeout(e,0)),J=e=>{let o=class{constructor(s){this.name=s,this._scheduled=!1,this._skruv_promise=new Promise(t=>{this._skruv_resolve=t})}_resolve(){this._skruv_parent&&this._skruv_parent._resolve&&this._skruv_parent._resolve(),!this._scheduled&&(this._scheduled=!0,q(()=>{this._skruv_resolve(),this._skruv_promise=new Promise(s=>{this._skruv_resolve=s}),this._scheduled=!1}))}set(s,t,r){return t==="_skruv_parent"?(this._skruv_parent=r,!0):(s[t]!==r&&(s[t]=this.recurse(t,r,s)),!0)}get(s,t,r){return t==="getGenerator"?c=>({key:[c,s],[Symbol.asyncIterator]:()=>{let a=!1;return{next:async()=>(a?await this._skruv_promise:a=!0,{done:!1,value:r[c]})}}}):t==="skruv_resolve"?()=>this._resolve():t==="toJSON"?s.constructor===Object?Object.getOwnPropertyNames(s).reduce((c,a)=>{var m;return c[a]=((m=s[a])==null?void 0:m.toJSON)||s[a],c},{}):s.constructor===Array?s.map(c=>(c==null?void 0:c.toJSON)||c):s:t===Symbol.asyncIterator?()=>{let c=!1;return{next:async()=>(c?await this._skruv_promise:c=!0,{done:!1,value:r})}}:s[t]}deleteProperty(s,t){let r=delete s[t];return this._resolve(),r}recurse(s,t,r){var c;if(t&&t.constructor)if(t.constructor===Object&&((c=r==null?void 0:r[s])==null?void 0:c.constructor)===Object){for(let a of Object.getOwnPropertyNames(t))r[s][a]!==t[a]&&(r[s][a]=t[a]);for(let a of Object.getOwnPropertyNames(r[s]).filter(m=>!Object.getOwnPropertyNames(t).includes(m)))delete r[s][a],this._resolve();return r[s]}else if(t.constructor===Object){let a=new this.constructor(`${this.name}.${s}`);t=Object.keys(t).reduce((m,y)=>(m[y]=this.recurse(`${s}.${y}`,t[y]),typeof m[y]=="object"&&m[y]!==null&&(m[y]._skruv_parent=a),m),{}),t=new Proxy(t,a),t._skruv_parent=this,this._resolve()}else if(t.constructor===Array){let a=new this.constructor(`${this.name}.${s}`);t=t.map((m,y)=>{let g=this.recurse(`${s}[${y}]`,m);return typeof g=="object"&&g!==null&&(g._skruv_parent=a),g}),t=new Proxy(t,a),t._skruv_parent=this,this._resolve()}else this._resolve();else this._resolve();return t}},i=new Proxy(e.constructor===Array?[]:{},new o("root"));return Object.assign(i,e),i};var _=!0,P=new WeakMap,R=()=>{},te=new Promise(e=>{R=()=>e(!0)}),C=new Set,U=(e,o,i,l,s)=>{var t;return _&&!(typeof s=="object"&&"a"in s&&((t=s==null?void 0:s.a)==null?void 0:t["data-skruv-finished"])===!1)&&(C.delete(e),C.size||(_=!1,R())),P.set(e,s),i[o]=s,l._r._r()},A=(e,o,i,l,s=!0)=>{if(typeof e=="string"||typeof e=="number"||typeof e=="boolean"||e===null)return e;if(P.has(e))return P.get(e);if(typeof e=="object"&&Symbol.asyncIterator in e||typeof e=="function"&&e.constructor.name==="AsyncGeneratorFunction")return _&&C.add(e),P.set(e,null),(async()=>{for await(let t of typeof e=="function"?e():e)if(!U(e,o,i,l,A(t,o,i,l,!1)))break})(),null;if(typeof e=="object"&&"then"in e&&typeof e.then=="function"||typeof e=="function"&&e.constructor.name==="AsyncFunction")return _&&C.add(e),P.set(e,null),(async()=>U(e,o,i,l,A(await(typeof e=="function"?e():e),o,i,l,!1)))(),null;if(typeof e=="function"){if(typeof o=="string"&&(o[0]==="o"&&o[1]==="n"||o[0]==="_"))return e;let t=A(e(),o,i,l,!1);return P.set(e,t),t}if(typeof e=="object"){let t={_r:{_r:()=>((_&&!C.size||!_)&&(_=!1,R()),!0)}},r=t;Array.isArray(e)&&(t=[],r=l),o==="a"&&(t={},r=l);for(let c in e){let a=A(e[c],c,t,r,!1);(a!==null||e[c]===null)&&(t[c]=a)}return(s&&_&&!C.size||!_)&&(_=!1,R()),t}return e};var W=e=>e.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(o,i)=>(i?"-":"")+o.toLowerCase()),K="#fragment",u=(e,o={})=>S(e,o),S=(e,o={})=>{if(e===K&&o.children)return o.children;if(e===K)return[];let{children:i,...l}=o;return Object.keys(l).filter(s=>s!==W(s)).forEach(s=>{l[W(s)]=l[s],delete l[s]}),l["class-name"]&&(l.class=l["class-name"],delete l["class-name"]),l["html-for"]&&(l.for=l["html-for"],delete l["html-for"]),i?$(e,l||{},i):$(e,l||{})};var M=J({todos:["Write todos"]}),B=V`:scope{color:#f1f1f1;background:#0f0f0f}body{max-width:40ch;margin:0 auto}form{display:flex}input{flex:1}a{color:#9b9b9b}`;k(A(S("html",{lang:"en-US",class:B,children:[S("head",{children:[u("title",{children:M.todos.getGenerator(0)}),u("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),u("style",{children:H})]}),u("body",{children:S("main",{children:[u("h1",{children:M.todos.getGenerator(0)}),S("form",{onsubmit:e=>{e.preventDefault(),M.todos.unshift(new FormData(e.target).get("todo")),e.target.reset()},children:[u("input",{name:"todo"}),u("button",{children:"New!"})]}),u("ol",{children:async function*(){for await(let e of M.todos)yield e.map((o,i)=>S("li",{children:[o," ",u("a",{href:"#",onclick:l=>{l.preventDefault(),e.splice(i,1)},children:"x"})]}))}})]})})]})));
//# sourceMappingURL=index.min.js.map
