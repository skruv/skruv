var O="http://www.w3.org/1999/xhtml",p=new WeakMap,j=new WeakMap,D=new WeakMap,R={},y=(t,e=globalThis.document.documentElement,n=e.parentNode,a=O,u=!1)=>{if(!n)throw new Error("No parent to render to");if(typeof t=="boolean"){e&&n.removeChild(e);return}let r=typeof t=="string"||typeof t=="number";if(u||!e||r&&e.nodeName!=="#text"||!r&&e.nodeName.toLowerCase()!==t.t.toLowerCase()){let i=e;if(r?e=document.createTextNode(""+t):(t.t==="svg"&&(a="http://www.w3.org/2000/svg"),t.t==="math"&&(a="http://www.w3.org/1998/Math/MathML"),t.t==="feed"&&(a="http://www.w3.org/2005/Atom"),(t.t==="urlset"||t.t==="sitemapindex")&&(a="https://www.sitemaps.org/schemas/sitemap/0.9"),e=(R[t.t]||(R[t.t]=document.createElementNS(a,t.t))).cloneNode(!1)),i?n.replaceChild(e,i):n.appendChild(e),r)return}if(r){e.textContent!=t&&(e.textContent=""+t);return}t.r&&(t.r=()=>!e||!n.contains(e)?!1:(y(t,e,n,a),!0)),t.t==="foreignObject"&&(a=O);let l=t.c.flat(1/0);globalThis?.isSkruvSSR||(l=l.filter(i=>!i?.t?.startsWith("skruv")));let s={};if(l[0]?.constructor===Object&&!l[0]?.isSkruvDom){s=l[0],l=l.slice(1);let i=D.get(e);i||(i={},D.set(e,i));for(let[S,b]of Object.entries(s))if(""+i[S]!=""+b&&S!=="skruvKey"){if(S==="skruvAfterCreate"){setTimeout(()=>b(e),0),i[S]=b;continue}if(S[0]==="o"&&S[1]==="n"){let f=S.slice(2);i[S]?b||e.removeEventListener(f,b):(i[S]&&e.removeEventListener(f,b),e.addEventListener(f,b)),i[S]=b;continue}(S==="checked"||S==="selected"||S==="value"||e.nodeName.includes("-"))&&(e[S]=b),b!==void 0?e.setAttribute(S,""+b):e.removeAttribute(S),i[S]=b}}for(let i of e.getAttributeNames().filter(S=>!Object.keys(s).includes(S)))e.removeAttribute(i);if(!l.length&&e.childNodes.length){if(s.skruvWaitForNotEmpty)return;e.replaceChildren();return}if(e.childNodes.length>l.length)for(let i=e.childNodes.length-1;i>=l.length;i--)e.removeChild(e.childNodes[i]);for(let i=0;i<l.length;i++){let S=!1,b;if(l[i]?.c)if(b=p.get(l[i].c[0]?.skruvKey),b){if(b!==e.childNodes[i]&&(b===e.childNodes[i+1]?e.removeChild(e.childNodes[i]):e.childNodes[i]&&p.get(l[i+1]?.c?.[0]?.skruvKey)===e.childNodes[i]?e.insertBefore(b,e.childNodes[i]):e.childNodes[i]?e.replaceChild(b,e.childNodes[i]):e.appendChild(b)),S=l[i].c[0].skruvKey!==j.get(e.childNodes[i]),!S){let f=p.get(e.childNodes[i]);if(f){let M=!0;for(let H in l[i].c[0].skruvKey)l[i].c[0].skruvKey[H]!==f[H]&&(M=!1);if(M)continue}}}else S=p.has(e.childNodes[i]);y(l[i],e.childNodes[i]||!1,e,a,S)}s.skruvKey&&(p.set(s.skruvKey,e),j.set(e,s.skruvKey),p.set(e,{...s.skruvKey}))},Q=new Proxy({},{get:(t,e)=>(...n)=>({isSkruvDom:!0,t:e,c:n})});var x=()=>{},E=new Promise(t=>{x=t}),G=new Map,W=t=>{let e=0;if(t.length===0)return e.toString();for(let n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e|=0;return e.toString()},I=(t,...e)=>{let n=t.reduce((o,A,k)=>(o.push(A),o.push(e?.[k]?.toString()||""),o),[]).join(""),a=/^\[.*?(?:(["'])(?:.|\\\1)*\1.*)*\]/,u=/([([,]|:scope\b)/,r=/^:scope\b/;function l(o,A){let k=o.search(u);if(k===-1)return{selector:`${A} ${o}`,rest:""};if(o[k]===",")return{selector:`${A} ${o.substring(0,k)}`,rest:o.substring(k+1)};let v=!0,C=!1;k=o.search(/\S/);let g=0;t:for(;k<o.length;++k){let _=o[k];switch(_){case"[":{let P=a.exec(o.substring(k));k+=(P?P[0].length:1)-1;continue}case"(":++g;continue;case":":if(v)if(r.test(o.substring(k))){if(g)return null}else continue;else continue;o=o.substring(0,k)+A+o.substring(k+6),k+=A.length,C=!0,--k;continue;case")":g&&--g;continue}if(!g)switch(_){case",":break t;case" ":case">":case"~":case"+":if(!v)continue;v=!1}}return{selector:(C?"":`${A} `)+o.substring(0,k),rest:o.substring(k+1)}}function s(o,A){let k=[];for(;o;){let v=l(o,A);if(v===null)return":not(*)";k.push(v.selector),o=v.rest}return k.join(", ")}function i(o,A){if(o instanceof CSSMediaRule){let k=o.cssRules.length;for(let v=0;v<k;++v)i(o.cssRules[v],A);return}o instanceof CSSStyleRule&&(o.selectorText=s(o.selectorText,A))}let S=W(n),b=`skruv-css-scope-${S}`,f=`.${b}`;if(G.has(S))return b;let M;if(!globalThis?.CSSOM&&!globalThis.document?.implementation)throw new Error("No css parser available. Either add CSSOM to globalThis or run in browser.");if(globalThis?.CSSOM)M=CSSOM.parse(n);else{let o=globalThis.document.implementation.createHTMLDocument(""),A=o.createElementNS("http://www.w3.org/1999/xhtml","style");A.innerText=n,o.body.append(A),M=A.sheet,o.body.removeChild(A)}Array.from(M?.cssRules||[]).forEach(o=>i(o,f));let H=Array.from(M?.cssRules||[]).map(o=>o.cssText||"").join("");return G.set(S,H),x(),b};async function*K(){for(yield Array.from(G.values()).join("");;)await E,yield Array.from(G.values()).join(""),E=new Promise(t=>{x=t})}var B=t=>{let e=class F{constructor(){this._skruv_promise=new Promise(u=>{this._skruv_resolve=u})}_resolve(){this._skruv_parent&&this._skruv_parent._resolve&&this._skruv_parent._resolve(),this._skruv_resolve(""),this._skruv_promise=new Promise(u=>{this._skruv_resolve=u})}set(u,r,l){return r==="_skruv_parent"?(this._skruv_parent=l,!0):(u[r]!==l&&(u[r]=this.recurse(r,l,u)),!0)}get(u,r,l){return r==="getGenerator"?s=>({key:[s,u],[Symbol.asyncIterator]:()=>{let i=!1;return{next:async()=>(i?await this._skruv_promise:i=!0,{done:!1,value:l[s]})}}}):r==="toJSON"?u.constructor===Object?Object.getOwnPropertyNames(u).reduce((s,i)=>(s[i]=u[i]?.toJSON||u[i],s),{}):u.constructor===Array?u.map(s=>s?.toJSON||s):u:r===Symbol.asyncIterator?()=>{let s=!1;return{next:async()=>(s?await this._skruv_promise:s=!0,{done:!1,value:l})}}:u[r]}deleteProperty(u,r){let l=delete u[r];return this._resolve(),l}recurse(u,r,l){if(r&&r.constructor)if(r.constructor===Object&&l?.[u]?.constructor===Object){for(let s of Object.getOwnPropertyNames(r))l[u][s]!==r[s]&&(l[u][s]=r[s]);for(let s of Object.getOwnPropertyNames(l[u]).filter(i=>!Object.getOwnPropertyNames(r).includes(i)))delete l[u][s],this._resolve();return l[u]}else if(r.constructor===Object){let s=new F;r=Object.keys(r).reduce((i,S)=>(i[S]=this.recurse(`${u}.${S}`,r[S]),typeof i[S]=="object"&&i[S]!==null&&(i[S]._skruv_parent=s),i),{}),r=new Proxy(r,s),r._skruv_parent=this,this._resolve()}else if(r.constructor===Array){let s=new F;r=r.map((i,S)=>{let b=this.recurse(`${u}[${S}]`,i);return typeof b=="object"&&b!==null&&(b._skruv_parent=s),b}),r=new Proxy(r,s),r._skruv_parent=this,this._resolve()}else this._resolve();else this._resolve();return r}},n=new Proxy(t.constructor===Array?[]:{},new e("root"));return Object.assign(n,t),n};var m=!0,d=new WeakMap,V=()=>{},N=new Promise(t=>{V=()=>{m=!1,setTimeout(()=>t(""),0)}}),L=new Set,$=(t,e,n,a,u)=>(m&&!(typeof u=="object"&&"c"in u&&u?.c?.[0]?.skruvFinished===!1)&&(L.delete(t),L.size||V()),d.set(t,u),n[e]=u,a.r?a.r():!0),T=(t,e=null,n=null,a=null,u=!0)=>{if(typeof t=="string"||typeof t=="number"||typeof t=="boolean"||t===null)return t;if(d.has(t))return d.get(t);if(e&&n&&a){if(typeof t=="object"&&Symbol.asyncIterator in t||typeof t=="function"&&t.constructor.name==="AsyncGeneratorFunction")return m&&L.add(t),d.set(t,null),(async()=>{for await(let r of typeof t=="function"?t():t)if(!$(t,e,n,a,T(r,e,n,a,!1)))break})(),null;if(typeof t=="object"&&"then"in t&&typeof t.then=="function"||typeof t=="function"&&t.constructor.name==="AsyncFunction")return m&&L.add(t),d.set(t,null),(async()=>$(t,e,n,a,T(await(typeof t=="function"?t():t),e,n,a,!1)))(),null;if(typeof t=="function"){if(e[0]==="o"&&e[1]==="n"||e==="r"&&n?.isSkruvDom===!0||e==="skruvAfterCreate")return t;let r=T(t(),e,n,a,!1);return d.set(t,r),r}}if(typeof t=="object"){let r={},l=r;t.isSkruvDom===!0?r.r=()=>((m&&!L.size||!m)&&V(),!0):a?.r&&(l=a),Array.isArray(t)&&(r=[]);for(let s in t){let i=T(t[s],s,r,l,!1);(i!==null||t[s]===null)&&(r[s]=i)}return(u&&m&&!L.size||!m)&&V(),r}return t};var U="#fragment",q={svgA:"a",svgScript:"script",svgStyle:"style",svgTitle:"title",atomTitle:"title",atomLink:"link",atomSummary:"summary",atomSource:"source"},h=(t,e={children:[]})=>{if(t=q[t]||t,t===U&&e.children)return e.children;if(t===U)return[];if(typeof t=="function")return t(e,e.children);let{children:n,...a}=e;return n?{isSkruvDom:!0,t,c:[a||{},n]}:{isSkruvDom:!0,t,c:[a||{}]}},c=h;var w=B({todos:["Write todos"]}),J=I`:scope{color:#f1f1f1;background:#0f0f0f}body{max-width:40ch;margin:0 auto}form{display:flex}input{flex:1}a{color:#9b9b9b}`;y(T(h("html",{lang:"en-US",class:J,children:[h("head",{children:[c("title",{children:w.todos.getGenerator(0)}),c("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),c("style",{children:K})]}),c("body",{children:h("main",{children:[c("h1",{children:w.todos.getGenerator(0)}),h("form",{onsubmit:t=>{var n;t.preventDefault();let e=(n=new FormData(t.currentTarget).get("todo"))==null?void 0:n.toString();e!==void 0&&w.todos.unshift(e),t.currentTarget.reset()},children:[c("input",{name:"todo"}),c("button",{children:"New!"})]}),c("ol",{children:async function*(){for await(let t of w.todos)yield t.map((e,n)=>h("li",{children:[e," ",c("a",{href:"#",onclick:a=>{a.preventDefault(),t.splice(n,1)},children:"x"})]}))}})]})})]})));
//# sourceMappingURL=index.min.js.map
