var N=Symbol.for("skruvDom"),P=(e,...n)=>{var r,c;return{s:N,t:e.toUpperCase(),...typeof n[0]=="object"&&!Array.isArray(n[0])&&!(n[0]instanceof Function)&&!((r=n[0])!=null&&r[Symbol.asyncIterator])&&((c=n[0])==null?void 0:c.s)!==N?{a:n[0],c:n.slice(1)}:{a:{},c:n}}},w=new WeakMap,S={},C=(e,n=globalThis.document.documentElement,r=n==null?void 0:n.parentNode,c=!1)=>{var f,l;let t=n,s=[],a=t==null?void 0:t.nodeName;if(!t||a!==e.t&&(typeof e=="string"||typeof e=="number")&&a!=="#text"?(typeof e=="string"||typeof e=="number"?t=(S.text||(S.text=r.ownerDocument.createTextNode(""))).cloneNode():c||e.t==="svg"?t=(S[e.t]||(S[e.t]=r.ownerDocument.createElementNS("http://www.w3.org/2000/svg",e.t))).cloneNode():t=(S[e.t]||(S[e.t]=r.ownerDocument.createElement(e.t))).cloneNode(),n?r.replaceChild(t,n):r.appendChild(t)):s=Array.from(t.childNodes),typeof e=="string"||typeof e=="number"){e.toString()!==t.data.toString()&&(t.data=e);return}if(e.s===N){e._r||(e._r={}),e._r._r=()=>(C(e,t,r,c),!0);for(let o in e.a)o[0]!=="_"&&(o[0]==="o"&&o[1]==="n"?!t["data-event-"+o]||((f=t["data-event-"+o])==null?void 0:f.toString())!==((l=e.a[o])==null?void 0:l.toString())?(t["data-event-"+o]&&t.removeEventListener(o.slice(2),t["data-event-"+o]),t.addEventListener(o.slice(2),e.a[o]),t["data-event-"+o]=e.a[o]):e.a[o]||t.removeEventListener(o.slice(2),t["data-event-"+o]):e.a[o]!==t.getAttribute(o)&&(e.a[o]?t.setAttribute(o,e.a[o]):t.removeAttribute(o)));if(!e.c.length&&s.length){t.replaceChildren();return}if(s.length>e.c.length)for(let o=e.c.length;o<s.length;o++)t.removeChild(s[o]);for(let o=0;o<e.c.length;o++){if(w.has(e.c[o])){let d=w.get(e.c[o]);d!==t.childNodes[o]&&(d===t.childNodes[o+1]?t.removeChild(t.childNodes[o]):w.has(e.c[o+1])&&w.get(e.c[o+1])===t.childNodes[o]?t.insertBefore(d,t.childNodes[o]):t.childNodes[o]?t.replaceChild(d,t.childNodes[o]):t.appendChild(d),w.set(e,t));continue}C(e.c[o],s[o]||!1,t,c)}w.set(e,t)}},K=new Proxy({},{get:(e,n)=>(...r)=>P(n,...r)});var R=()=>{},G=new Promise(e=>{R=e}),T=new Map,U=e=>{let n=0;if(e.length===0)return n.toString();for(let r=0;r<e.length;r++)n=(n<<5)-n+e.charCodeAt(r),n|=0;return n.toString()},z=(e,...n)=>{var k;let r=e.reduce((i,m,h)=>{var u;return i.push(m),i.push(((u=n==null?void 0:n[h])==null?void 0:u.toString())||""),i},[]).join(""),c=/^\[.*?(?:(["'])(?:.|\\\1)*\1.*)*\]/,t=/([([,]|:scope\b)/,s=/^:scope\b/;function a(i,m){let h=i.search(t);if(h===-1)return{selector:`${m} ${i}`,rest:""};if(i[h]===",")return{selector:`${m} ${i.substring(0,h)}`,rest:i.substring(h+1)};let u=!0,M=!1;h=i.search(/\S/);let O=0;e:for(;h<i.length;++h){let D=i[h];switch(D){case"[":{let F=c.exec(i.substring(h));h+=(F?F[0].length:1)-1;continue}case"(":++O;continue;case":":if(u)if(s.test(i.substring(h))){if(O)return null}else continue;else continue;i=i.substring(0,h)+m+i.substring(h+6),h+=m.length,M=!0,--h;continue;case")":O&&--O;continue}if(!O)switch(D){case",":break e;case" ":case">":case"~":case"+":if(!u)continue;u=!1}}return{selector:(M?"":`${m} `)+i.substring(0,h),rest:i.substring(h+1)}}function f(i,m){let h=[];for(;i;){let u=a(i,m);if(u===null)return":not(*)";h.push(u.selector),i=u.rest}return h.join(", ")}function l(i,m){if(i instanceof CSSMediaRule){let h=i.cssRules.length;for(let u=0;u<h;++u)l(i.cssRules[u],m);return}i instanceof CSSStyleRule&&(i.selectorText=f(i.selectorText,m))}let o=U(r),d=`skruv-css-scope-${o}`,g=`.${d}`;if(T.has(o))return d;let b;if(!(globalThis!=null&&globalThis.CSSOM)&&!((k=globalThis.document)!=null&&k.implementation))throw new Error("No css parser available. Either add CSSOM to globalThis or run in browser.");if(globalThis!=null&&globalThis.CSSOM)b=CSSOM.parse(r);else{let i=globalThis.document.implementation.createHTMLDocument(""),m=i.createElement("style");m.innerText=r,i.body.append(m),b=m.sheet,i.body.removeChild(m)}Array.from((b==null?void 0:b.cssRules)||[]).forEach(i=>l(i,g));let W=Array.from((b==null?void 0:b.cssRules)||[]).map(i=>i.cssText||"").join("");return T.set(o,W),R(),d};async function*L(){for(yield Array.from(T.values()).join("");;)await G,yield Array.from(T.values()).join(""),G=new Promise(e=>{R=e})}var Z=(globalThis==null?void 0:globalThis.requestAnimationFrame)||(e=>setTimeout(e,0)),I=e=>{let n=class{constructor(t){this.name=t,this._scheduled=!1,this._skruv_promise=new Promise(s=>{this._skruv_resolve=s})}_resolve(){this._skruv_parent&&this._skruv_parent._resolve&&this._skruv_parent._resolve(),!this._scheduled&&(this._scheduled=!0,Z(()=>{this._skruv_resolve(),this._skruv_promise=new Promise(t=>{this._skruv_resolve=t}),this._scheduled=!1}))}set(t,s,a){return s==="_skruv_parent"?(this._skruv_parent=a,!0):(t[s]!==a&&(t[s]=this.recurse(s,a,t)),!0)}get(t,s,a){return s==="getGenerator"?f=>({key:[f,t],[Symbol.asyncIterator]:()=>{let l=!1;return{next:async()=>(l?await this._skruv_promise:l=!0,{done:!1,value:a[f]})}}}):s==="skruv_resolve"?()=>this._resolve():s==="toJSON"?t.constructor===Object?Object.getOwnPropertyNames(t).reduce((f,l)=>{var o;return f[l]=((o=t[l])==null?void 0:o.toJSON)||t[l],f},{}):t.constructor===Array?t.map(f=>(f==null?void 0:f.toJSON)||f):t:s===Symbol.asyncIterator?()=>{let f=!1;return{next:async()=>(f?await this._skruv_promise:f=!0,{done:!1,value:a})}}:t[s]}deleteProperty(t,s){let a=delete t[s];return this._resolve(),a}recurse(t,s,a){var f;if(s&&s.constructor)if(s.constructor===Object&&((f=a==null?void 0:a[t])==null?void 0:f.constructor)===Object){for(let l of Object.getOwnPropertyNames(s))a[t][l]!==s[l]&&(a[t][l]=s[l]);for(let l of Object.getOwnPropertyNames(a[t]).filter(o=>!Object.getOwnPropertyNames(s).includes(o)))delete a[t][l],this._resolve();return a[t]}else if(s.constructor===Object){let l=new this.constructor(`${this.name}.${t}`);s=Object.keys(s).reduce((o,d)=>(o[d]=this.recurse(`${t}.${d}`,s[d]),typeof o[d]=="object"&&o[d]!==null&&(o[d]._skruv_parent=l),o),{}),s=new Proxy(s,l),s._skruv_parent=this,this._resolve()}else if(s.constructor===Array){let l=new this.constructor(`${this.name}.${t}`);s=s.map((o,d)=>{let g=this.recurse(`${t}[${d}]`,o);return typeof g=="object"&&g!==null&&(g._skruv_parent=l),g}),s=new Proxy(s,l),s._skruv_parent=this,this._resolve()}else this._resolve();else this._resolve();return s}},r=new Proxy(e.constructor===Array?[]:{},new n("root"));return Object.assign(r,e),r};var p=!0,x=new WeakMap,$=()=>{},ee=new Promise(e=>{$=()=>e(!0)}),j=new Set,V=(e,n,r,c,t)=>{var s;return p&&!(typeof t=="object"&&"a"in t&&((s=t==null?void 0:t.a)==null?void 0:s["data-skruv-finished"])===!1)&&(j.delete(e),j.size||(p=!1,$())),x.set(e,t),r[n]=t,c._r._r()},A=(e,n,r,c,t=!0)=>{if(typeof e=="string"||typeof e=="number"||typeof e=="boolean"||e===null)return e;if(x.has(e))return x.get(e);if(typeof e=="object"&&Symbol.asyncIterator in e||typeof e=="function"&&e.constructor.name==="AsyncGeneratorFunction")return p&&j.add(e),x.set(e,null),(async()=>{for await(let s of typeof e=="function"?e():e)if(!V(e,n,r,c,A(s,n,r,c,!1)))break})(),null;if(typeof e=="object"&&"then"in e&&typeof e.then=="function"||typeof e=="function"&&e.constructor.name==="AsyncFunction")return p&&j.add(e),x.set(e,null),(async()=>V(e,n,r,c,A(await(typeof e=="function"?e():e),n,r,c,!1)))(),null;if(typeof e=="function"){if(typeof n=="string"&&(n[0]==="o"&&n[1]==="n"||n[0]==="_"))return e;let s=A(e(),n,r,c,!1);return x.set(e,s),s}if(typeof e=="object"){let s={_r:{_r:()=>((p&&!j.size||!p)&&(p=!1,$()),!0)}},a=s;Array.isArray(e)&&(s=[],a=c);for(let f in e){let l=A(e[f],f,s,a,!1);(l!==null||e[f]===null)&&(s[f]=l)}return(t&&p&&!j.size||!p)&&(p=!1,$()),s}return e};var H=e=>e.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(n,r)=>(r?"-":"")+n.toLowerCase()),J="#fragment",y=(e,n={})=>_(e,n),_=(e,n={})=>{if(e===J&&n.children)return n.children;if(e===J)return[];let{children:r,...c}=n;return Object.keys(c).filter(t=>t!==H(t)).forEach(t=>{c[H(t)]=c[t],delete c[t]}),c["class-name"]&&(c.class=c["class-name"],delete c["class-name"]),c["html-for"]&&(c.for=c["html-for"],delete c["html-for"]),r?P(e,c||{},r):P(e,c||{})};var E=I({todos:["Write todos"]}),q=z`:scope{color:#f1f1f1;background:#0f0f0f}body{max-width:40ch;margin:0 auto}form{display:flex}input{flex:1}a{color:#9b9b9b}`;C(A(_("html",{lang:"en-US",class:q,children:[_("head",{children:[y("title",{children:E.todos.getGenerator(0)}),y("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),y("style",{children:L})]}),y("body",{children:_("main",{children:[y("h1",{children:E.todos.getGenerator(0)}),_("form",{onsubmit:e=>{e.preventDefault(),E.todos.unshift(new FormData(e.target).get("todo")),e.target.reset()},children:[y("input",{name:"todo"}),y("button",{children:"New!"})]}),y("ol",{children:async function*(){for await(let e of E.todos)yield e.map((n,r)=>_("li",{children:[n," ",y("a",{href:"#",onclick:c=>{c.preventDefault(),e.splice(r,1)},children:"x"})]}))}})]})})]})));
//# sourceMappingURL=index.min.js.map
