var M="http://www.w3.org/1999/xhtml",j="http://www.w3.org/2000/svg",O="http://www.w3.org/1998/Math/MathML",v=new WeakMap,E=new WeakMap,L=new WeakMap,S={},c=(l,e=globalThis.document.documentElement,f=e.parentNode,h=M,A=!1)=>{var d,y,g,w,p,n,C;if(!f)throw new Error("No parent to render to");if(typeof l=="boolean"){e&&f.removeChild(e);return}let m=typeof l=="string"||typeof l=="number";if(A||!e||m&&e.nodeName!=="#text"||!m&&e.nodeName.toLowerCase()!==l.t.toLowerCase()){let t=e;if(m?e=document.createTextNode(""+l):(l.t==="svg"&&(h=j),l.t==="math"&&(h=O),e=(S[l.t]||(S[l.t]=document.createElementNS(h,l.t))).cloneNode(!1)),t?f.replaceChild(e,t):f.appendChild(e),m)return}if(m){e.textContent!=l&&(e.textContent=""+l);return}l.r&&(l.r=()=>!e||!f.contains(e)?!1:(c(l,e,f,h),!0)),l.t==="foreignObject"&&(h=M);let a=l.c.flat(1/0),o={};if(((d=a[0])==null?void 0:d.constructor)===Object&&!((y=a[0])!=null&&y.isSkruvDom)){o=a[0],a=a.slice(1);let t=L.get(e);t||(t={},L.set(e,t));for(let[i,s]of Object.entries(o))if(""+t[i]!=""+s&&i!=="data-skruv-key"){if(i==="data-skruv-after-create"){setTimeout(()=>s(e),0),t[i]=s;continue}if(i[0]==="o"&&i[1]==="n"){let k=i.slice(2);t[i]?s||e.removeEventListener(k,s):(t[i]&&e.removeEventListener(k,s),e.addEventListener(k,s)),t[i]=s;continue}(i==="checked"||i==="selected"||i==="value"||e.nodeName.includes("-"))&&(e[i]=s),s!==void 0?e.setAttribute(i,""+s):e.removeAttribute(i),t[i]=s}}for(let t of e.getAttributeNames().filter(i=>!Object.keys(o).includes(i)))e.removeAttribute(t);if(!a.length&&e.childNodes.length){if(o["data-skruv-wait-for-not-empty"])return;e.replaceChildren();return}if(e.childNodes.length>a.length)for(let t=e.childNodes.length-1;t>=a.length;t--)e.removeChild(e.childNodes[t]);for(let t=0;t<a.length;t++){let i=!1,s;if((g=a[t])!=null&&g.c)if(s=v.get((w=a[t].c[0])==null?void 0:w["data-skruv-key"]),s){if(s!==e.childNodes[t]&&(s===e.childNodes[t+1]?e.removeChild(e.childNodes[t]):e.childNodes[t]&&v.get((C=(n=(p=a[t+1])==null?void 0:p.c)==null?void 0:n[0])==null?void 0:C["data-skruv-key"])===e.childNodes[t]?e.insertBefore(s,e.childNodes[t]):e.childNodes[t]?e.replaceChild(s,e.childNodes[t]):e.appendChild(s)),i=a[t].c[0]["data-skruv-key"]!==E.get(e.childNodes[t]),!i){let k=v.get(e.childNodes[t]);if(k){let b=!0;for(let x in a[t].c[0]["data-skruv-key"])a[t].c[0]["data-skruv-key"][x]!==k[x]&&(b=!1);if(b)continue}}}else i=v.has(e.childNodes[t]);c(a[t],e.childNodes[t]||!1,e,h,i)}o["data-skruv-key"]&&(v.set(o["data-skruv-key"],e),E.set(e,o["data-skruv-key"]),v.set(e,{...o["data-skruv-key"]}))},T=new Proxy({},{get:(l,e)=>(...f)=>({isSkruvDom:!0,t:e,c:f})});export{T as elementFactory,c as render};
//# sourceMappingURL=skruv.min.js.map
