
/** @type {Record<string,string>} */
const reactMappings = {
  accentHeight: 'accent-height',
  accentheight: 'accent-height',
  acceptCharset: 'accept-charset',
  acceptcharset: 'accept-charset',
  accessKey: 'accesskey',
  alignmentBaseline: 'alignment-baseline',
  alignmentbaseline: 'alignment-baseline',
  allowFullscreen: 'allowfullscreen',
  allowFullScreen: 'allowfullscreen',
  allowReorder: 'allowreorder',
  arabicForm: 'arabic-form',
  arabicform: 'arabic-form',
  attributeName: 'attributename',
  attributeType: 'attributetype',
  autoCapitalize: 'autocapitalize',
  autoComplete: 'autocomplete',
  autoCorrect: 'autocorrect',
  autoFocus: 'autofocus',
  autoPlay: 'autoplay',
  autoReverse: 'autoreverse',
  autoSave: 'autosave',
  baseFrequency: 'basefrequency',
  baseProfile: 'baseprofile',
  baselineShift: 'baseline-shift',
  baselineshift: 'baseline-shift',
  calcMode: 'calcmode',
  capHeight: 'cap-height',
  capheight: 'cap-height',
  cellPadding: 'cellpadding',
  cellSpacing: 'cellspacing',
  charSet: 'charset',
  classID: 'classid',
  className: 'class',
  classname: 'class',
  clipPath: 'clip-path',
  clipPathUnits: 'clippathunits',
  clipRule: 'clip-rule',
  clippath: 'clip-path',
  cliprule: 'clip-rule',
  colSpan: 'colspan',
  colorInterpolation: 'color-interpolation',
  colorInterpolationFilters: 'color-interpolation-filters',
  colorProfile: 'color-profile',
  colorRendering: 'color-rendering',
  colorinterpolation: 'color-interpolation',
  colorinterpolationfilters: 'color-interpolation-filters',
  colorprofile: 'color-profile',
  colorrendering: 'color-rendering',
  contentEditable: 'contenteditable',
  contentScriptType: 'contentscripttype',
  contentStyleType: 'contentstyletype',
  contextMenu: 'contextmenu',
  controlsList: 'controlslist',
  crossOrigin: 'crossorigin',
  dangerouslySetInnerHTML: 'dangerouslysetinnerhtml',
  dateTime: 'datetime',
  defaultChecked: 'defaultchecked',
  defaultValue: 'defaultvalue',
  diffuseConstant: 'diffuseconstant',
  disablePictureInPicture: 'disablepictureinpicture',
  disableRemotePlayback: 'disableremoteplayback',
  dominantBaseline: 'dominant-baseline',
  dominantbaseline: 'dominant-baseline',
  edgeMode: 'edgemode',
  enableBackground: 'enable-background',
  enablebackground: 'enable-background',
  encType: 'enctype',
  enterKeyHint: 'enterkeyhint',
  externalResourcesRequired: 'externalresourcesrequired',
  fetchPriority: 'fetchpriority',
  fillOpacity: 'fill-opacity',
  fillRule: 'fill-rule',
  fillopacity: 'fill-opacity',
  fillrule: 'fill-rule',
  filterRes: 'filterres',
  filterUnits: 'filterunits',
  floodColor: 'flood-color',
  floodOpacity: 'flood-opacity',
  floodcolor: 'flood-color',
  floodopacity: 'flood-opacity',
  fontFamily: 'font-family',
  fontSize: 'font-size',
  fontSizeAdjust: 'font-size-adjust',
  fontStretch: 'font-stretch',
  fontStyle: 'font-style',
  fontVariant: 'font-variant',
  fontWeight: 'font-weight',
  fontfamily: 'font-family',
  fontsize: 'font-size',
  fontsizeadjust: 'font-size-adjust',
  fontstretch: 'font-stretch',
  fontstyle: 'font-style',
  fontvariant: 'font-variant',
  fontweight: 'font-weight',
  formAction: 'formaction',
  formEncType: 'formenctype',
  formMethod: 'formmethod',
  formNoValidate: 'formnovalidate',
  formTarget: 'formtarget',
  frameBorder: 'frameborder',
  glyphName: 'glyph-name',
  glyphOrientationHorizontal: 'glyph-orientation-horizontal',
  glyphOrientationVertical: 'glyph-orientation-vertical',
  glyphRef: 'glyphref',
  glyphname: 'glyph-name',
  glyphorientationhorizontal: 'glyph-orientation-horizontal',
  glyphorientationvertical: 'glyph-orientation-vertical',
  gradientTransform: 'gradienttransform',
  gradientUnits: 'gradientunits',
  horizAdvX: 'horiz-adv-x',
  horizOriginX: 'horiz-origin-x',
  horizadvx: 'horiz-adv-x',
  horizoriginx: 'horiz-origin-x',
  hrefLang: 'hreflang',
  htmlFor: 'for',
  htmlfor: 'for',
  httpEquiv: 'http-equiv',
  httpequiv: 'http-equiv',
  imageRendering: 'image-rendering',
  imageSizes: 'imagesizes',
  imageSrcSet: 'imagesrcset',
  imagerendering: 'image-rendering',
  innerHTML: 'innerhtml',
  inputMode: 'inputmode',
  itemID: 'itemid',
  itemProp: 'itemprop',
  itemRef: 'itemref',
  itemScope: 'itemscope',
  itemType: 'itemtype',
  kernelMatrix: 'kernelmatrix',
  kernelUnitLength: 'kernelunitlength',
  keyParams: 'keyparams',
  keyPoints: 'keypoints',
  keySplines: 'keysplines',
  keyTimes: 'keytimes',
  keyType: 'keytype',
  lengthAdjust: 'lengthadjust',
  letterSpacing: 'letter-spacing',
  letterspacing: 'letter-spacing',
  lightingColor: 'lighting-color',
  lightingcolor: 'lighting-color',
  limitingConeAngle: 'limitingconeangle',
  marginHeight: 'marginheight',
  marginWidth: 'marginwidth',
  markerEnd: 'marker-end',
  markerHeight: 'markerheight',
  markerMid: 'marker-mid',
  markerStart: 'marker-start',
  markerUnits: 'markerunits',
  markerWidth: 'markerwidth',
  markerend: 'marker-end',
  markermid: 'marker-mid',
  markerstart: 'marker-start',
  maskContentUnits: 'maskcontentunits',
  maskUnits: 'maskunits',
  maxLength: 'maxlength',
  mediaGroup: 'mediagroup',
  minLength: 'minlength',
  noModule: 'nomodule',
  noValidate: 'novalidate',
  numOctaves: 'numoctaves',
  overlinePosition: 'overline-position',
  overlineThickness: 'overline-thickness',
  overlineposition: 'overline-position',
  overlinethickness: 'overline-thickness',
  paintOrder: 'paint-order',
  paintorder: 'paint-order',
  panose1: 'panose-1',
  pathLength: 'pathlength',
  patternContentUnits: 'patterncontentunits',
  patternTransform: 'patterntransform',
  patternUnits: 'patternunits',
  playsInline: 'playsinline',
  pointerEvents: 'pointer-events',
  pointerevents: 'pointer-events',
  pointsAtX: 'pointsatx',
  pointsAtY: 'pointsaty',
  pointsAtZ: 'pointsatz',
  preserveAlpha: 'preservealpha',
  preserveAspectRatio: 'preserveaspectratio',
  primitiveUnits: 'primitiveunits',
  radioGroup: 'radiogroup',
  readOnly: 'readonly',
  refX: 'refx',
  refY: 'refy',
  referrerPolicy: 'referrerpolicy',
  renderingIntent: 'rendering-intent',
  renderingintent: 'rendering-intent',
  repeatCount: 'repeatcount',
  repeatDur: 'repeatdur',
  requiredExtensions: 'requiredextensions',
  requiredFeatures: 'requiredfeatures',
  rowSpan: 'rowspan',
  shapeRendering: 'shape-rendering',
  shaperendering: 'shape-rendering',
  specularConstant: 'specularconstant',
  specularExponent: 'specularexponent',
  spellCheck: 'spellcheck',
  spreadMethod: 'spreadmethod',
  srcDoc: 'srcdoc',
  srcLang: 'srclang',
  srcSet: 'srcset',
  startOffset: 'startoffset',
  stdDeviation: 'stddeviation',
  stitchTiles: 'stitchtiles',
  stopColor: 'stop-color',
  stopOpacity: 'stop-opacity',
  stopcolor: 'stop-color',
  stopopacity: 'stop-opacity',
  strikethroughPosition: 'strikethrough-position',
  strikethroughThickness: 'strikethrough-thickness',
  strikethroughposition: 'strikethrough-position',
  strikethroughthickness: 'strikethrough-thickness',
  strokeDasharray: 'stroke-dasharray',
  strokeDashoffset: 'stroke-dashoffset',
  strokeLinecap: 'stroke-linecap',
  strokeLinejoin: 'stroke-linejoin',
  strokeMiterlimit: 'stroke-miterlimit',
  strokeOpacity: 'stroke-opacity',
  strokeWidth: 'stroke-width',
  strokedasharray: 'stroke-dasharray',
  strokedashoffset: 'stroke-dashoffset',
  strokelinecap: 'stroke-linecap',
  strokelinejoin: 'stroke-linejoin',
  strokemiterlimit: 'stroke-miterlimit',
  strokeopacity: 'stroke-opacity',
  strokewidth: 'stroke-width',
  suppressContentEditableWarning: 'suppresscontenteditablewarning',
  suppressHydrationWarning: 'suppresshydrationwarning',
  surfaceScale: 'surfacescale',
  systemLanguage: 'systemlanguage',
  tabIndex: 'tabindex',
  tableValues: 'tablevalues',
  targetX: 'targetx',
  targetY: 'targety',
  textAnchor: 'text-anchor',
  textDecoration: 'text-decoration',
  textLength: 'textlength',
  textRendering: 'text-rendering',
  textanchor: 'text-anchor',
  textdecoration: 'text-decoration',
  textrendering: 'text-rendering',
  transformOrigin: 'transform-origin',
  transformorigin: 'transform-origin',
  underlinePosition: 'underline-position',
  underlineThickness: 'underline-thickness',
  underlineposition: 'underline-position',
  underlinethickness: 'underline-thickness',
  unicodeBidi: 'unicode-bidi',
  unicodeRange: 'unicode-range',
  unicodebidi: 'unicode-bidi',
  unicoderange: 'unicode-range',
  unitsPerEm: 'units-per-em',
  unitsperem: 'units-per-em',
  useMap: 'usemap',
  vAlphabetic: 'v-alphabetic',
  vHanging: 'v-hanging',
  vIdeographic: 'v-ideographic',
  vMathematical: 'v-mathematical',
  valphabetic: 'v-alphabetic',
  vectorEffect: 'vector-effect',
  vectoreffect: 'vector-effect',
  vertAdvY: 'vert-adv-y',
  vertOriginX: 'vert-origin-x',
  vertOriginY: 'vert-origin-y',
  vertadvy: 'vert-adv-y',
  vertoriginx: 'vert-origin-x',
  vertoriginy: 'vert-origin-y',
  vhanging: 'v-hanging',
  videographic: 'v-ideographic',
  viewBox: 'viewbox',
  viewTarget: 'viewtarget',
  vmathematical: 'v-mathematical',
  wordSpacing: 'word-spacing',
  wordspacing: 'word-spacing',
  writingMode: 'writing-mode',
  writingmode: 'writing-mode',
  xChannelSelector: 'xchannelselector',
  xHeight: 'x-height',
  xheight: 'x-height',
  xlinkActuate: 'xlink:actuate',
  xlinkArcrole: 'xlink:arcrole',
  xlinkHref: 'xlink:href',
  xlinkRole: 'xlink:role',
  xlinkShow: 'xlink:show',
  xlinkTitle: 'xlink:title',
  xlinkType: 'xlink:type',
  xlinkactuate: 'xlink:actuate',
  xlinkarcrole: 'xlink:arcrole',
  xlinkhref: 'xlink:href',
  xlinkrole: 'xlink:role',
  xlinkshow: 'xlink:show',
  xlinktitle: 'xlink:title',
  xlinktype: 'xlink:type',
  xmlBase: 'xml:base',
  xmlLang: 'xml:lang',
  xmlSpace: 'xmlspace',
  xmlbase: 'xml:base',
  xmllang: 'xml:lang',
  xmlnsXlink: 'xmlns:xlink',
  xmlnsxlink: 'xmlns:xlink',
  yChannelSelector: 'ychannelselector',
  zoomAndPan: 'zoomandpan'
}

const kebabize = str => str.replace(/[A-Z]+(?![a-z])|[A-Z]/g, ($, ofs) => (ofs ? '-' : '') + $)
const camelize = s => s.replace(/-./g, x => x[1].toUpperCase())

const typeMapping = (t) => {
  if (t === 'boolean') return t
  if (t === 'DOMString' || t === 'USVString') return 'string'
  if (t === 'long' || t === 'double' || t === 'unsigned') return 'number'
  if (['HTMLElement', 'LegacyNullToEmptyString', 'HTMLTableCaptionElement', 'HTMLTableSectionElement', 'Element'].includes(t)) return
  throw new Error('unkown type ' + t)
}

const types = $$('[href="#cereactions"]').map(e => [e.nextElementSibling?.nextElementSibling?.innerText, e.nextElementSibling?.nextElementSibling?.nextElementSibling?.innerText, e.nextElementSibling?.innerText]).filter(e => !!e[0] && !!e[1] && e[2] === 'attribute').map(e => [typeMapping(e[0]), e[1]]).filter(e => !!e[0]).reduce((p, c) => { p[c[1]] = c[0]; return p }, {})


types.value = 'number | string'
types.max = "number | string"
types.min = "number |  string"
types.loop = "number | boolean"
types.width = " number | string"

types.blocking = "'render'"
types.imagesrcset = "string"
types.ismap = "boolean"
types.sandbox = "'allow-downloads' | 'allow-forms' | 'allow-modals' | 'allow-orientation-lock' | 'allow-pointer-lock' | 'allow-popups' | 'allow-popups-to-escape-sandbox' | 'allow-presentation' | 'allow-same-origin' | 'allow-scripts' | 'allow-top-navigation' | 'allow-top-navigation-by-user-activation' | 'allow-top-navigation-to-custom-protocols'"
types.form = "string"
types.muted = "boolean"
types.span = "number"
types.colspan = "number"
types.rowspan = "number"
types.checked = "boolean"
types.dirname = "string"
types.formenctype = "string"
types.list = "string"
types.popovertarget = "string"
types.popovertargetaction = "'toggle' | 'show' | 'hide'"
types.selected = "boolean"

// https://html.spec.whatwg.org/#the-input-element
const parsed = $$('[data-dfn-type="element"]').filter(e => !!e.parentNode.id).map(e => ({
  name: e.innerText,
  attributesElem: document.querySelector(`[id="${e.parentNode.id}"] ~ .element`)
})).filter(e => !!e.attributesElem).map((e, i) => {
  e.attributes = []
  const attributesHeader = e.attributesElem.querySelector('[href="#concept-element-attributes"]').parentNode
  e.attributes.push(attributesHeader.nextElementSibling)

  while (e.attributes[e.attributes.length - 1].nextElementSibling.nodeName === 'DD') {
    e.attributes.push(e.attributes[e.attributes.length - 1].nextElementSibling)
  }
  e.attributes = e.attributes.filter(e => e.querySelector('code')).map(e => e.querySelector('code').innerText).reduce((p, c) => {
    const otherName = Object.entries(reactMappings).find(m => m[1] === c)?.[0]
    p[c] = types[otherName] || types[camelize(c)] || types[c.toLowerCase()]
    if (p[c]) types[c] = p[c]
    if (!p[c]) console.log('not found', c, otherName, types[otherName], types[camelize(c)], types[c.toLowerCase()])

    return p
  }, {})
  delete e.attributesElem
  return e
})

copy(JSON.stringify(types, null, 4))


// https://html.spec.whatwg.org/multipage/indices.html#elements-3
// $('#elements-3')

// Nothing elements: https://html.spec.whatwg.org/#concept-content-nothing
// base
// link
// meta
// hr
// br
// wbr
// source
// img
// iframe
// embed
// track
// area
// colgroup
// col
// input
// option
// template (although allow it in SSR?)

var elementGroups = [{ "name": "FlowContent", "children": ["a", "abbr", "address", "area", "article", "aside", "audio", "b", "bdi", "bdo", "blockquote", "br", "button", "canvas", "cite", "code", "data", "datalist", "del", "details", "dfn", "dialog", "div", "dl", "em", "embed", "fieldset", "figure", "footer", "form", "h1", "h2", "h3", "h4", "h5", "h6", "header", "hgroup", "hr", "i", "iframe", "img", "input", "ins", "kbd", "label", "link", "main", "map", "mark", "math", "menu", "meta", "meter", "nav", "noscript", "object", "ol", "output", "p", "picture", "pre", "progress", "q", "ruby", "s", "samp", "script", "search", "section", "select", "slot", "small", "span", "strong", "sub", "sup", "svg", "table", "template", "textarea", "time", "u", "ul", "var", "video", "wbr"] }, { "name": "HeadingContent", "children": ["h1", "h2", "h3", "h4", "h5", "h6", "hgroup"] }, { "name": "SectioningContent", "children": ["article", "aside", "nav", "section"] }, { "name": "MetadataContent", "children": ["base", "link", "meta", "noscript", "script", "style", "template", "title"] }, { "name": "InteractiveContent", "children": ["a", "audio", "button", "details", "embed", "iframe", "img", "input", "label", "object", "select", "textarea", "video"] }, { "name": "PhrasingContent", "children": ["a", "abbr", "area", "audio", "b", "bdi", "bdo", "br", "button", "canvas", "cite", "code", "data", "datalist", "del", "dfn", "em", "embed", "i", "iframe", "img", "input", "ins", "kbd", "label", "link", "map", "mark", "math", "meta", "meter", "noscript", "object", "output", "picture", "progress", "q", "ruby", "s", "samp", "script", "select", "slot", "small", "span", "strong", "sub", "sup", "svg", "template", "textarea", "time", "u", "var", "video", "wbr"] }, { "name": "EmbeddedContent", "children": ["audio", "canvas", "embed", "iframe", "img", "math", "object", "picture", "svg", "video"] }, { "name": "OtherContent", "children": ["html", "head", "body", "li", "dl", "dt", "dd", "figcaption", "rt", "rp", "source", "track", "caption", "colgroup", "col", "tbody", "thead", "tfoot", "tr", "td", "th", "optgroup", "option", "legend", "summary"] }]

var SVGElements = ['a', 'animate', 'animateMotion', 'animateTransform', 'circle', 'clipPath', 'defs', 'desc', 'ellipse', 'feBlend', 'feColorMatrix', 'feComponentTransfer', 'feComposite', 'feConvolveMatrix', 'feDiffuseLighting', 'feDisplacementMap', 'feDistantLight', 'feDropShadow', 'feFlood', 'feFuncA', 'feFuncB', 'feFuncG', 'feFuncR', 'feGaussianBlur', 'feImage', 'feMerge', 'feMergeNode', 'feMorphology', 'feOffset', 'fePointLight', 'feSpecularLighting', 'feSpotLight', 'feTile', 'feTurbulence', 'filter', 'foreignObject', 'g', 'hatch', 'hatchpath', 'image', 'line', 'linearGradient', 'marker', 'mask', 'metadata', 'mpath', 'path', 'pattern', 'polygon', 'polyline', 'radialGradient', 'rect', 'script', 'set', 'stop', 'style', 'svg', 'switch', 'symbol', 'text', 'textPath', 'title', 'tspan', 'use', 'view']

var SVGAttributesMap = {}

var MathMLElements = ['math', 'maction', 'annotation', 'annotation-xml', 'menclose', 'merror', 'mfenced', 'mfrac', 'mi', 'mmultiscripts', 'mn', 'mo', 'mover', 'mpadded', 'mphantom', 'mprescripts', 'mroot', 'mrow', 'ms', 'semantics', 'mspace', 'msqrt', 'mstyle', 'msub', 'msup', 'msubsup', 'mtable', 'mtd', 'mtext', 'mtr', 'munder', 'munderover']

var MathMLAttributesMap = {
  'annotation-xml': {
    encoding: 'string',
    src: 'string'
  },
  annotation: {
    encoding: 'string',
    src: 'string'
  },
  maction: {actiontype: "'statusline' | 'toggle'", selection: 'string'},
  math: { display: "'block' | 'inline'" },
  menclose: {notation: "'longdiv' | 'actuarial' | 'box' | 'roundedbox' | 'circle' | 'left' | 'right' | 'top' | 'bottom' | 'updiagonalstrike' | 'downdiagonalstrike' | 'verticalstrike' | 'horizontalstrike' | 'madruwb' | 'updiagonalarrow' | 'phasorangle'"},
  merror: {},
  mfenced: {close: 'string', open: 'string', separators: 'string'},
  // linethickness is a https://developer.mozilla.org/en-US/docs/Web/CSS/length-percentage
  mfrac: {denomalign: "'left' | 'center' | 'right'", linethickness: 'string', numalign: "'left' | 'center' | 'right'"},
  mi: {},
  // subscriptshift & superscriptshift is a https://developer.mozilla.org/en-US/docs/Web/CSS/length-percentage
  mmultiscripts: {subscriptshift: 'string', superscriptshift: 'string'},
  mn: {},
  // lspace & maxsize & minsize & rspace is a https://developer.mozilla.org/en-US/docs/Web/CSS/length-percentage
  mo: {
    accent: 'boolean',
    fence: 'boolean',
    largeop: 'boolean',
    lspace: 'string',
    maxsize: 'string',
    minsize: 'string',
    movablelimits: 'boolean',
    rspace: 'string',
    separator: 'boolean',
    stretchy: 'boolean',
    symmetric: 'boolean'
  },
  mover: {
    accent: 'boolean'
  },
  // All of these are https://developer.mozilla.org/en-US/docs/Web/CSS/length-percentage
  mpadded: {
    depth: 'string',
    height: 'string',
    lspace: 'string',
    voffset: 'string',
    width: 'string',
  },
  mphantom: {},
  mprescripts: {},
  mroot: {},
  mrow: {},
  ms: {
    lquote: 'string',
    rquote: 'string',
  },
  // All of these are https://developer.mozilla.org/en-US/docs/Web/CSS/length-percentage
  mspace: {
    depth: 'string',
    height: 'string',
    width: 'string',
  },
  msqrt: {},
  mstyle: {
    background: 'string',
    color: 'string',
    fontsize: 'string',
    fontstyle: 'string',
    fontweight: 'string',
    scriptminsize: 'string',
    scriptsizemultiplier: 'string',
  },
  msub: {
    subscriptshift: 'string'
  },
  msubsup: {
    subscriptshift: 'string',
    superscriptshift: 'string'
  },
  msup: {
    superscriptshift: 'string'
  },
  mtable: {
    align: "'axis' | 'baseline' | 'bottom' | 'center' | 'top'",
    columnalign: "'left' | 'center' | 'right'",
    columnlines: 'string',
    frame: "'none' | 'solid' | 'dashed'",
    framespacing: 'string',
    rowalign: "'axis' | 'baseline' | 'bottom' | 'center' | 'top'",
    rowlines: 'string',
    rowspacing: 'string',
    width: 'string'
  },
  mtd: {
    columnspan: 'number',
    rowspan: 'number',
    columnalign: "'left' | 'center' | 'right'",
    rowalign: "'axis' | 'baseline' | 'bottom' | 'center' | 'top'"
  },
  mtext: {},
  mtr: {
    columnalign: "'left' | 'center' | 'right'",
    rowalign: "'axis' | 'baseline' | 'bottom' | 'center' | 'top'"
  },
  munder: {
    accentunder: 'boolean'
  },
  munderover: {
    accent: 'boolean',
    accentunder: 'boolean'
  },
  semantics: {
    encoding: 'string',
    src:'string'
  },
}

const toElementName = (e) => camelize(e.charAt(0).toUpperCase() + e.substr(1).toLowerCase())

copy(`
${[...new Set(elementGroups.map(e => e.children).flat(Infinity))].map(c => `
interface Skruv${toElementName(c)}HTMLElement extends HTMLVnode<'${c}', ${document.createElement(c).constructor.name}, Skruv${toElementName(c)}HTMLAttributes, AnyHTMLContent> {}`
).join('')}

${elementGroups.map(e => `
type ${e.name} = ${e.children.map(c => `Skruv${toElementName(c)}HTMLElement`).join(' | ')
  }`).join('')}

type AnyHTMLElement = FlowContent | HeadingContent | SectioningContent | MetadataContent | InteractiveContent | PhrasingContent | EmbeddedContent | OtherContent
type AnyHTMLContent = AnyHTMLElement | string | number | boolean | AnyHTMLContent[] | AsyncGenerator<AnyHTMLContent> | Promise<AnyHTMLContent> | (() => AnyHTMLContent)

${SVGElements.map(c => `
interface Skruv${toElementName(c)}SVGElement extends SVGVnode<'${c}', ${document.createElementNS('http://www.w3.org/2000/svg', c).constructor.name}, Skruv${toElementName(c)}SVGAttributes, AnySVGContent> {}`
  ).join('')}

type AnySVGElement =  ${SVGElements.map(c => `Skruv${toElementName(c)}SVGElement`).join(' | ')}
type AnySVGContent = AnySVGElement | string | number | boolean | AnySVGContent[] | AsyncGenerator<AnySVGContent> | Promise<AnySVGContent> | (() => AnySVGContent)

${MathMLElements.map(c => `
interface Skruv${toElementName(c)}MathMLElement extends MathMLVnode<'${c}', ${document.createElementNS('http://www.w3.org/1998/Math/MathML', c).constructor.name}, Skruv${toElementName(c)}MathMLAttributes, AnyMathMLContent> {}`
  ).join('')}

type AnyMathMLElement =  ${MathMLElements.map(c => `Skruv${toElementName(c)}MathMLElement`).join(' | ')}
type AnyMathMLContent = AnyMathMLElement | string | number | boolean | AnyMathMLContent[] | AsyncGenerator<AnyMathMLContent> | Promise<AnyMathMLContent> | (() => AnyMathMLContent)

type AnyElement = AnyHTMLElement | AnySVGElement | AnyMathMLElement
type AnyContent = AnyHTMLContent | AnySVGContent | AnyMathMLContent

${parsed.map(e => `
interface Skruv${toElementName(e.name)}HTMLAttributes {${Object.keys(e.attributes).length && e.name !== 'body' && e.name !== 'li' ? Object.keys(e.attributes).map(a => `
  '${a}'?: ${e.attributes[a]} | undefined`).join('') + '\n' : ''
    }}`).join('')}

${SVGElements.map(e => `
interface Skruv${toElementName(e)}SVGAttributes {${SVGAttributesMap[e] && Object.keys(SVGAttributesMap[e]).length ? Object.keys(e).map(a => `
'${a}'?: ${SVGAttributesMap[e][a]} | undefined`).join('') + '\n' : ''}
}`).join('')}

${MathMLElements.map(e => `
interface Skruv${toElementName(e)}MathMLAttributes {${MathMLAttributesMap[e] && Object.keys(MathMLAttributesMap[e]).length ? Object.keys(MathMLAttributesMap[e]).map(a => `
'${a}'?: ${MathMLAttributesMap[e][a]} | undefined`).join('') + '\n' : ''}
}`).join('')}

export type ElementMap = {
${parsed.map(e => `'${e.name}': (...c: Skruv${toElementName(e.name)}HTMLElement['c']) => Skruv${toElementName(e.name)}HTMLElement`).join('\n')}
${SVGElements.map(e => `'${e}': (...c: Skruv${toElementName(e)}SVGElement['c']) => Skruv${toElementName(e)}SVGElement`).join('\n')}
${MathMLElements.map(e => `'${e}': (...c: Skruv${toElementName(e)}MathMLElement['c']) => Skruv${toElementName(e)}MathMLElement`).join('\n')}
} & CustomElements
`)

// https://html.spec.whatwg.org/images/content-venn.svg
// copy(JSON.stringify($$('foreignObject').map(e => ({
//   name: e.querySelector('h1').textContent.replace(' content', 'Content'),
//   children: Array.from(e.querySelectorAll('li code')).map(e => e.textContent)
// }))))
