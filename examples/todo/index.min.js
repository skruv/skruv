var I=Symbol.for("skruvDom"),w="data-event-",T=(e,...n)=>{var i,l,t;return{s:I,t:e.toUpperCase(),...!((i=n[0])!=null&&i[Symbol.asyncIterator])&&((l=n[0])==null?void 0:l.constructor)===Object&&((t=n[0])==null?void 0:t.s)!==I?{a:n[0],c:n.slice(1)}:{a:{},c:n}}},S=new WeakMap,x={},A=(e,n=globalThis.document.documentElement,i=n.parentNode,l=!1)=>{var c,a,f;let t=n;if(!i||!i.ownerDocument||t&&!i.contains(t))return!1;if(typeof e=="boolean"||e===null||e===void 0)return t&&i.removeChild(t),!0;if(((typeof e=="string"||typeof e=="number")&&(t==null?void 0:t.nodeName)!=="#text"||(e==null?void 0:e.t)&&(t==null?void 0:t.nodeName)!==(e==null?void 0:e.t)||(t==null?void 0:t._skruvKey)!==((c=e==null?void 0:e.a)==null?void 0:c._key))&&(typeof e=="string"||typeof e=="number"?t=(x.text||(x.text=i.ownerDocument.createTextNode(""))).cloneNode():l||e.t==="svg"?t=(x[e.t]||(x[e.t]=i.ownerDocument.createElementNS("http://www.w3.org/2000/svg",e.t))).cloneNode():t=(x[e.t]||(x[e.t]=i.ownerDocument.createElement(e.t))).cloneNode(),n?i.replaceChild(t,n):i.appendChild(t),t._skruvKey=(a=e==null?void 0:e.a)==null?void 0:a._key,(f=e==null?void 0:e.a)!=null&&f.oncreate&&e.a.oncreate(t)),typeof e=="string"||typeof e=="number")return""+t.data!=""+e&&(t.data=e),!0;e._r&&(e._r._r=()=>A(e,t,i,l));for(let o in e.a)if(o[0]==="o"&&o[1]==="n"){let d=o.slice(2);!t[w+o]||""+t[w+o]!=""+e.a[o]?(t[w+o]&&t.removeEventListener(d,t[w+o]),t.addEventListener(d,e.a[o]),t[w+o]=e.a[o]):e.a[o]||t.removeEventListener(d,t[w+o])}else e.a[o]!==t.getAttribute(o)&&((typeof e.a[o]=="boolean"&&(e.t==="INPUT"&&o==="checked"||e.t==="OPTION"&&o==="selected")||typeof e.a[o]=="object")&&(t[o]=e.a[o]),e.a[o]?t.setAttribute(o,""+e.a[o]):t.removeAttribute(o));let s=e.c.flat(1/0);if(!s.length&&t.childNodes.length)return e.a["data-skruv-wait-for-not-empty"]||t.replaceChildren(),!0;if(t.childNodes.length>s.length)for(let o=s.length;o<t.childNodes.length;o++)t.removeChild(t.childNodes[o]);for(let o=0;o<s.length;o++){if(S.has(s[o])){let d=S.get(s[o]);d!==t.childNodes[o]&&(d===t.childNodes[o+1]?t.removeChild(t.childNodes[o]):S.has(s[o+1])&&S.get(s[o+1])===t.childNodes[o]?t.insertBefore(d,t.childNodes[o]):t.childNodes[o]?t.replaceChild(d,t.childNodes[o]):t.appendChild(d),S.set(s[o],t.childNodes[o]));continue}A(s[o],t.childNodes[o]||!1,t,l)}return S.set(e,t),!0},v=new Proxy({},{get:(e,n)=>(...i)=>T(n,...i)});var E=()=>{},F=new Promise(e=>{E=e}),k=new Map,K=e=>{let n=0;if(e.length===0)return n.toString();for(let i=0;i<e.length;i++)n=(n<<5)-n+e.charCodeAt(i),n|=0;return n.toString()},z=(e,...n)=>{var R;let i=e.reduce((r,m,h)=>{var y;return r.push(m),r.push(((y=n==null?void 0:n[h])==null?void 0:y.toString())||""),r},[]).join(""),l=/^\[.*?(?:(["'])(?:.|\\\1)*\1.*)*\]/,t=/([([,]|:scope\b)/,s=/^:scope\b/;function c(r,m){let h=r.search(t);if(h===-1)return{selector:`${m} ${r}`,rest:""};if(r[h]===",")return{selector:`${m} ${r.substring(0,h)}`,rest:r.substring(h+1)};let y=!0,D=!1;h=r.search(/\S/);let C=0;e:for(;h<r.length;++h){let M=r[h];switch(M){case"[":{let G=l.exec(r.substring(h));h+=(G?G[0].length:1)-1;continue}case"(":++C;continue;case":":if(y)if(s.test(r.substring(h))){if(C)return null}else continue;else continue;r=r.substring(0,h)+m+r.substring(h+6),h+=m.length,D=!0,--h;continue;case")":C&&--C;continue}if(!C)switch(M){case",":break e;case" ":case">":case"~":case"+":if(!y)continue;y=!1}}return{selector:(D?"":`${m} `)+r.substring(0,h),rest:r.substring(h+1)}}function a(r,m){let h=[];for(;r;){let y=c(r,m);if(y===null)return":not(*)";h.push(y.selector),r=y.rest}return h.join(", ")}function f(r,m){if(r instanceof CSSMediaRule){let h=r.cssRules.length;for(let y=0;y<h;++y)f(r.cssRules[y],m);return}r instanceof CSSStyleRule&&(r.selectorText=a(r.selectorText,m))}let o=K(i),d=`skruv-css-scope-${o}`,g=`.${d}`;if(k.has(o))return d;let u;if(!(globalThis!=null&&globalThis.CSSOM)&&!((R=globalThis.document)!=null&&R.implementation))throw new Error("No css parser available. Either add CSSOM to globalThis or run in browser.");if(globalThis!=null&&globalThis.CSSOM)u=CSSOM.parse(i);else{let r=globalThis.document.implementation.createHTMLDocument(""),m=r.createElement("style");m.innerText=i,r.body.append(m),u=m.sheet,r.body.removeChild(m)}Array.from((u==null?void 0:u.cssRules)||[]).forEach(r=>f(r,g));let W=Array.from((u==null?void 0:u.cssRules)||[]).map(r=>r.cssText||"").join("");return k.set(o,W),E(),d};async function*L(){for(yield Array.from(k.values()).join("");;)await F,yield Array.from(k.values()).join(""),F=new Promise(e=>{E=e})}var Z=(globalThis==null?void 0:globalThis.requestAnimationFrame)||(e=>setTimeout(e,0)),V=e=>{let n=class{constructor(t){this.name=t,this._scheduled=!1,this._skruv_promise=new Promise(s=>{this._skruv_resolve=s})}_resolve(){this._skruv_parent&&this._skruv_parent._resolve&&this._skruv_parent._resolve(),!this._scheduled&&(this._scheduled=!0,Z(()=>{this._skruv_resolve(),this._skruv_promise=new Promise(t=>{this._skruv_resolve=t}),this._scheduled=!1}))}set(t,s,c){return s==="_skruv_parent"?(this._skruv_parent=c,!0):(t[s]!==c&&(t[s]=this.recurse(s,c,t)),!0)}get(t,s,c){return s==="getGenerator"?a=>({key:[a,t],[Symbol.asyncIterator]:()=>{let f=!1;return{next:async()=>(f?await this._skruv_promise:f=!0,{done:!1,value:c[a]})}}}):s==="skruv_resolve"?()=>this._resolve():s==="toJSON"?t.constructor===Object?Object.getOwnPropertyNames(t).reduce((a,f)=>{var o;return a[f]=((o=t[f])==null?void 0:o.toJSON)||t[f],a},{}):t.constructor===Array?t.map(a=>(a==null?void 0:a.toJSON)||a):t:s===Symbol.asyncIterator?()=>{let a=!1;return{next:async()=>(a?await this._skruv_promise:a=!0,{done:!1,value:c})}}:t[s]}deleteProperty(t,s){let c=delete t[s];return this._resolve(),c}recurse(t,s,c){var a;if(s&&s.constructor)if(s.constructor===Object&&((a=c==null?void 0:c[t])==null?void 0:a.constructor)===Object){for(let f of Object.getOwnPropertyNames(s))c[t][f]!==s[f]&&(c[t][f]=s[f]);for(let f of Object.getOwnPropertyNames(c[t]).filter(o=>!Object.getOwnPropertyNames(s).includes(o)))delete c[t][f],this._resolve();return c[t]}else if(s.constructor===Object){let f=new this.constructor(`${this.name}.${t}`);s=Object.keys(s).reduce((o,d)=>(o[d]=this.recurse(`${t}.${d}`,s[d]),typeof o[d]=="object"&&o[d]!==null&&(o[d]._skruv_parent=f),o),{}),s=new Proxy(s,f),s._skruv_parent=this,this._resolve()}else if(s.constructor===Array){let f=new this.constructor(`${this.name}.${t}`);s=s.map((o,d)=>{let g=this.recurse(`${t}[${d}]`,o);return typeof g=="object"&&g!==null&&(g._skruv_parent=f),g}),s=new Proxy(s,f),s._skruv_parent=this,this._resolve()}else this._resolve();else this._resolve();return s}},i=new Proxy(e.constructor===Array?[]:{},new n("root"));return Object.assign(i,e),i};var p=!0,j=new WeakMap,$=()=>{},te=new Promise(e=>{$=()=>e(!0)}),O=new Set,H=(e,n,i,l,t)=>{var s;return p&&!(typeof t=="object"&&"a"in t&&((s=t==null?void 0:t.a)==null?void 0:s["data-skruv-finished"])===!1)&&(O.delete(e),O.size||(p=!1,$())),j.set(e,t),i[n]=t,l._r._r()},P=(e,n,i,l,t=!0)=>{if(typeof e=="string"||typeof e=="number"||typeof e=="boolean"||e===null)return e;if(j.has(e))return j.get(e);if(typeof e=="object"&&Symbol.asyncIterator in e||typeof e=="function"&&e.constructor.name==="AsyncGeneratorFunction")return p&&O.add(e),j.set(e,null),(async()=>{for await(let s of typeof e=="function"?e():e)if(!H(e,n,i,l,P(s,n,i,l,!1)))break})(),null;if(typeof e=="object"&&"then"in e&&typeof e.then=="function"||typeof e=="function"&&e.constructor.name==="AsyncFunction")return p&&O.add(e),j.set(e,null),(async()=>H(e,n,i,l,P(await(typeof e=="function"?e():e),n,i,l,!1)))(),null;if(typeof e=="function"){if(typeof n=="string"&&(n[0]==="o"&&n[1]==="n"||n[0]==="_"))return e;let s=P(e(),n,i,l,!1);return j.set(e,s),s}if(typeof e=="object"){let s={_r:{_r:()=>((p&&!O.size||!p)&&(p=!1,$()),!0)}},c=s;Array.isArray(e)&&(s=[],c=l),n==="a"&&(s={},c=l);for(let a in e){let f=P(e[a],a,s,c,!1);(f!==null||e[a]===null)&&(s[a]=f)}return(t&&p&&!O.size||!p)&&(p=!1,$()),s}return e};var J=e=>e.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(n,i)=>(i?"-":"")+n.toLowerCase()),U="#fragment",b=(e,n={})=>_(e,n),_=(e,n={})=>{if(e===U&&n.children)return n.children;if(e===U)return[];let{children:i,...l}=n;return Object.keys(l).filter(t=>t!==J(t)).forEach(t=>{l[J(t)]=l[t],delete l[t]}),l["class-name"]&&(l.class=l["class-name"],delete l["class-name"]),l["html-for"]&&(l.for=l["html-for"],delete l["html-for"]),i?T(e,l||{},i):T(e,l||{})};var N=V({todos:["Write todos"]}),q=z`:scope{color:#f1f1f1;background:#0f0f0f}body{max-width:40ch;margin:0 auto}form{display:flex}input{flex:1}a{color:#9b9b9b}`;A(P(_("html",{lang:"en-US",class:q,children:[_("head",{children:[b("title",{children:N.todos.getGenerator(0)}),b("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),b("style",{children:L})]}),b("body",{children:_("main",{children:[b("h1",{children:N.todos.getGenerator(0)}),_("form",{onsubmit:e=>{e.preventDefault(),N.todos.unshift(new FormData(e.target).get("todo")),e.target.reset()},children:[b("input",{name:"todo"}),b("button",{children:"New!"})]}),b("ol",{children:async function*(){for await(let e of N.todos)yield e.map((n,i)=>_("li",{children:[n," ",b("a",{href:"#",onclick:l=>{l.preventDefault(),e.splice(i,1)},children:"x"})]}))}})]})})]})));
//# sourceMappingURL=index.min.js.map
