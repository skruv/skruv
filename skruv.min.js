var M="http://www.w3.org/1999/xhtml",m=new WeakMap,S=new WeakMap,A=new WeakMap,E={},L=(s,i=globalThis.document.documentElement,f=i.parentNode,h=M,j=!1)=>{var w,d,g,y,p,b,C;if(!f)throw new Error("No parent to render to");if(typeof s=="boolean"){i&&f.removeChild(i);return}let v=typeof s=="string"||typeof s=="number";if(j||!i||v&&i.nodeName!=="#text"||!v&&i.nodeName.toLowerCase()!==s.t.toLowerCase()){let t=i;if(v?i=document.createTextNode(""+s):(s.t==="svg"&&(h="http://www.w3.org/2000/svg"),s.t==="math"&&(h="http://www.w3.org/1998/Math/MathML"),s.t==="feed"&&(h="http://www.w3.org/2005/Atom"),(s.t==="urlset"||s.t==="sitemapindex")&&(h="https://www.sitemaps.org/schemas/sitemap/0.9"),i=(E[s.t]||(E[s.t]=document.createElementNS(h,s.t))).cloneNode(!1)),t?f.replaceChild(i,t):f.appendChild(i),v)return}if(v){i.textContent!=s&&(i.textContent=""+s);return}s.r&&(s.r=()=>!i||!f.contains(i)?!1:(L(s,i,f,h),!0)),s.t==="foreignObject"&&(h=M);let a=s.c.flat(1/0);globalThis!=null&&globalThis.isSkruvSSR||(a=a.filter(t=>{var e;return((e=t==null?void 0:t.t)==null?void 0:e[0])!=="#"}));let o={};if(((w=a[0])==null?void 0:w.constructor)===Object&&!((d=a[0])!=null&&d.isSkruvDom)){o=a[0],a=a.slice(1);let t=A.get(i);t||(t={},A.set(i,t));for(let[e,l]of Object.entries(o))if(""+t[e]!=""+l&&e!=="data-skruv-key"){if(e==="data-skruv-after-create"){setTimeout(()=>l(i),0),t[e]=l;continue}if(e[0]==="o"&&e[1]==="n"){let k=e.slice(2);t[e]?l||i.removeEventListener(k,l):(t[e]&&i.removeEventListener(k,l),i.addEventListener(k,l)),t[e]=l;continue}(e==="checked"||e==="selected"||e==="value"||i.nodeName.includes("-"))&&(i[e]=l),l!==void 0?i.setAttribute(e,""+l):i.removeAttribute(e),t[e]=l}}for(let t of i.getAttributeNames().filter(e=>!Object.keys(o).includes(e)))i.removeAttribute(t);if(!a.length&&i.childNodes.length){if(o["data-skruv-wait-for-not-empty"])return;i.replaceChildren();return}if(i.childNodes.length>a.length)for(let t=i.childNodes.length-1;t>=a.length;t--)i.removeChild(i.childNodes[t]);for(let t=0;t<a.length;t++){let e=!1,l;if((g=a[t])!=null&&g.c)if(l=m.get((y=a[t].c[0])==null?void 0:y["data-skruv-key"]),l){if(l!==i.childNodes[t]&&(l===i.childNodes[t+1]?i.removeChild(i.childNodes[t]):i.childNodes[t]&&m.get((C=(b=(p=a[t+1])==null?void 0:p.c)==null?void 0:b[0])==null?void 0:C["data-skruv-key"])===i.childNodes[t]?i.insertBefore(l,i.childNodes[t]):i.childNodes[t]?i.replaceChild(l,i.childNodes[t]):i.appendChild(l)),e=a[t].c[0]["data-skruv-key"]!==S.get(i.childNodes[t]),!e){let k=m.get(i.childNodes[t]);if(k){let n=!0;for(let x in a[t].c[0]["data-skruv-key"])a[t].c[0]["data-skruv-key"][x]!==k[x]&&(n=!1);if(n)continue}}}else e=m.has(i.childNodes[t]);L(a[t],i.childNodes[t]||!1,i,h,e)}o["data-skruv-key"]&&(m.set(o["data-skruv-key"],i),S.set(i,o["data-skruv-key"]),m.set(i,{...o["data-skruv-key"]}))},O=new Proxy({},{get:(s,i)=>(...f)=>({isSkruvDom:!0,t:i,c:f})});export{O as elementFactory,L as render};
//# sourceMappingURL=skruv.min.js.map
