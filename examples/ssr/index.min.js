var D=Symbol.for("skruvDom"),_="data-event-";var J=(e,...n)=>{var f,h,o;return{s:D,t:e.toUpperCase(),...!((f=n[0])!=null&&f[Symbol.asyncIterator])&&((h=n[0])==null?void 0:h.constructor)===Object&&((o=n[0])==null?void 0:o.s)!==D?{a:n[0],c:n.slice(1)}:{a:{},c:n}}},g=new WeakMap,S={},P=(e,n=globalThis.document.documentElement,f=n.parentNode,h=!1,o=(f==null?void 0:f.ownerDocument)||(n==null?void 0:n.ownerDocument))=>{let t=n,i=[];if(!f||!o||t&&!f.contains(t))return!1;if(typeof e=="boolean"||e===null||e===void 0)return t&&f.removeChild(t),!0;if(!t||(typeof e=="string"||typeof e=="number")&&(t==null?void 0:t.nodeName)!=="#text"||(e==null?void 0:e.t)&&(t==null?void 0:t.nodeName)!==(e==null?void 0:e.t)?(typeof e=="string"||typeof e=="number"?t=(S.text||(S.text=o.createTextNode(""))).cloneNode():h||e.t==="svg"?t=(S[e.t]||(S[e.t]=o.createElementNS("http://www.w3.org/2000/svg",e.t))).cloneNode():t=(S[e.t]||(S[e.t]=o.createElement(e.t))).cloneNode(),n?f.replaceChild(t,n):f.appendChild(t)):i=t.childNodes,typeof e=="string"||typeof e=="number")return""+t.data!=""+e&&(t.data=e),!0;e._r&&(e._r._r=()=>P(e,t,f,h));for(let s in e.a)s[0]!=="_"&&(s[0]==="o"&&s[1]==="n"?!t[_+s]||""+t[_+s]!=""+e.a[s]?(t[_+s]&&t.removeEventListener(s.slice(2),t[_+s]),t.addEventListener(s.slice(2),e.a[s]),t[_+s]=e.a[s]):e.a[s]||t.removeEventListener(s.slice(2),t[_+s]):e.a[s]!==t.getAttribute(s)&&((typeof e.a[s]=="boolean"&&(e.t==="INPUT"&&s==="checked"||e.t==="OPTION"&&s==="selected")||typeof e.a[s]=="object")&&(t[s]=e.a[s]),e.a[s]?t.setAttribute(s,""+e.a[s]):t.removeAttribute(s)));let l=e.c.flat(1/0);if(!l.length&&i.length)return t.replaceChildren(),!0;if(i.length>l.length)for(let s=l.length;s<i.length;s++)t.removeChild(i[s]);for(let s=0;s<l.length;s++){if(g.has(l[s])){let a=g.get(l[s]);a&&a!==i[s]&&(a===i[s+1]?t.removeChild(i[s]):g.has(l[s+1])&&g.get(l[s+1])===i[s]?t.insertBefore(a,i[s]):i[s]?t.replaceChild(a,i[s]):t.appendChild(a),g.set(l[s],i[s]));continue}P(l[s],i[s]||!1,t,h)}return g.set(e,t),!0},G=new Proxy({},{get:(e,n)=>(...f)=>J(n,...f)});var $=()=>{},I=new Promise(e=>{$=e}),T=new Map,U=e=>{let n=0;if(e.length===0)return n.toString();for(let f=0;f<e.length;f++)n=(n<<5)-n+e.charCodeAt(f),n|=0;return n.toString()},F=(e,...n)=>{var R;let f=e.reduce((r,m,c)=>{var d;return r.push(m),r.push(((d=n==null?void 0:n[c])==null?void 0:d.toString())||""),r},[]).join(""),h=/^\[.*?(?:(["'])(?:.|\\\1)*\1.*)*\]/,o=/([([,]|:scope\b)/,t=/^:scope\b/;function i(r,m){let c=r.search(o);if(c===-1)return{selector:`${m} ${r}`,rest:""};if(r[c]===",")return{selector:`${m} ${r.substring(0,c)}`,rest:r.substring(c+1)};let d=!0,k=!1;c=r.search(/\S/);let O=0;e:for(;c<r.length;++c){let E=r[c];switch(E){case"[":{let M=h.exec(r.substring(c));c+=(M?M[0].length:1)-1;continue}case"(":++O;continue;case":":if(d)if(t.test(r.substring(c))){if(O)return null}else continue;else continue;r=r.substring(0,c)+m+r.substring(c+6),c+=m.length,k=!0,--c;continue;case")":O&&--O;continue}if(!O)switch(E){case",":break e;case" ":case">":case"~":case"+":if(!d)continue;d=!1}}return{selector:(k?"":`${m} `)+r.substring(0,c),rest:r.substring(c+1)}}function l(r,m){let c=[];for(;r;){let d=i(r,m);if(d===null)return":not(*)";c.push(d.selector),r=d.rest}return c.join(", ")}function s(r,m){if(r instanceof CSSMediaRule){let c=r.cssRules.length;for(let d=0;d<c;++d)s(r.cssRules[d],m);return}r instanceof CSSStyleRule&&(r.selectorText=l(r.selectorText,m))}let a=U(f),u=`skruv-css-scope-${a}`,b=`.${u}`;if(T.has(a))return u;let p;if(!(globalThis!=null&&globalThis.CSSOM)&&!((R=globalThis.document)!=null&&R.implementation))throw new Error("No css parser available. Either add CSSOM to globalThis or run in browser.");if(globalThis!=null&&globalThis.CSSOM)p=CSSOM.parse(f);else{let r=globalThis.document.implementation.createHTMLDocument(""),m=r.createElement("style");m.innerText=f,r.body.append(m),p=m.sheet,r.body.removeChild(m)}Array.from((p==null?void 0:p.cssRules)||[]).forEach(r=>s(r,b));let H=Array.from((p==null?void 0:p.cssRules)||[]).map(r=>r.cssText||"").join("");return T.set(a,H),$(),u};async function*V(){for(yield Array.from(T.values()).join("");;)await I,yield Array.from(T.values()).join(""),I=new Promise(e=>{$=e})}var W=(globalThis==null?void 0:globalThis.requestAnimationFrame)||(e=>setTimeout(e,0)),L=e=>{let n=class{constructor(o){this.name=o,this._scheduled=!1,this._skruv_promise=new Promise(t=>{this._skruv_resolve=t})}_resolve(){this._skruv_parent&&this._skruv_parent._resolve&&this._skruv_parent._resolve(),!this._scheduled&&(this._scheduled=!0,W(()=>{this._skruv_resolve(),this._skruv_promise=new Promise(o=>{this._skruv_resolve=o}),this._scheduled=!1}))}set(o,t,i){return t==="_skruv_parent"?(this._skruv_parent=i,!0):(o[t]!==i&&(o[t]=this.recurse(t,i,o)),!0)}get(o,t,i){return t==="getGenerator"?l=>({key:[l,o],[Symbol.asyncIterator]:()=>{let s=!1;return{next:async()=>(s?await this._skruv_promise:s=!0,{done:!1,value:i[l]})}}}):t==="skruv_resolve"?()=>this._resolve():t==="toJSON"?o.constructor===Object?Object.getOwnPropertyNames(o).reduce((l,s)=>{var a;return l[s]=((a=o[s])==null?void 0:a.toJSON)||o[s],l},{}):o.constructor===Array?o.map(l=>(l==null?void 0:l.toJSON)||l):o:t===Symbol.asyncIterator?()=>{let l=!1;return{next:async()=>(l?await this._skruv_promise:l=!0,{done:!1,value:i})}}:o[t]}deleteProperty(o,t){let i=delete o[t];return this._resolve(),i}recurse(o,t,i){var l;if(t&&t.constructor)if(t.constructor===Object&&((l=i==null?void 0:i[o])==null?void 0:l.constructor)===Object){for(let s of Object.getOwnPropertyNames(t))i[o][s]!==t[s]&&(i[o][s]=t[s]);for(let s of Object.getOwnPropertyNames(i[o]).filter(a=>!Object.getOwnPropertyNames(t).includes(a)))delete i[o][s],this._resolve();return i[o]}else if(t.constructor===Object){let s=new this.constructor(`${this.name}.${o}`);t=Object.keys(t).reduce((a,u)=>(a[u]=this.recurse(`${o}.${u}`,t[u]),typeof a[u]=="object"&&a[u]!==null&&(a[u]._skruv_parent=s),a),{}),t=new Proxy(t,s),t._skruv_parent=this,this._resolve()}else if(t.constructor===Array){let s=new this.constructor(`${this.name}.${o}`);t=t.map((a,u)=>{let b=this.recurse(`${o}[${u}]`,a);return typeof b=="object"&&b!==null&&(b._skruv_parent=s),b}),t=new Proxy(t,s),t._skruv_parent=this,this._resolve()}else this._resolve();else this._resolve();return t}},f=new Proxy(e.constructor===Array?[]:{},new n("root"));return Object.assign(f,e),f};var y=!0,w=new WeakMap,C=()=>{},me=new Promise(e=>{C=()=>e(!0)}),x=new Set,z=(e,n,f,h,o)=>{var t;return y&&!(typeof o=="object"&&"a"in o&&((t=o==null?void 0:o.a)==null?void 0:t["data-skruv-finished"])===!1)&&(x.delete(e),x.size||(y=!1,C())),w.set(e,o),f[n]=o,h._r._r()},j=(e,n,f,h,o=!0)=>{if(typeof e=="string"||typeof e=="number"||typeof e=="boolean"||e===null)return e;if(w.has(e))return w.get(e);if(typeof e=="object"&&Symbol.asyncIterator in e||typeof e=="function"&&e.constructor.name==="AsyncGeneratorFunction")return y&&x.add(e),w.set(e,null),(async()=>{for await(let t of typeof e=="function"?e():e)if(!z(e,n,f,h,j(t,n,f,h,!1)))break})(),null;if(typeof e=="object"&&"then"in e&&typeof e.then=="function"||typeof e=="function"&&e.constructor.name==="AsyncFunction")return y&&x.add(e),w.set(e,null),(async()=>z(e,n,f,h,j(await(typeof e=="function"?e():e),n,f,h,!1)))(),null;if(typeof e=="function"){if(typeof n=="string"&&(n[0]==="o"&&n[1]==="n"||n[0]==="_"))return e;let t=j(e(),n,f,h,!1);return w.set(e,t),t}if(typeof e=="object"){let t={_r:{_r:()=>((y&&!x.size||!y)&&(y=!1,C()),!0)}},i=t;Array.isArray(e)&&(t=[],i=h),n==="a"&&(i=h);for(let l in e){let s=j(e[l],l,t,i,!1);(s!==null||e[l]===null)&&(t[l]=s)}return(o&&y&&!x.size||!y)&&(y=!1,C()),t}return e};var{html:N,head:q,title:B,meta:K,body:Q,main:X,h1:Y,form:Z,input:v,button:ee,ol:te,li:se,a:oe,style:ne,script:ie}=G,A=L({todos:["Write todos"]}),re=F`:scope{color:#f1f1f1;background:#0f0f0f}body{max-width:40ch;margin:0 auto}form{display:flex}input{flex:1}a{color:#9b9b9b}`;P(j(N({lang:"en-US",class:re},q(B(A.todos.getGenerator(0)),K({name:"viewport",content:"width=device-width, initial-scale=1"}),ne(V)),Q(X(Y(A.todos.getGenerator(0)),Z({onsubmit:e=>{e.preventDefault(),A.todos.unshift(new FormData(e.target).get("todo")),e.target.reset()}},v({type:"text",name:"todo"}),ee("New!")),async function*(){for await(let e of A)yield te(e.todos.map((n,f)=>se(`${n} `,oe({href:"#",onclick:h=>{h.preventDefault(),e.todos.splice(f,1)}},"x"))))}),!!globalThis.skruvSSRScript&&ie({type:"module"},globalThis.skruvSSRScript)))));
//# sourceMappingURL=index.min.js.map
