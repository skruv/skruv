var N=Symbol.for("skruvDom"),w="data-event-",C=(e,...n)=>{var i,l,t;return{s:N,t:e.toUpperCase(),...!((i=n[0])!=null&&i[Symbol.asyncIterator])&&((l=n[0])==null?void 0:l.constructor)===Object&&((t=n[0])==null?void 0:t.s)!==N?{a:n[0],c:n.slice(1)}:{a:{},c:n}}},S=new WeakMap,x={},A=(e,n=globalThis.document.documentElement,i=n.parentNode,l=!1)=>{var a,c,d,p;let t=n,s=(i==null?void 0:i.ownerDocument)||t.ownerDocument;if(!i||!s||t&&!i.contains(t))return!1;if(typeof e=="boolean"||e===null||e===void 0)return t&&i.removeChild(t),!0;if(((typeof e=="string"||typeof e=="number")&&(t==null?void 0:t.nodeName)!=="#text"||(e==null?void 0:e.t)&&(t==null?void 0:t.nodeName)!==(e==null?void 0:e.t)||((a=t==null?void 0:t.getAttribute)==null?void 0:a.call(t,"data-skruv-key"))&&((c=t==null?void 0:t.getAttribute)==null?void 0:c.call(t,"data-skruv-key"))!==((d=e==null?void 0:e.a)==null?void 0:d["data-skruv-key"]))&&(typeof e=="string"||typeof e=="number"?t=(x.text||(x.text=s.createTextNode(""))).cloneNode():l||e.t==="svg"?t=(x[e.t]||(x[e.t]=s.createElementNS("http://www.w3.org/2000/svg",e.t))).cloneNode():t=(x[e.t]||(x[e.t]=s.createElement(e.t))).cloneNode(),n?i.replaceChild(t,n):i.appendChild(t),(p=e==null?void 0:e.a)!=null&&p.oncreate&&e.a.oncreate(t)),typeof e=="string"||typeof e=="number")return""+t.data!=""+e&&(t.data=e),!0;e._r&&(e._r._r=()=>A(e,t,i,l));for(let o in e.a)if(o[0]==="o"&&o[1]==="n"){let m=o.slice(2);!t[w+o]||""+t[w+o]!=""+e.a[o]?(t[w+o]&&t.removeEventListener(m,t[w+o]),t.addEventListener(m,e.a[o]),t[w+o]=e.a[o]):e.a[o]||t.removeEventListener(m,t[w+o])}else e.a[o]!==t.getAttribute(o)&&((typeof e.a[o]=="boolean"&&(e.t==="INPUT"&&o==="checked"||e.t==="OPTION"&&o==="selected")||typeof e.a[o]=="object")&&(t[o]=e.a[o]),e.a[o]?t.setAttribute(o,""+e.a[o]):t.removeAttribute(o));let f=e.c.flat(1/0);if(!f.length&&t.childNodes.length)return e.a["data-skruv-wait-for-not-empty"]||t.replaceChildren(),!0;if(t.childNodes.length>f.length)for(let o=f.length;o<t.childNodes.length;o++)t.removeChild(t.childNodes[o]);for(let o=0;o<f.length;o++){if(S.has(f[o])){let m=S.get(f[o]);m!==t.childNodes[o]&&(m===t.childNodes[o+1]?t.removeChild(t.childNodes[o]):S.has(f[o+1])&&S.get(f[o+1])===t.childNodes[o]?t.insertBefore(m,t.childNodes[o]):t.childNodes[o]?t.replaceChild(m,t.childNodes[o]):t.appendChild(m),S.set(f[o],t.childNodes[o]));continue}A(f[o],t.childNodes[o]||!1,t,l)}return S.set(e,t),!0},K=new Proxy({},{get:(e,n)=>(...i)=>C(n,...i)});var R=()=>{},F=new Promise(e=>{R=e}),k=new Map,Z=e=>{let n=0;if(e.length===0)return n.toString();for(let i=0;i<e.length;i++)n=(n<<5)-n+e.charCodeAt(i),n|=0;return n.toString()},z=(e,...n)=>{var M;let i=e.reduce((r,y,h)=>{var u;return r.push(y),r.push(((u=n==null?void 0:n[h])==null?void 0:u.toString())||""),r},[]).join(""),l=/^\[.*?(?:(["'])(?:.|\\\1)*\1.*)*\]/,t=/([([,]|:scope\b)/,s=/^:scope\b/;function f(r,y){let h=r.search(t);if(h===-1)return{selector:`${y} ${r}`,rest:""};if(r[h]===",")return{selector:`${y} ${r.substring(0,h)}`,rest:r.substring(h+1)};let u=!0,D=!1;h=r.search(/\S/);let T=0;e:for(;h<r.length;++h){let G=r[h];switch(G){case"[":{let I=l.exec(r.substring(h));h+=(I?I[0].length:1)-1;continue}case"(":++T;continue;case":":if(u)if(s.test(r.substring(h))){if(T)return null}else continue;else continue;r=r.substring(0,h)+y+r.substring(h+6),h+=y.length,D=!0,--h;continue;case")":T&&--T;continue}if(!T)switch(G){case",":break e;case" ":case">":case"~":case"+":if(!u)continue;u=!1}}return{selector:(D?"":`${y} `)+r.substring(0,h),rest:r.substring(h+1)}}function a(r,y){let h=[];for(;r;){let u=f(r,y);if(u===null)return":not(*)";h.push(u.selector),r=u.rest}return h.join(", ")}function c(r,y){if(r instanceof CSSMediaRule){let h=r.cssRules.length;for(let u=0;u<h;++u)c(r.cssRules[u],y);return}r instanceof CSSStyleRule&&(r.selectorText=a(r.selectorText,y))}let d=Z(i),p=`skruv-css-scope-${d}`,o=`.${p}`;if(k.has(d))return p;let m;if(!(globalThis!=null&&globalThis.CSSOM)&&!((M=globalThis.document)!=null&&M.implementation))throw new Error("No css parser available. Either add CSSOM to globalThis or run in browser.");if(globalThis!=null&&globalThis.CSSOM)m=CSSOM.parse(i);else{let r=globalThis.document.implementation.createHTMLDocument(""),y=r.createElement("style");y.innerText=i,r.body.append(y),m=y.sheet,r.body.removeChild(y)}Array.from((m==null?void 0:m.cssRules)||[]).forEach(r=>c(r,o));let W=Array.from((m==null?void 0:m.cssRules)||[]).map(r=>r.cssText||"").join("");return k.set(d,W),R(),p};async function*L(){for(yield Array.from(k.values()).join("");;)await F,yield Array.from(k.values()).join(""),F=new Promise(e=>{R=e})}var q=(globalThis==null?void 0:globalThis.requestAnimationFrame)||(e=>setTimeout(e,0)),V=e=>{let n=class{constructor(t){this.name=t,this._scheduled=!1,this._skruv_promise=new Promise(s=>{this._skruv_resolve=s})}_resolve(){this._skruv_parent&&this._skruv_parent._resolve&&this._skruv_parent._resolve(),!this._scheduled&&(this._scheduled=!0,q(()=>{this._skruv_resolve(),this._skruv_promise=new Promise(t=>{this._skruv_resolve=t}),this._scheduled=!1}))}set(t,s,f){return s==="_skruv_parent"?(this._skruv_parent=f,!0):(t[s]!==f&&(t[s]=this.recurse(s,f,t)),!0)}get(t,s,f){return s==="getGenerator"?a=>({key:[a,t],[Symbol.asyncIterator]:()=>{let c=!1;return{next:async()=>(c?await this._skruv_promise:c=!0,{done:!1,value:f[a]})}}}):s==="skruv_resolve"?()=>this._resolve():s==="toJSON"?t.constructor===Object?Object.getOwnPropertyNames(t).reduce((a,c)=>{var d;return a[c]=((d=t[c])==null?void 0:d.toJSON)||t[c],a},{}):t.constructor===Array?t.map(a=>(a==null?void 0:a.toJSON)||a):t:s===Symbol.asyncIterator?()=>{let a=!1;return{next:async()=>(a?await this._skruv_promise:a=!0,{done:!1,value:f})}}:t[s]}deleteProperty(t,s){let f=delete t[s];return this._resolve(),f}recurse(t,s,f){var a;if(s&&s.constructor)if(s.constructor===Object&&((a=f==null?void 0:f[t])==null?void 0:a.constructor)===Object){for(let c of Object.getOwnPropertyNames(s))f[t][c]!==s[c]&&(f[t][c]=s[c]);for(let c of Object.getOwnPropertyNames(f[t]).filter(d=>!Object.getOwnPropertyNames(s).includes(d)))delete f[t][c],this._resolve();return f[t]}else if(s.constructor===Object){let c=new this.constructor(`${this.name}.${t}`);s=Object.keys(s).reduce((d,p)=>(d[p]=this.recurse(`${t}.${p}`,s[p]),typeof d[p]=="object"&&d[p]!==null&&(d[p]._skruv_parent=c),d),{}),s=new Proxy(s,c),s._skruv_parent=this,this._resolve()}else if(s.constructor===Array){let c=new this.constructor(`${this.name}.${t}`);s=s.map((d,p)=>{let o=this.recurse(`${t}[${p}]`,d);return typeof o=="object"&&o!==null&&(o._skruv_parent=c),o}),s=new Proxy(s,c),s._skruv_parent=this,this._resolve()}else this._resolve();else this._resolve();return s}},i=new Proxy(e.constructor===Array?[]:{},new n("root"));return Object.assign(i,e),i};var b=!0,j=new WeakMap,$=()=>{},te=new Promise(e=>{$=()=>e(!0)}),O=new Set,H=(e,n,i,l,t)=>{var s;return b&&!(typeof t=="object"&&"a"in t&&((s=t==null?void 0:t.a)==null?void 0:s["data-skruv-finished"])===!1)&&(O.delete(e),O.size||(b=!1,setTimeout(()=>$(),0))),j.set(e,t),i[n]=t,l._r._r()},P=(e,n,i,l,t=!0)=>{if(typeof e=="string"||typeof e=="number"||typeof e=="boolean"||e===null)return e;if(j.has(e))return j.get(e);if(typeof e=="object"&&Symbol.asyncIterator in e||typeof e=="function"&&e.constructor.name==="AsyncGeneratorFunction")return b&&O.add(e),j.set(e,null),(async()=>{for await(let s of typeof e=="function"?e():e)if(!H(e,n,i,l,P(s,n,i,l,!1)))break})(),null;if(typeof e=="object"&&"then"in e&&typeof e.then=="function"||typeof e=="function"&&e.constructor.name==="AsyncFunction")return b&&O.add(e),j.set(e,null),(async()=>H(e,n,i,l,P(await(typeof e=="function"?e():e),n,i,l,!1)))(),null;if(typeof e=="function"){if(typeof n=="string"&&(n[0]==="o"&&n[1]==="n"||n[0]==="_"))return e;let s=P(e(),n,i,l,!1);return j.set(e,s),s}if(typeof e=="object"){let s={_r:{_r:()=>((b&&!O.size||!b)&&(b=!1,setTimeout(()=>$(),0)),!0)}},f=s;Array.isArray(e)&&(s=[],f=l),n==="a"&&(s={},f=l);for(let a in e){let c=P(e[a],a,s,f,!1);(c!==null||e[a]===null)&&(s[a]=c)}return(t&&b&&!O.size||!b)&&(b=!1,setTimeout(()=>$(),0)),s}return e};var J=e=>e.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(n,i)=>(i?"-":"")+n.toLowerCase()),U="#fragment",_=(e,n={})=>g(e,n),g=(e,n={})=>{if(e===U&&n.children)return n.children;if(e===U)return[];let{children:i,...l}=n;return Object.keys(l).filter(t=>t!==J(t)).forEach(t=>{l[J(t)]=l[t],delete l[t]}),l["class-name"]&&(l.class=l["class-name"],delete l["class-name"]),l["html-for"]&&(l.for=l["html-for"],delete l["html-for"]),i?C(e,l||{},i):C(e,l||{})};var E=V({todos:["Write todos"]}),v=z`:scope{color:#f1f1f1;background:#0f0f0f}body{max-width:40ch;margin:0 auto}form{display:flex}input{flex:1}a{color:#9b9b9b}`;A(P(g("html",{lang:"en-US",class:v,children:[g("head",{children:[_("title",{children:E.todos.getGenerator(0)}),_("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),_("style",{children:L})]}),_("body",{children:g("main",{children:[_("h1",{children:E.todos.getGenerator(0)}),g("form",{onsubmit:e=>{e.preventDefault(),E.todos.unshift(new FormData(e.target).get("todo")),e.target.reset()},children:[_("input",{name:"todo"}),_("button",{children:"New!"})]}),_("ol",{children:async function*(){for await(let e of E.todos)yield e.map((n,i)=>g("li",{children:[n," ",_("a",{href:"#",onclick:l=>{l.preventDefault(),e.splice(i,1)},children:"x"})]}))}})]})})]})));
//# sourceMappingURL=index.min.js.map
