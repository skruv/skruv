var M=Symbol.for("skruvDom"),_="data-event-",z=(e,...n)=>{var r,d,t;return{s:M,t:e.toUpperCase(),...!((r=n[0])!=null&&r[Symbol.asyncIterator])&&((d=n[0])==null?void 0:d.constructor)===Object&&((t=n[0])==null?void 0:t.s)!==M?{a:n[0],c:n.slice(1)}:{a:{},c:n}}},g=new WeakMap,S={},P=(e,n=globalThis.document.documentElement,r=n.parentNode,d=!1)=>{var c,f,h;let t=n,o=(r==null?void 0:r.ownerDocument)||t.ownerDocument;if(!r||!o||t&&!r.contains(t))return!1;if(typeof e=="boolean"||e===null||e===void 0)return t&&r.removeChild(t),!0;if(((typeof e=="string"||typeof e=="number")&&(t==null?void 0:t.nodeName)!=="#text"||(e==null?void 0:e.t)&&(t==null?void 0:t.nodeName)!==(e==null?void 0:e.t)||(t==null?void 0:t._skruvKey)!==((c=e==null?void 0:e.a)==null?void 0:c._key))&&(typeof e=="string"||typeof e=="number"?t=(S.text||(S.text=o.createTextNode(""))).cloneNode():d||e.t==="svg"?t=(S[e.t]||(S[e.t]=o.createElementNS("http://www.w3.org/2000/svg",e.t))).cloneNode():t=(S[e.t]||(S[e.t]=o.createElement(e.t))).cloneNode(),n?r.replaceChild(t,n):r.appendChild(t),t._skruvKey=(f=e==null?void 0:e.a)==null?void 0:f._key,(h=e==null?void 0:e.a)!=null&&h.oncreate&&e.a.oncreate(t)),typeof e=="string"||typeof e=="number")return""+t.data!=""+e&&(t.data=e),!0;e._r&&(e._r._r=()=>P(e,t,r,d));for(let s in e.a)if(s[0]==="o"&&s[1]==="n"){let y=s.slice(2);!t[_+s]||""+t[_+s]!=""+e.a[s]?(t[_+s]&&t.removeEventListener(y,t[_+s]),t.addEventListener(y,e.a[s]),t[_+s]=e.a[s]):e.a[s]||t.removeEventListener(y,t[_+s])}else e.a[s]!==t.getAttribute(s)&&((typeof e.a[s]=="boolean"&&(e.t==="INPUT"&&s==="checked"||e.t==="OPTION"&&s==="selected")||typeof e.a[s]=="object")&&(t[s]=e.a[s]),e.a[s]?t.setAttribute(s,""+e.a[s]):t.removeAttribute(s));let l=e.c.flat(1/0);if(!l.length&&t.childNodes.length)return e.a["data-skruv-wait-for-not-empty"]||t.replaceChildren(),!0;if(t.childNodes.length>l.length)for(let s=l.length;s<t.childNodes.length;s++)t.removeChild(t.childNodes[s]);for(let s=0;s<l.length;s++){if(g.has(l[s])){let y=g.get(l[s]);y!==t.childNodes[s]&&(y===t.childNodes[s+1]?t.removeChild(t.childNodes[s]):g.has(l[s+1])&&g.get(l[s+1])===t.childNodes[s]?t.insertBefore(y,t.childNodes[s]):t.childNodes[s]?t.replaceChild(y,t.childNodes[s]):t.appendChild(y),g.set(l[s],t.childNodes[s]));continue}P(l[s],t.childNodes[s]||!1,t,d)}return g.set(e,t),!0},D=new Proxy({},{get:(e,n)=>(...r)=>z(n,...r)});var A=()=>{},G=new Promise(e=>{A=e}),T=new Map,H=e=>{let n=0;if(e.length===0)return n.toString();for(let r=0;r<e.length;r++)n=(n<<5)-n+e.charCodeAt(r),n|=0;return n.toString()},I=(e,...n)=>{var N;let r=e.reduce((i,m,a)=>{var p;return i.push(m),i.push(((p=n==null?void 0:n[a])==null?void 0:p.toString())||""),i},[]).join(""),d=/^\[.*?(?:(["'])(?:.|\\\1)*\1.*)*\]/,t=/([([,]|:scope\b)/,o=/^:scope\b/;function l(i,m){let a=i.search(t);if(a===-1)return{selector:`${m} ${i}`,rest:""};if(i[a]===",")return{selector:`${m} ${i.substring(0,a)}`,rest:i.substring(a+1)};let p=!0,$=!1;a=i.search(/\S/);let O=0;e:for(;a<i.length;++a){let R=i[a];switch(R){case"[":{let E=d.exec(i.substring(a));a+=(E?E[0].length:1)-1;continue}case"(":++O;continue;case":":if(p)if(o.test(i.substring(a))){if(O)return null}else continue;else continue;i=i.substring(0,a)+m+i.substring(a+6),a+=m.length,$=!0,--a;continue;case")":O&&--O;continue}if(!O)switch(R){case",":break e;case" ":case">":case"~":case"+":if(!p)continue;p=!1}}return{selector:($?"":`${m} `)+i.substring(0,a),rest:i.substring(a+1)}}function c(i,m){let a=[];for(;i;){let p=l(i,m);if(p===null)return":not(*)";a.push(p.selector),i=p.rest}return a.join(", ")}function f(i,m){if(i instanceof CSSMediaRule){let a=i.cssRules.length;for(let p=0;p<a;++p)f(i.cssRules[p],m);return}i instanceof CSSStyleRule&&(i.selectorText=c(i.selectorText,m))}let h=H(r),s=`skruv-css-scope-${h}`,y=`.${s}`;if(T.has(h))return s;let b;if(!(globalThis!=null&&globalThis.CSSOM)&&!((N=globalThis.document)!=null&&N.implementation))throw new Error("No css parser available. Either add CSSOM to globalThis or run in browser.");if(globalThis!=null&&globalThis.CSSOM)b=CSSOM.parse(r);else{let i=globalThis.document.implementation.createHTMLDocument(""),m=i.createElement("style");m.innerText=r,i.body.append(m),b=m.sheet,i.body.removeChild(m)}Array.from((b==null?void 0:b.cssRules)||[]).forEach(i=>f(i,y));let v=Array.from((b==null?void 0:b.cssRules)||[]).map(i=>i.cssText||"").join("");return T.set(h,v),A(),s};async function*F(){for(yield Array.from(T.values()).join("");;)await G,yield Array.from(T.values()).join(""),G=new Promise(e=>{A=e})}var J=(globalThis==null?void 0:globalThis.requestAnimationFrame)||(e=>setTimeout(e,0)),L=e=>{let n=class{constructor(t){this.name=t,this._scheduled=!1,this._skruv_promise=new Promise(o=>{this._skruv_resolve=o})}_resolve(){this._skruv_parent&&this._skruv_parent._resolve&&this._skruv_parent._resolve(),!this._scheduled&&(this._scheduled=!0,J(()=>{this._skruv_resolve(),this._skruv_promise=new Promise(t=>{this._skruv_resolve=t}),this._scheduled=!1}))}set(t,o,l){return o==="_skruv_parent"?(this._skruv_parent=l,!0):(t[o]!==l&&(t[o]=this.recurse(o,l,t)),!0)}get(t,o,l){return o==="getGenerator"?c=>({key:[c,t],[Symbol.asyncIterator]:()=>{let f=!1;return{next:async()=>(f?await this._skruv_promise:f=!0,{done:!1,value:l[c]})}}}):o==="skruv_resolve"?()=>this._resolve():o==="toJSON"?t.constructor===Object?Object.getOwnPropertyNames(t).reduce((c,f)=>{var h;return c[f]=((h=t[f])==null?void 0:h.toJSON)||t[f],c},{}):t.constructor===Array?t.map(c=>(c==null?void 0:c.toJSON)||c):t:o===Symbol.asyncIterator?()=>{let c=!1;return{next:async()=>(c?await this._skruv_promise:c=!0,{done:!1,value:l})}}:t[o]}deleteProperty(t,o){let l=delete t[o];return this._resolve(),l}recurse(t,o,l){var c;if(o&&o.constructor)if(o.constructor===Object&&((c=l==null?void 0:l[t])==null?void 0:c.constructor)===Object){for(let f of Object.getOwnPropertyNames(o))l[t][f]!==o[f]&&(l[t][f]=o[f]);for(let f of Object.getOwnPropertyNames(l[t]).filter(h=>!Object.getOwnPropertyNames(o).includes(h)))delete l[t][f],this._resolve();return l[t]}else if(o.constructor===Object){let f=new this.constructor(`${this.name}.${t}`);o=Object.keys(o).reduce((h,s)=>(h[s]=this.recurse(`${t}.${s}`,o[s]),typeof h[s]=="object"&&h[s]!==null&&(h[s]._skruv_parent=f),h),{}),o=new Proxy(o,f),o._skruv_parent=this,this._resolve()}else if(o.constructor===Array){let f=new this.constructor(`${this.name}.${t}`);o=o.map((h,s)=>{let y=this.recurse(`${t}[${s}]`,h);return typeof y=="object"&&y!==null&&(y._skruv_parent=f),y}),o=new Proxy(o,f),o._skruv_parent=this,this._resolve()}else this._resolve();else this._resolve();return o}},r=new Proxy(e.constructor===Array?[]:{},new n("root"));return Object.assign(r,e),r};var u=!0,w=new WeakMap,C=()=>{},he=new Promise(e=>{C=()=>e(!0)}),x=new Set,V=(e,n,r,d,t)=>{var o;return u&&!(typeof t=="object"&&"a"in t&&((o=t==null?void 0:t.a)==null?void 0:o["data-skruv-finished"])===!1)&&(x.delete(e),x.size||(u=!1,C())),w.set(e,t),r[n]=t,d._r._r()},j=(e,n,r,d,t=!0)=>{if(typeof e=="string"||typeof e=="number"||typeof e=="boolean"||e===null)return e;if(w.has(e))return w.get(e);if(typeof e=="object"&&Symbol.asyncIterator in e||typeof e=="function"&&e.constructor.name==="AsyncGeneratorFunction")return u&&x.add(e),w.set(e,null),(async()=>{for await(let o of typeof e=="function"?e():e)if(!V(e,n,r,d,j(o,n,r,d,!1)))break})(),null;if(typeof e=="object"&&"then"in e&&typeof e.then=="function"||typeof e=="function"&&e.constructor.name==="AsyncFunction")return u&&x.add(e),w.set(e,null),(async()=>V(e,n,r,d,j(await(typeof e=="function"?e():e),n,r,d,!1)))(),null;if(typeof e=="function"){if(typeof n=="string"&&(n[0]==="o"&&n[1]==="n"||n[0]==="_"))return e;let o=j(e(),n,r,d,!1);return w.set(e,o),o}if(typeof e=="object"){let o={_r:{_r:()=>((u&&!x.size||!u)&&(u=!1,C()),!0)}},l=o;Array.isArray(e)&&(o=[],l=d),n==="a"&&(o={},l=d);for(let c in e){let f=j(e[c],c,o,l,!1);(f!==null||e[c]===null)&&(o[c]=f)}return(t&&u&&!x.size||!u)&&(u=!1,C()),o}return e};var{html:U,head:W,title:K,meta:q,body:B,main:Q,h1:X,form:Y,input:Z,button:ee,ol:te,li:se,a:oe,style:ne,script:ie}=D,k=L({todos:["Write todos"]}),re=I`:scope{color:#f1f1f1;background:#0f0f0f}body{max-width:40ch;margin:0 auto}form{display:flex}input{flex:1}a{color:#9b9b9b}`;P(j(U({lang:"en-US",class:re},W(K(k.todos.getGenerator(0)),q({name:"viewport",content:"width=device-width, initial-scale=1"}),ne(F)),B(Q(X(k.todos.getGenerator(0)),Y({onsubmit:e=>{e.preventDefault(),k.todos.unshift(new FormData(e.target).get("todo")),e.target.reset()}},Z({type:"text",name:"todo"}),ee("New!")),async function*(){for await(let e of k)yield te(e.todos.map((n,r)=>se(`${n} `,oe({href:"#",onclick:d=>{d.preventDefault(),e.todos.splice(r,1)}},"x"))))}),!!globalThis.skruvSSRScript&&ie({type:"module"},globalThis.skruvSSRScript)))));
//# sourceMappingURL=index.min.js.map
