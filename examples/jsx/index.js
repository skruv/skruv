var Y=(self==null?void 0:self.requestAnimationFrame)||(e=>setTimeout(e,0));var T=()=>{},I=new Promise(e=>{T=e}),P=new Map,B=e=>{let t=0;if(e.length===0)return t.toString();for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return t.toString()},$=async(e,...t)=>{var m;let r=e.reduce((n,c,f)=>{var y;return n.push(c),n.push(((y=t==null?void 0:t[f])==null?void 0:y.toString())||""),n},[]).join(""),o=/^\[.*?(?:(["'])(?:.|\\\1)*\1.*)*\]/,l=/([([,]|:scope\b)/,h=/^:scope\b/;function a(n,c){let f=n.search(l);if(f===-1)return{selector:`${c} ${n}`,rest:""};if(n[f]===",")return{selector:`${c} ${n.substring(0,f)}`,rest:n.substring(f+1)};let y=!0,v=!1;f=n.search(/\S/);let k=0;e:for(;f<n.length;++f){let G=n[f];switch(G){case"[":{let H=o.exec(n.substring(f));f+=(H?H[0].length:1)-1;continue}case"(":++k;continue;case":":if(y)if(h.test(n.substring(f))){if(k)return null}else continue;else continue;n=n.substring(0,f)+c+n.substring(f+6),f+=c.length,v=!0,--f;continue;case")":k&&--k;continue}if(!k)switch(G){case",":break e;case" ":case">":case"~":case"+":if(!y)continue;y=!1}}return{selector:(v?"":`${c} `)+n.substring(0,f),rest:n.substring(f+1)}}function d(n,c){let f=[];for(;n;){let y=a(n,c);if(y===null)return":not(*)";f.push(y.selector),n=y.rest}return f.join(", ")}function p(n,c){if(n instanceof CSSMediaRule){let f=n.cssRules.length;for(let y=0;y<f;++y)p(n.cssRules[y],c);return}n instanceof CSSStyleRule&&(n.selectorText=d(n.selectorText,c))}let S=await B(r),g=`skruv-css-scope-${S}`,A=`.${g}`;if(P.has(S))return g;let s;if(!(self!=null&&self.CSSOM)&&!((m=self.document)!=null&&m.implementation))return"";if(self!=null&&self.CSSOM)s=CSSOM.parse(r);else{let n=self.document.implementation.createHTMLDocument(""),c=n.createElement("style");c.innerText=r,n.body.append(c),s=c.sheet,n.body.removeChild(c)}Array.from((s==null?void 0:s.cssRules)||[]).forEach(n=>p(n,A));let i=Array.from((s==null?void 0:s.cssRules)||[]).map(n=>n.cssText||"").join("");return P.set(S,i),T(),g};async function*J(){for(yield Array.from(P.values()).join("");;)await I,yield Array.from(P.values()).join(""),I=new Promise(e=>{T=e})}var M=Symbol.for("skruvDom"),x=Symbol.for("skruvDomPrepared"),_=new WeakMap,C=new WeakMap,R=new WeakMap,V=()=>{},D=new Promise(e=>{V=()=>e()}),w=new Set,u=(self==null?void 0:self.SkruvWaitForAsync)||!!document.querySelector("data-skruv-ssr-rendered");var E=(e,...t)=>{var r,o,l,h,a;return{s:M,t:e,...typeof t[0]=="object"&&!Array.isArray(t[0])&&!(t[0]instanceof Function)&&!(t[0]instanceof Function&&((l=(o=(r=t[0])==null?void 0:r.prototype)==null?void 0:o.toString)==null?void 0:l.call(o))==="[object AsyncGenerator]")&&!((h=t[0])!=null&&h[Symbol.asyncIterator])&&((a=t[0])==null?void 0:a.s)!==M?{_a:t[0],_c:t.slice(1)}:{_a:{},_c:t},r:{r:()=>(u&&!w.size&&(u=!1,V()),!0)}}},F=(e,t,r)=>{var l,h;let o=(a,d)=>{var p;return u&&((p=d==null?void 0:d._a)==null?void 0:p["data-skruv-finished"])!==!1&&(w.delete(a),d&&((d==null?void 0:d.s)===M?j(d):F(d,t,r))),_.set(a,d),t.r.r()};if(_.has(e))return _.get(e);if(typeof e=="object"&&(e==null?void 0:e[Symbol.asyncIterator])){let a=e;return u&&w.add(a),_.set(a,null),(async()=>{for await(let d of a)if(!o(e,d))break})(),!1}else{if(e instanceof Function&&((h=(l=e==null?void 0:e.prototype)==null?void 0:l.toString)==null?void 0:h.call(l))==="[object AsyncGenerator]")return u&&w.add(e),_.set(e,null),(async()=>{for await(let a of e())if(!o(e,a))break})(),!1;if(typeof e=="object"&&e!==null&&(e==null?void 0:e.then)instanceof Function){let a=e;return u&&w.add(e),_.set(a,null),(async()=>o(a,await a))(),!1}else{if(typeof e=="function"&&e.constructor.name==="AsyncFunction")return u&&w.add(e),_.set(e,null),(async()=>o(e,await e()))(),!1;if(typeof e=="function")return r?e():e;if(typeof e=="string"||typeof e=="number")return r?E("#text",{data:e.toString()}):e.toString();if(typeof e=="boolean")return e}}throw new Error("Unkown type in syncify: "+JSON.stringify(e))},W=(e,t)=>{let r=e.flat(1/0).map(o=>(o==null?void 0:o.s)===M?j(o):F(o,t,!0)).flat(1/0).filter(o=>o!==null&&typeof o!="boolean"&&typeof o!="undefined");return r.find(o=>(o==null?void 0:o.p)!==x)!==void 0?W(r,t):r},j=e=>{let t=Object.fromEntries(Object.entries(e._a).filter(r=>r[1]!==null&&typeof r[1]!="undefined").map(([r,o])=>r==="data-skruv-key"?[r,o]:[r,F(o,e,!1)]).filter(r=>r[1]!==null&&typeof r[1]!="undefined"));return{p:x,...e,a:t,c:W(e._c,e)}},L=(e,t,r,o)=>{var A;if(e.p!==x)throw new Error("unkown type in render: "+JSON.stringify(e));for(let s of e.c)if(s.p!==x)throw new Error("unkown type in render: "+JSON.stringify(s));if(!r||t&&!r.contains(t))return!1;let l=t.ownerDocument,h=l.documentElement;for(let s of t.getAttributeNames().filter(i=>!Object.keys(e.a).includes(i)))t.removeAttribute(s);for(let[s,i]of Object.entries(e.a))if(s!=="data-skruv-key"){if(s.slice(0,2)==="on"){let m=C.get(t),n=m==null?void 0:m[s],c=s.slice(2);if(m||(m={},C.set(t,m)),i instanceof Function){n&&n.toString()!==i.toString()&&(t.removeEventListener(c,n),m[s]=null),n||(m[s]=i,t.addEventListener(c,i));continue}n&&!i&&(t.removeEventListener(c,n),m[s]=null)}if(i===null||i===!1){t.getAttribute(s)&&t.removeAttribute(s);continue}t.setAttribute(s,i.toString()),s==="value"&&(typeof i=="number"||typeof i=="string")&&t instanceof HTMLInputElement&&(t[s]=i.toString()),(typeof i=="boolean"&&(t instanceof HTMLInputElement&&s==="checked"||t instanceof HTMLOptionElement&&s==="selected")||typeof i=="object")&&(t[s]=i)}if(e.r.r=()=>L(j(e),t,r,o),e.a["data-skruv-opaque"])return!0;let a=Array.from(t.childNodes),d=e.c,p=[],S=(s,i)=>s.nodeName.toLowerCase()===i.t&&!p.includes(s);for(let s=0;s<d.length;s++){let i=d[s],m=i.a["data-skruv-key"]?R.get(i.a["data-skruv-key"]):a.find(n=>S(n,i));m?p[s]=m:p[s]=null}let g=a.filter(s=>!p.includes(s));if(e.c.length||!e.a["data-skruv-wait-for-not-empty"])for(let s of g.filter(i=>!!i))t.removeChild(s),setTimeout(()=>{var i;!(h!=null&&h.contains(s))&&((i=C.get(s))==null?void 0:i.onremove)&&s.dispatchEvent(new CustomEvent("remove"))},1);for(let s=0;s<p.length;s++){let i=e.c[s],m=!1;if(p[s]){if(p[s]!==t.childNodes[s]){let c=p[s];c&&(s===0?t.prepend(c):t.childNodes[s-1].after(c))}}else{let c;e.t==="#comment"?c=l.createComment(""):i.t==="#text"?c=l.createTextNode(""):i.p===x&&(o||i.t==="svg")?c=l.createElementNS("http://www.w3.org/2000/svg",i.t):c=l.createElement(i.t),m=!0,t.childNodes[s]?t.replaceChild(c,t.childNodes[s]):s===0?t.prepend(c):t.childNodes[s-1].after(c)}let n=t.childNodes[s];if(n instanceof Text||n instanceof Comment){n.data!==i.a.data&&(n.data=i.a.data.toString());continue}if(!(n instanceof HTMLElement||n instanceof SVGElement))throw new Error("Child node of unkown type: "+JSON.stringify({childNode:n,child:i}));i.a["data-skruv-key"]&&!R.has(i.a["data-skruv-key"])&&R.set(i.a["data-skruv-key"],n),L(i,n,t,o||e.t==="svg"),m&&((A=C.get(n))==null?void 0:A.oncreate)&&n.dispatchEvent(new CustomEvent("create"))}return!0},q=async(e,t=self.document.documentElement,r=t==null?void 0:t.parentNode,o=!1)=>{if(!r)throw new Error("Skruv: No parent to render to");if(!(r instanceof HTMLElement||r instanceof SVGElement||r instanceof Document||r instanceof Window))throw new Error("Skruv: Parent of wrong type");u&&(j(e).r.r(),await D),L(j(e),t,r,o)},Z={},te=new Proxy(Z,{get:(e,t)=>(...r)=>E(t,...r)});var z=e=>e.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(t,r)=>(r?"-":"")+t.toLowerCase()),U="#fragment",b=(e,t={})=>O(e,t),O=(e,t={})=>{if(e===U&&t.children)return t.children;if(e===U)return[];let{children:r,...o}=t;return Object.keys(o).filter(l=>l!==z(l)).forEach(l=>{o[z(l)]=o[l],delete o[l]}),o["class-name"]&&(o.class=o["class-name"],delete o["class-name"]),o["html-for"]&&(o.for=o["html-for"],delete o["html-for"]),r?E(e,o||{},...r):E(e,o||{})};var K=$`
:root {
  font-family: -apple-system, BlinkMacSystemFont, avenir next, avenir, segoe ui, helvetica neue, helvetica, Cantarell, Ubuntu, roboto, noto, arial, sans-serif;
}
`,Q=$`
:scope {
  border: 1px solid;
}

p {
  color: blue;
}
`;q(O("html",{lang:"en-US",class:K,children:[O("head",{children:[b("title",{children:"jsx"}),b("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),b("style",{children:J})]}),O("body",{children:[b("div",{class:Q,children:b("p",{children:"blue text"})}),b("div",{children:b("p",{children:"default text"})})]})]}));
//# sourceMappingURL=index.js.map
