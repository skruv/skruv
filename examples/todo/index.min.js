var O="http://www.w3.org/1999/xhtml",p=new WeakMap,j=new WeakMap,D=new WeakMap,R={},d=(t,e=globalThis.document.documentElement,S=e.parentNode,a=O,u=!1)=>{if(!S)throw new Error("No parent to render to");if(typeof t=="boolean"||typeof t>"u"){e&&S.removeChild(e);return}if(!globalThis?.isSkruvSSR&&t?.t?.toLowerCase()==="skruvtext"&&t?.c?.[0]){t.r=()=>!e||!S.contains(e)?!1:(d(t,e,S,a),!0),d(t?.c?.[0],e);return}let r=typeof t=="string"||typeof t=="number";if(u||!e||r&&e.nodeName!=="#text"||!r&&e.nodeName.toLowerCase()!==t.t.toLowerCase()){let i=e;if(r?e=document.createTextNode(""+t):(t.t==="svg"&&(a="http://www.w3.org/2000/svg"),t.t==="math"&&(a="http://www.w3.org/1998/Math/MathML"),t.t==="feed"&&(a="http://www.w3.org/2005/Atom"),(t.t==="urlset"||t.t==="sitemapindex")&&(a="https://www.sitemaps.org/schemas/sitemap/0.9"),e=(R[t.t]||(R[t.t]=document.createElementNS(a,t.t))).cloneNode(!1)),i?S.replaceChild(e,i):S.appendChild(e),r)return}if(r){e.textContent!=t&&(e.textContent=""+t);return}t.r&&(t.r=()=>!e||!S.contains(e)?!1:(d(t,e,S,a),!0)),t.t==="foreignObject"&&(a=O);let l=t.c.flat(1/0);globalThis?.isSkruvSSR||(l=l.filter(i=>!i?.t?.startsWith("skruv")));let s={};if(l[0]?.constructor===Object&&!l[0]?.isSkruvDom){s=l[0],l=l.slice(1);let i=D.get(e);i||(i={},D.set(e,i));for(let[n,b]of Object.entries(s))if(""+i[n]!=""+b){if(n==="skruvAfterCreate"){setTimeout(()=>b(e),0),i[n]=b;continue}if(!n.startsWith("skruv")){if(n[0]==="o"&&n[1]==="n"){let c=n.slice(2);i[n]?b||e.removeEventListener(c,b):(i[n]&&e.removeEventListener(c,b),e.addEventListener(c,b)),i[n]=b;continue}(n==="checked"||n==="selected"||n==="value"||e.nodeName.includes("-"))&&(e[n]=b),b!==void 0?e.setAttribute(n,""+b):e.removeAttribute(n),i[n]=b}}}for(let i of e.getAttributeNames().filter(n=>!Object.keys(s).includes(n)))e.removeAttribute(i);if(!l.length&&e.childNodes.length){if(s.skruvWaitForNotEmpty)return;e.replaceChildren();return}if(e.childNodes.length>l.length)for(let i=e.childNodes.length-1;i>=l.length;i--)e.removeChild(e.childNodes[i]);for(let i=0;i<l.length;i++){let n=!1,b;if(l[i]?.c)if(b=p.get(l[i].c[0]?.skruvKey),b){if(b!==e.childNodes[i]&&(b===e.childNodes[i+1]?e.removeChild(e.childNodes[i]):e.childNodes[i]&&p.get(l[i+1]?.c?.[0]?.skruvKey)===e.childNodes[i]?e.insertBefore(b,e.childNodes[i]):e.childNodes[i]?e.replaceChild(b,e.childNodes[i]):e.appendChild(b)),n=l[i].c[0].skruvKey!==j.get(e.childNodes[i]),!n){let c=p.get(e.childNodes[i]);if(c){let m=!0;for(let G in l[i].c[0].skruvKey)l[i].c[0].skruvKey[G]!==c[G]&&(m=!1);if(m)continue}}}else n=p.has(e.childNodes[i]);d(l[i],e.childNodes[i]||!1,e,a,n)}s.skruvKey&&(p.set(s.skruvKey,e),j.set(e,s.skruvKey),p.set(e,{...s.skruvKey}))},Q=new Proxy({},{get:(t,e)=>(...S)=>({isSkruvDom:!0,t:e,c:S})});var x=()=>{},E=new Promise(t=>{x=t}),w=new Map,U=t=>{let e=0;if(t.length===0)return e.toString();for(let S=0;S<t.length;S++)e=(e<<5)-e+t.charCodeAt(S),e|=0;return e.toString()},I=(t,...e)=>{let S=t.reduce((o,A,k)=>(o.push(A),o.push(e?.[k]?.toString()||""),o),[]).join(""),a=/^\[.*?(?:(["'])(?:.|\\\1)*\1.*)*\]/,u=/([([,]|:scope\b)/,r=/^:scope\b/;function l(o,A){let k=o.search(u);if(k===-1)return{selector:`${A} ${o}`,rest:""};if(o[k]===",")return{selector:`${A} ${o.substring(0,k)}`,rest:o.substring(k+1)};let v=!0,C=!1;k=o.search(/\S/);let H=0;t:for(;k<o.length;++k){let _=o[k];switch(_){case"[":{let P=a.exec(o.substring(k));k+=(P?P[0].length:1)-1;continue}case"(":++H;continue;case":":if(v)if(r.test(o.substring(k))){if(H)return null}else continue;else continue;o=o.substring(0,k)+A+o.substring(k+6),k+=A.length,C=!0,--k;continue;case")":H&&--H;continue}if(!H)switch(_){case",":break t;case" ":case">":case"~":case"+":if(!v)continue;v=!1}}return{selector:(C?"":`${A} `)+o.substring(0,k),rest:o.substring(k+1)}}function s(o,A){let k=[];for(;o;){let v=l(o,A);if(v===null)return":not(*)";k.push(v.selector),o=v.rest}return k.join(", ")}function i(o,A){if(o instanceof CSSMediaRule){let k=o.cssRules.length;for(let v=0;v<k;++v)i(o.cssRules[v],A);return}o instanceof CSSStyleRule&&(o.selectorText=s(o.selectorText,A))}let n=U(S),b=`skruv-css-scope-${n}`,c=`.${b}`;if(w.has(n))return b;let m;if(!globalThis?.CSSOM&&!globalThis.document?.implementation)throw new Error("No css parser available. Either add CSSOM to globalThis or run in browser.");if(globalThis?.CSSOM)m=CSSOM.parse(S);else{let o=globalThis.document.implementation.createHTMLDocument(""),A=o.createElementNS("http://www.w3.org/1999/xhtml","style");A.innerText=S,o.body.append(A),m=A.sheet,o.body.removeChild(A)}Array.from(m?.cssRules||[]).forEach(o=>i(o,c));let G=Array.from(m?.cssRules||[]).map(o=>o.cssText||"").join("");return w.set(n,G),x(),b};async function*B(){for(yield Array.from(w.values()).join("");;)await E,yield Array.from(w.values()).join(""),E=new Promise(t=>{x=t})}var K=t=>{let e=class F{constructor(){this._skruv_promise=new Promise(u=>{this._skruv_resolve=u})}_resolve(){this._skruv_parent&&this._skruv_parent._resolve&&this._skruv_parent._resolve(),this._skruv_resolve(""),this._skruv_promise=new Promise(u=>{this._skruv_resolve=u})}set(u,r,l){return r==="_skruv_parent"?(this._skruv_parent=l,!0):(u[r]!==l&&(u[r]=this.recurse(r,l,u)),!0)}get(u,r,l){return r==="getGenerator"?s=>({key:[s,u],[Symbol.asyncIterator]:()=>{let i=!1;return{next:async()=>(i?await this._skruv_promise:i=!0,{done:!1,value:l[s]})}}}):r==="toJSON"?u.constructor===Object?Object.getOwnPropertyNames(u).reduce((s,i)=>(s[i]=u[i]?.toJSON||u[i],s),{}):u.constructor===Array?u.map(s=>s?.toJSON||s):u:r===Symbol.asyncIterator?()=>{let s=!1;return{next:async()=>(s?await this._skruv_promise:s=!0,{done:!1,value:l})}}:u[r]}deleteProperty(u,r){let l=delete u[r];return this._resolve(),l}recurse(u,r,l){if(r&&r.constructor)if(r.constructor===Object&&l?.[u]?.constructor===Object){for(let s of Object.getOwnPropertyNames(r))l[u][s]!==r[s]&&(l[u][s]=r[s]);for(let s of Object.getOwnPropertyNames(l[u]).filter(i=>!Object.getOwnPropertyNames(r).includes(i)))delete l[u][s],this._resolve();return l[u]}else if(r.constructor===Object){let s=new F;r=Object.keys(r).reduce((i,n)=>(i[n]=this.recurse(`${u}.${n}`,r[n]),typeof i[n]=="object"&&i[n]!==null&&(i[n]._skruv_parent=s),i),{}),r=new Proxy(r,s),r._skruv_parent=this,this._resolve()}else if(r.constructor===Array){let s=new F;r=r.map((i,n)=>{let b=this.recurse(`${u}[${n}]`,i);return typeof b=="object"&&b!==null&&(b._skruv_parent=s),b}),r=new Proxy(r,s),r._skruv_parent=this,this._resolve()}else this._resolve();else this._resolve();return r}},S=new Proxy(t.constructor===Array?[]:{},new e("root"));return Object.assign(S,t),S};var M=!0,L=new WeakMap,y=()=>{},N=new Promise(t=>{y=()=>{M=!1,y=()=>{},t("")}}),T=new Set,$=(t,e,S,a,u)=>(M&&!(typeof u=="object"&&"c"in u&&u?.c?.[0]?.skruvFinished===!1)&&(T.delete(t),T.size||y()),L.set(t,u),S[e]=u,a.r?a.r():!0),g=(t,e=null,S=null,a=null,u=!0)=>{if(typeof t=="string"||typeof t=="number"||typeof t=="boolean"||t===null)return t;if(L.has(t))return L.get(t);if(e&&S&&a){if(typeof t=="object"&&Symbol.asyncIterator in t||typeof t=="function"&&t.constructor.name==="AsyncGeneratorFunction")return M&&T.add(t),L.set(t,null),(async()=>{for await(let r of typeof t=="function"?t():t)if(!$(t,e,S,a,g(r,e,S,a,!1)))break})(),null;if(typeof t=="object"&&"then"in t&&typeof t.then=="function"||typeof t=="function"&&t.constructor.name==="AsyncFunction")return M&&T.add(t),L.set(t,null),(async()=>$(t,e,S,a,g(await(typeof t=="function"?t():t),e,S,a,!1)))(),null;if(typeof t=="function"){if(e[0]==="o"&&e[1]==="n"||e==="r"&&S?.isSkruvDom===!0||e==="skruvAfterCreate")return t;let r=g(t(),e,S,a,!1);return L.set(t,r),r}}if(typeof t=="object"){let r={},l=r;t.isSkruvDom===!0?r.r=()=>((M&&!T.size||!M)&&y(),!0):a?.r&&(l=a),Array.isArray(t)&&(r=[]);for(let s in t){let i=g(t[s],s,r,l,!1);(i!==null||t[s]===null)&&(r[s]=i)}return u&&M&&!T.size&&y(),r}return t};var W="#fragment",q={svgA:"a",svgScript:"script",svgStyle:"style",svgTitle:"title",atomTitle:"title",atomLink:"link",atomSummary:"summary",atomSource:"source"},h=(t,e={children:[]})=>{if(t=q[t]||t,t===W&&e.children)return e.children;if(t===W)return[];if(typeof t=="function")return t(e,e.children);let{children:S,...a}=e;return S?{isSkruvDom:!0,t,c:[a||{},S]}:{isSkruvDom:!0,t,c:[a||{}]}},f=h;var V=K({todos:["Write todos"]}),J=I`:scope{color:#f1f1f1;background:#0f0f0f}body{max-width:40ch;margin:0 auto}form{display:flex}input{flex:1}a{color:#9b9b9b}`;d(g(h("html",{lang:"en-US",class:J,children:[h("head",{children:[f("title",{children:V.todos.getGenerator(0)}),f("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),f("style",{children:B})]}),f("body",{children:h("main",{children:[f("h1",{children:V.todos.getGenerator(0)}),h("form",{onsubmit:t=>{t.preventDefault();let e=new FormData(t.currentTarget).get("todo")?.toString();e!==void 0&&V.todos.unshift(e),t.currentTarget.reset()},children:[f("input",{name:"todo"}),f("button",{children:"New!"})]}),f("ol",{children:async function*(){for await(let t of V.todos)yield t.map((e,S)=>h("li",{children:[e," ",f("a",{href:"#",onclick:a=>{a.preventDefault(),t.splice(S,1)},children:"x"})]}))}})]})})]})));
//# sourceMappingURL=index.min.js.map
