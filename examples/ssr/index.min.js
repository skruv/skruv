var C=Symbol.for("skruvDom"),z=(e,...n)=>{var r,d;return{s:C,t:e.toUpperCase(),...typeof n[0]=="object"&&!Array.isArray(n[0])&&!(n[0]instanceof Function)&&!((r=n[0])!=null&&r[Symbol.asyncIterator])&&((d=n[0])==null?void 0:d.s)!==C?{a:n[0],c:n.slice(1)}:{a:{},c:n}}},_=new WeakMap,g={},O=(e,n=globalThis.document.documentElement,r=n==null?void 0:n.parentNode,d=!1)=>{var l,c;let t=n,s=[],f=t==null?void 0:t.nodeName;if(!t||f!==e.t&&(typeof e=="string"||typeof e=="number")&&f!=="#text"?(typeof e=="string"||typeof e=="number"?t=(g.text||(g.text=r.ownerDocument.createTextNode(""))).cloneNode():d||e.t==="svg"?t=(g[e.t]||(g[e.t]=r.ownerDocument.createElementNS("http://www.w3.org/2000/svg",e.t))).cloneNode():t=(g[e.t]||(g[e.t]=r.ownerDocument.createElement(e.t))).cloneNode(),n?r.replaceChild(t,n):r.appendChild(t)):s=Array.from(t.childNodes),typeof e=="string"||typeof e=="number"){e.toString()!==t.data.toString()&&(t.data=e);return}if(e.s===C){e._r||(e._r={}),e._r._r=()=>(O(e,t,r,d),!0);for(let o in e.a)o[0]!=="_"&&(o[0]==="o"&&o[1]==="n"?!t["data-event-"+o]||((l=t["data-event-"+o])==null?void 0:l.toString())!==((c=e.a[o])==null?void 0:c.toString())?(t["data-event-"+o]&&t.removeEventListener(o.slice(2),t["data-event-"+o]),t.addEventListener(o.slice(2),e.a[o]),t["data-event-"+o]=e.a[o]):e.a[o]||t.removeEventListener(o.slice(2),t["data-event-"+o]):e.a[o]!==t.getAttribute(o)&&(e.a[o]?t.setAttribute(o,e.a[o]):t.removeAttribute(o)));if(!e.c.length&&s.length){t.replaceChildren();return}if(s.length>e.c.length)for(let o=e.c.length;o<s.length;o++)t.removeChild(s[o]);for(let o=0;o<e.c.length;o++){if(_.has(e.c[o])){let h=_.get(e.c[o]);h!==t.childNodes[o]&&(h===t.childNodes[o+1]?t.removeChild(t.childNodes[o]):_.has(e.c[o+1])&&_.get(e.c[o+1])===t.childNodes[o]?t.insertBefore(h,t.childNodes[o]):t.childNodes[o]?t.replaceChild(h,t.childNodes[o]):t.appendChild(h),_.set(e,t));continue}O(e.c[o],s[o]||!1,t,d)}_.set(e,t)}},M=new Proxy({},{get:(e,n)=>(...r)=>z(n,...r)});var $=()=>{},D=new Promise(e=>{$=e}),A=new Map,H=e=>{let n=0;if(e.length===0)return n.toString();for(let r=0;r<e.length;r++)n=(n<<5)-n+e.charCodeAt(r),n|=0;return n.toString()},F=(e,...n)=>{var N;let r=e.reduce((i,m,a)=>{var u;return i.push(m),i.push(((u=n==null?void 0:n[a])==null?void 0:u.toString())||""),i},[]).join(""),d=/^\[.*?(?:(["'])(?:.|\\\1)*\1.*)*\]/,t=/([([,]|:scope\b)/,s=/^:scope\b/;function f(i,m){let a=i.search(t);if(a===-1)return{selector:`${m} ${i}`,rest:""};if(i[a]===",")return{selector:`${m} ${i.substring(0,a)}`,rest:i.substring(a+1)};let u=!0,R=!1;a=i.search(/\S/);let j=0;e:for(;a<i.length;++a){let k=i[a];switch(k){case"[":{let E=d.exec(i.substring(a));a+=(E?E[0].length:1)-1;continue}case"(":++j;continue;case":":if(u)if(s.test(i.substring(a))){if(j)return null}else continue;else continue;i=i.substring(0,a)+m+i.substring(a+6),a+=m.length,R=!0,--a;continue;case")":j&&--j;continue}if(!j)switch(k){case",":break e;case" ":case">":case"~":case"+":if(!u)continue;u=!1}}return{selector:(R?"":`${m} `)+i.substring(0,a),rest:i.substring(a+1)}}function l(i,m){let a=[];for(;i;){let u=f(i,m);if(u===null)return":not(*)";a.push(u.selector),i=u.rest}return a.join(", ")}function c(i,m){if(i instanceof CSSMediaRule){let a=i.cssRules.length;for(let u=0;u<a;++u)c(i.cssRules[u],m);return}i instanceof CSSStyleRule&&(i.selectorText=l(i.selectorText,m))}let o=H(r),h=`skruv-css-scope-${o}`,b=`.${h}`;if(A.has(o))return h;let y;if(!(globalThis!=null&&globalThis.CSSOM)&&!((N=globalThis.document)!=null&&N.implementation))throw new Error("No css parser available. Either add CSSOM to globalThis or run in browser.");if(globalThis!=null&&globalThis.CSSOM)y=CSSOM.parse(r);else{let i=globalThis.document.implementation.createHTMLDocument(""),m=i.createElement("style");m.innerText=r,i.body.append(m),y=m.sheet,i.body.removeChild(m)}Array.from((y==null?void 0:y.cssRules)||[]).forEach(i=>c(i,b));let V=Array.from((y==null?void 0:y.cssRules)||[]).map(i=>i.cssText||"").join("");return A.set(o,V),$(),h};async function*G(){for(yield Array.from(A.values()).join("");;)await D,yield Array.from(A.values()).join(""),D=new Promise(e=>{$=e})}var J=(globalThis==null?void 0:globalThis.requestAnimationFrame)||(e=>setTimeout(e,0)),I=e=>{let n=class{constructor(t){this.name=t,this._scheduled=!1,this._skruv_promise=new Promise(s=>{this._skruv_resolve=s})}_resolve(){this._skruv_parent&&this._skruv_parent._resolve&&this._skruv_parent._resolve(),!this._scheduled&&(this._scheduled=!0,J(()=>{this._skruv_resolve(),this._skruv_promise=new Promise(t=>{this._skruv_resolve=t}),this._scheduled=!1}))}set(t,s,f){return s==="_skruv_parent"?(this._skruv_parent=f,!0):(t[s]!==f&&(t[s]=this.recurse(s,f,t)),!0)}get(t,s,f){return s==="getGenerator"?l=>({key:[l,t],[Symbol.asyncIterator]:()=>{let c=!1;return{next:async()=>(c?await this._skruv_promise:c=!0,{done:!1,value:f[l]})}}}):s==="skruv_resolve"?()=>this._resolve():s==="toJSON"?t.constructor===Object?Object.getOwnPropertyNames(t).reduce((l,c)=>{var o;return l[c]=((o=t[c])==null?void 0:o.toJSON)||t[c],l},{}):t.constructor===Array?t.map(l=>(l==null?void 0:l.toJSON)||l):t:s===Symbol.asyncIterator?()=>{let l=!1;return{next:async()=>(l?await this._skruv_promise:l=!0,{done:!1,value:f})}}:t[s]}deleteProperty(t,s){let f=delete t[s];return this._resolve(),f}recurse(t,s,f){var l;if(s&&s.constructor)if(s.constructor===Object&&((l=f==null?void 0:f[t])==null?void 0:l.constructor)===Object){for(let c of Object.getOwnPropertyNames(s))f[t][c]!==s[c]&&(f[t][c]=s[c]);for(let c of Object.getOwnPropertyNames(f[t]).filter(o=>!Object.getOwnPropertyNames(s).includes(o)))delete f[t][c],this._resolve();return f[t]}else if(s.constructor===Object){let c=new this.constructor(`${this.name}.${t}`);s=Object.keys(s).reduce((o,h)=>(o[h]=this.recurse(`${t}.${h}`,s[h]),typeof o[h]=="object"&&o[h]!==null&&(o[h]._skruv_parent=c),o),{}),s=new Proxy(s,c),s._skruv_parent=this,this._resolve()}else if(s.constructor===Array){let c=new this.constructor(`${this.name}.${t}`);s=s.map((o,h)=>{let b=this.recurse(`${t}[${h}]`,o);return typeof b=="object"&&b!==null&&(b._skruv_parent=c),b}),s=new Proxy(s,c),s._skruv_parent=this,this._resolve()}else this._resolve();else this._resolve();return s}},r=new Proxy(e.constructor===Array?[]:{},new n("root"));return Object.assign(r,e),r};var p=!0,S=new WeakMap,P=()=>{},de=new Promise(e=>{P=()=>e(!0)}),w=new Set,L=(e,n,r,d,t)=>{var s;return p&&!(typeof t=="object"&&"a"in t&&((s=t==null?void 0:t.a)==null?void 0:s["data-skruv-finished"])===!1)&&(w.delete(e),w.size||(p=!1,P())),S.set(e,t),r[n]=t,d._r._r()},x=(e,n,r,d,t=!0)=>{if(typeof e=="string"||typeof e=="number"||typeof e=="boolean"||e===null)return e;if(S.has(e))return S.get(e);if(typeof e=="object"&&Symbol.asyncIterator in e||typeof e=="function"&&e.constructor.name==="AsyncGeneratorFunction")return p&&w.add(e),S.set(e,null),(async()=>{for await(let s of typeof e=="function"?e():e)if(!L(e,n,r,d,x(s,n,r,d,!1)))break})(),null;if(typeof e=="object"&&"then"in e&&typeof e.then=="function"||typeof e=="function"&&e.constructor.name==="AsyncFunction")return p&&w.add(e),S.set(e,null),(async()=>L(e,n,r,d,x(await(typeof e=="function"?e():e),n,r,d,!1)))(),null;if(typeof e=="function"){if(typeof n=="string"&&(n[0]==="o"&&n[1]==="n"||n[0]==="_"))return e;let s=x(e(),n,r,d,!1);return S.set(e,s),s}if(typeof e=="object"){let s={_r:{_r:()=>((p&&!w.size||!p)&&(p=!1,P()),!0)}},f=s;Array.isArray(e)&&(s=[],f=d);for(let l in e){let c=x(e[l],l,s,f,!1);(c!==null||e[l]===null)&&(s[l]=c)}return(t&&p&&!w.size||!p)&&(p=!1,P()),s}return e};var{html:W,head:v,title:U,meta:q,body:B,main:K,h1:Q,form:X,input:Y,button:Z,ol:ee,li:te,a:se,style:oe,script:ne}=M,T=I({todos:["Write todos"]}),ie=F`:scope{color:#f1f1f1;background:#0f0f0f}body{max-width:40ch;margin:0 auto}form{display:flex}input{flex:1}a{color:#9b9b9b}`;O(x(W({lang:"en-US",class:ie},v(U(T.todos.getGenerator(0)),q({name:"viewport",content:"width=device-width, initial-scale=1"}),oe(G)),B(K(Q(T.todos.getGenerator(0)),X({onsubmit:e=>{e.preventDefault(),T.todos.unshift(new FormData(e.target).get("todo")),e.target.reset()}},Y({type:"text",name:"todo"}),Z("New!")),async function*(){for await(let e of T)yield ee(e.todos.map((n,r)=>te(`${n} `,se({href:"#",onclick:d=>{d.preventDefault(),e.todos.splice(r,1)}},"x"))))}),!!globalThis.skruvSSRScript&&ne({type:"module"},globalThis.skruvSSRScript)))));
//# sourceMappingURL=index.min.js.map
