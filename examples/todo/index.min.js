var I=Symbol.for("skruvDom"),w="data-event-",A=(e,...n)=>{var i,l,t;return{s:I,t:e.toUpperCase(),...!((i=n[0])!=null&&i[Symbol.asyncIterator])&&((l=n[0])==null?void 0:l.constructor)===Object&&((t=n[0])==null?void 0:t.s)!==I?{a:n[0],c:n.slice(1)}:{a:{},c:n}}},S=new WeakMap,x={},C=(e,n=globalThis.document.documentElement,i=n.parentNode,l=!1)=>{var a,c,d;let t=n,o=(i==null?void 0:i.ownerDocument)||t.ownerDocument;if(!i||!o||t&&!i.contains(t))return!1;if(typeof e=="boolean"||e===null||e===void 0)return t&&i.removeChild(t),!0;if(((typeof e=="string"||typeof e=="number")&&(t==null?void 0:t.nodeName)!=="#text"||(e==null?void 0:e.t)&&(t==null?void 0:t.nodeName)!==(e==null?void 0:e.t)||(t==null?void 0:t._skruvKey)!==((a=e==null?void 0:e.a)==null?void 0:a._key))&&(typeof e=="string"||typeof e=="number"?t=(x.text||(x.text=o.createTextNode(""))).cloneNode():l||e.t==="svg"?t=(x[e.t]||(x[e.t]=o.createElementNS("http://www.w3.org/2000/svg",e.t))).cloneNode():t=(x[e.t]||(x[e.t]=o.createElement(e.t))).cloneNode(),n?i.replaceChild(t,n):i.appendChild(t),t._skruvKey=(c=e==null?void 0:e.a)==null?void 0:c._key,(d=e==null?void 0:e.a)!=null&&d.oncreate&&e.a.oncreate(t)),typeof e=="string"||typeof e=="number")return""+t.data!=""+e&&(t.data=e),!0;e._r&&(e._r._r=()=>C(e,t,i,l));for(let s in e.a)if(s[0]==="o"&&s[1]==="n"){let y=s.slice(2);!t[w+s]||""+t[w+s]!=""+e.a[s]?(t[w+s]&&t.removeEventListener(y,t[w+s]),t.addEventListener(y,e.a[s]),t[w+s]=e.a[s]):e.a[s]||t.removeEventListener(y,t[w+s])}else e.a[s]!==t.getAttribute(s)&&((typeof e.a[s]=="boolean"&&(e.t==="INPUT"&&s==="checked"||e.t==="OPTION"&&s==="selected")||typeof e.a[s]=="object")&&(t[s]=e.a[s]),e.a[s]?t.setAttribute(s,""+e.a[s]):t.removeAttribute(s));let f=e.c.flat(1/0);if(!f.length&&t.childNodes.length)return e.a["data-skruv-wait-for-not-empty"]||t.replaceChildren(),!0;if(t.childNodes.length>f.length)for(let s=f.length;s<t.childNodes.length;s++)t.removeChild(t.childNodes[s]);for(let s=0;s<f.length;s++){if(S.has(f[s])){let y=S.get(f[s]);y!==t.childNodes[s]&&(y===t.childNodes[s+1]?t.removeChild(t.childNodes[s]):S.has(f[s+1])&&S.get(f[s+1])===t.childNodes[s]?t.insertBefore(y,t.childNodes[s]):t.childNodes[s]?t.replaceChild(y,t.childNodes[s]):t.appendChild(y),S.set(f[s],t.childNodes[s]));continue}C(f[s],t.childNodes[s]||!1,t,l)}return S.set(e,t),!0},v=new Proxy({},{get:(e,n)=>(...i)=>A(n,...i)});var E=()=>{},F=new Promise(e=>{E=e}),k=new Map,K=e=>{let n=0;if(e.length===0)return n.toString();for(let i=0;i<e.length;i++)n=(n<<5)-n+e.charCodeAt(i),n|=0;return n.toString()},z=(e,...n)=>{var R;let i=e.reduce((r,m,h)=>{var p;return r.push(m),r.push(((p=n==null?void 0:n[h])==null?void 0:p.toString())||""),r},[]).join(""),l=/^\[.*?(?:(["'])(?:.|\\\1)*\1.*)*\]/,t=/([([,]|:scope\b)/,o=/^:scope\b/;function f(r,m){let h=r.search(t);if(h===-1)return{selector:`${m} ${r}`,rest:""};if(r[h]===",")return{selector:`${m} ${r.substring(0,h)}`,rest:r.substring(h+1)};let p=!0,M=!1;h=r.search(/\S/);let T=0;e:for(;h<r.length;++h){let D=r[h];switch(D){case"[":{let G=l.exec(r.substring(h));h+=(G?G[0].length:1)-1;continue}case"(":++T;continue;case":":if(p)if(o.test(r.substring(h))){if(T)return null}else continue;else continue;r=r.substring(0,h)+m+r.substring(h+6),h+=m.length,M=!0,--h;continue;case")":T&&--T;continue}if(!T)switch(D){case",":break e;case" ":case">":case"~":case"+":if(!p)continue;p=!1}}return{selector:(M?"":`${m} `)+r.substring(0,h),rest:r.substring(h+1)}}function a(r,m){let h=[];for(;r;){let p=f(r,m);if(p===null)return":not(*)";h.push(p.selector),r=p.rest}return h.join(", ")}function c(r,m){if(r instanceof CSSMediaRule){let h=r.cssRules.length;for(let p=0;p<h;++p)c(r.cssRules[p],m);return}r instanceof CSSStyleRule&&(r.selectorText=a(r.selectorText,m))}let d=K(i),s=`skruv-css-scope-${d}`,y=`.${s}`;if(k.has(d))return s;let _;if(!(globalThis!=null&&globalThis.CSSOM)&&!((R=globalThis.document)!=null&&R.implementation))throw new Error("No css parser available. Either add CSSOM to globalThis or run in browser.");if(globalThis!=null&&globalThis.CSSOM)_=CSSOM.parse(i);else{let r=globalThis.document.implementation.createHTMLDocument(""),m=r.createElement("style");m.innerText=i,r.body.append(m),_=m.sheet,r.body.removeChild(m)}Array.from((_==null?void 0:_.cssRules)||[]).forEach(r=>c(r,y));let W=Array.from((_==null?void 0:_.cssRules)||[]).map(r=>r.cssText||"").join("");return k.set(d,W),E(),s};async function*L(){for(yield Array.from(k.values()).join("");;)await F,yield Array.from(k.values()).join(""),F=new Promise(e=>{E=e})}var Z=(globalThis==null?void 0:globalThis.requestAnimationFrame)||(e=>setTimeout(e,0)),V=e=>{let n=class{constructor(t){this.name=t,this._scheduled=!1,this._skruv_promise=new Promise(o=>{this._skruv_resolve=o})}_resolve(){this._skruv_parent&&this._skruv_parent._resolve&&this._skruv_parent._resolve(),!this._scheduled&&(this._scheduled=!0,Z(()=>{this._skruv_resolve(),this._skruv_promise=new Promise(t=>{this._skruv_resolve=t}),this._scheduled=!1}))}set(t,o,f){return o==="_skruv_parent"?(this._skruv_parent=f,!0):(t[o]!==f&&(t[o]=this.recurse(o,f,t)),!0)}get(t,o,f){return o==="getGenerator"?a=>({key:[a,t],[Symbol.asyncIterator]:()=>{let c=!1;return{next:async()=>(c?await this._skruv_promise:c=!0,{done:!1,value:f[a]})}}}):o==="skruv_resolve"?()=>this._resolve():o==="toJSON"?t.constructor===Object?Object.getOwnPropertyNames(t).reduce((a,c)=>{var d;return a[c]=((d=t[c])==null?void 0:d.toJSON)||t[c],a},{}):t.constructor===Array?t.map(a=>(a==null?void 0:a.toJSON)||a):t:o===Symbol.asyncIterator?()=>{let a=!1;return{next:async()=>(a?await this._skruv_promise:a=!0,{done:!1,value:f})}}:t[o]}deleteProperty(t,o){let f=delete t[o];return this._resolve(),f}recurse(t,o,f){var a;if(o&&o.constructor)if(o.constructor===Object&&((a=f==null?void 0:f[t])==null?void 0:a.constructor)===Object){for(let c of Object.getOwnPropertyNames(o))f[t][c]!==o[c]&&(f[t][c]=o[c]);for(let c of Object.getOwnPropertyNames(f[t]).filter(d=>!Object.getOwnPropertyNames(o).includes(d)))delete f[t][c],this._resolve();return f[t]}else if(o.constructor===Object){let c=new this.constructor(`${this.name}.${t}`);o=Object.keys(o).reduce((d,s)=>(d[s]=this.recurse(`${t}.${s}`,o[s]),typeof d[s]=="object"&&d[s]!==null&&(d[s]._skruv_parent=c),d),{}),o=new Proxy(o,c),o._skruv_parent=this,this._resolve()}else if(o.constructor===Array){let c=new this.constructor(`${this.name}.${t}`);o=o.map((d,s)=>{let y=this.recurse(`${t}[${s}]`,d);return typeof y=="object"&&y!==null&&(y._skruv_parent=c),y}),o=new Proxy(o,c),o._skruv_parent=this,this._resolve()}else this._resolve();else this._resolve();return o}},i=new Proxy(e.constructor===Array?[]:{},new n("root"));return Object.assign(i,e),i};var u=!0,j=new WeakMap,$=()=>{},te=new Promise(e=>{$=()=>e(!0)}),O=new Set,H=(e,n,i,l,t)=>{var o;return u&&!(typeof t=="object"&&"a"in t&&((o=t==null?void 0:t.a)==null?void 0:o["data-skruv-finished"])===!1)&&(O.delete(e),O.size||(u=!1,setTimeout(()=>$(),0))),j.set(e,t),i[n]=t,l._r._r()},P=(e,n,i,l,t=!0)=>{if(typeof e=="string"||typeof e=="number"||typeof e=="boolean"||e===null)return e;if(j.has(e))return j.get(e);if(typeof e=="object"&&Symbol.asyncIterator in e||typeof e=="function"&&e.constructor.name==="AsyncGeneratorFunction")return u&&O.add(e),j.set(e,null),(async()=>{for await(let o of typeof e=="function"?e():e)if(!H(e,n,i,l,P(o,n,i,l,!1)))break})(),null;if(typeof e=="object"&&"then"in e&&typeof e.then=="function"||typeof e=="function"&&e.constructor.name==="AsyncFunction")return u&&O.add(e),j.set(e,null),(async()=>H(e,n,i,l,P(await(typeof e=="function"?e():e),n,i,l,!1)))(),null;if(typeof e=="function"){if(typeof n=="string"&&(n[0]==="o"&&n[1]==="n"||n[0]==="_"))return e;let o=P(e(),n,i,l,!1);return j.set(e,o),o}if(typeof e=="object"){let o={_r:{_r:()=>((u&&!O.size||!u)&&(u=!1,setTimeout(()=>$(),0)),!0)}},f=o;Array.isArray(e)&&(o=[],f=l),n==="a"&&(o={},f=l);for(let a in e){let c=P(e[a],a,o,f,!1);(c!==null||e[a]===null)&&(o[a]=c)}return(t&&u&&!O.size||!u)&&(u=!1,setTimeout(()=>$(),0)),o}return e};var J=e=>e.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(n,i)=>(i?"-":"")+n.toLowerCase()),U="#fragment",b=(e,n={})=>g(e,n),g=(e,n={})=>{if(e===U&&n.children)return n.children;if(e===U)return[];let{children:i,...l}=n;return Object.keys(l).filter(t=>t!==J(t)).forEach(t=>{l[J(t)]=l[t],delete l[t]}),l["class-name"]&&(l.class=l["class-name"],delete l["class-name"]),l["html-for"]&&(l.for=l["html-for"],delete l["html-for"]),i?A(e,l||{},i):A(e,l||{})};var N=V({todos:["Write todos"]}),q=z`:scope{color:#f1f1f1;background:#0f0f0f}body{max-width:40ch;margin:0 auto}form{display:flex}input{flex:1}a{color:#9b9b9b}`;C(P(g("html",{lang:"en-US",class:q,children:[g("head",{children:[b("title",{children:N.todos.getGenerator(0)}),b("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),b("style",{children:L})]}),b("body",{children:g("main",{children:[b("h1",{children:N.todos.getGenerator(0)}),g("form",{onsubmit:e=>{e.preventDefault(),N.todos.unshift(new FormData(e.target).get("todo")),e.target.reset()},children:[b("input",{name:"todo"}),b("button",{children:"New!"})]}),b("ol",{children:async function*(){for await(let e of N.todos)yield e.map((n,i)=>g("li",{children:[n," ",b("a",{href:"#",onclick:l=>{l.preventDefault(),e.splice(i,1)},children:"x"})]}))}})]})})]})));
//# sourceMappingURL=index.min.js.map
