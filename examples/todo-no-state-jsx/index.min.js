var S=Symbol.for("skruvDom"),g=Symbol.for("skruvDomPrepared"),w=new WeakMap,E=new WeakMap,x=new WeakMap,O=()=>{},W=new Promise(t=>{O=()=>t()}),h=new Set,p=(globalThis==null?void 0:globalThis.SkruvWaitForAsync)||!!document.querySelector("data-skruv-ssr-rendered");var T=(t,...e)=>{var i,s,y,m,r;return{s:S,t,...typeof e[0]=="object"&&!Array.isArray(e[0])&&!(e[0]instanceof Function)&&!(e[0]instanceof Function&&((y=(s=(i=e[0])==null?void 0:i.prototype)==null?void 0:s.toString)==null?void 0:y.call(s))==="[object AsyncGenerator]")&&!((m=e[0])!=null&&m[Symbol.asyncIterator])&&((r=e[0])==null?void 0:r.s)!==S?{_a:e[0],_c:e.slice(1)}:{_a:{},_c:e},r:{r:()=>(p&&!h.size&&(p=!1,O()),!0)}}},j=(t,e,i)=>{var y,m;let s=(r,a)=>{var l;return p&&((l=a==null?void 0:a._a)==null?void 0:l["data-skruv-finished"])!==!1&&(h.delete(r),a&&((a==null?void 0:a.s)===S?b(a):j(a,e,i))),w.set(r,a),e.r.r()};if(w.has(t))return w.get(t);if(typeof t=="object"&&(t==null?void 0:t[Symbol.asyncIterator])){let r=t;return p&&h.add(r),w.set(r,null),(async()=>{for await(let a of r)if(!s(t,a))break})(),!1}else{if(t instanceof Function&&((m=(y=t==null?void 0:t.prototype)==null?void 0:y.toString)==null?void 0:m.call(y))==="[object AsyncGenerator]")return p&&h.add(t),w.set(t,null),(async()=>{for await(let r of t())if(!s(t,r))break})(),!1;if(typeof t=="object"&&t!==null&&(t==null?void 0:t.then)instanceof Function){let r=t;return p&&h.add(t),w.set(r,null),(async()=>s(r,await r))(),!1}else{if(typeof t=="function"&&t.constructor.name==="AsyncFunction")return p&&h.add(t),w.set(t,null),(async()=>s(t,await t()))(),!1;if(typeof t=="function")return i?t():t;if(typeof t=="string"||typeof t=="number")return i?T("#text",{data:t.toString()}):t.toString();if(typeof t=="boolean")return t}}throw new Error("Unkown type in syncify: "+JSON.stringify(t))},_=(t,e)=>{let i=t.flat(1/0).map(s=>(s==null?void 0:s.s)===S?b(s):j(s,e,!0)).flat(1/0).filter(s=>s!==null&&typeof s!="boolean"&&typeof s!="undefined");return i.find(s=>(s==null?void 0:s.p)!==g)!==void 0?_(i,e):i},b=t=>{let e=Object.fromEntries(Object.entries(t._a).filter(i=>i[1]!==null&&typeof i[1]!="undefined").map(([i,s])=>i==="data-skruv-key"?[i,s]:[i,j(s,t,!1)]).filter(i=>i[1]!==null&&typeof i[1]!="undefined"));return{p:g,...t,a:e,c:_(t._c,t)}},A=(t,e,i,s)=>{var L;if(t.p!==g)throw new Error("unkown type in render: "+JSON.stringify(t));for(let n of t.c)if(n.p!==g)throw new Error("unkown type in render: "+JSON.stringify(n));if(!i||e&&!i.contains(e))return!1;let y=e.ownerDocument,m=y.documentElement;for(let n of e.getAttributeNames().filter(o=>!Object.keys(t.a).includes(o)))e.removeAttribute(n);for(let[n,o]of Object.entries(t.a))if(n!=="data-skruv-key"){if(n.slice(0,2)==="on"){let c=E.get(e),f=c==null?void 0:c[n],d=n.slice(2);if(c||(c={},E.set(e,c)),o instanceof Function){f&&f.toString()!==o.toString()&&(e.removeEventListener(d,f),c[n]=null),f||(c[n]=o,e.addEventListener(d,o));continue}f&&!o&&(e.removeEventListener(d,f),c[n]=null)}if(o===null||o===!1){e.getAttribute(n)&&e.removeAttribute(n);continue}e.setAttribute(n,o.toString()),n==="value"&&(typeof o=="number"||typeof o=="string")&&e instanceof HTMLInputElement&&(e[n]=o.toString()),(typeof o=="boolean"&&(e instanceof HTMLInputElement&&n==="checked"||e instanceof HTMLOptionElement&&n==="selected")||typeof o=="object")&&(e[n]=o)}if(t.r.r=()=>A(b(t),e,i,s),t.a["data-skruv-opaque"])return!0;let r=Array.from(e.childNodes),a=t.c,l=[],I=(n,o)=>n.nodeName.toLowerCase()===o.t&&!l.includes(n);for(let n=0;n<a.length;n++){let o=a[n],c=o.a["data-skruv-key"]?x.get(o.a["data-skruv-key"]):r.find(f=>I(f,o));c?l[n]=c:l[n]=null}let P=r.filter(n=>!l.includes(n));if(t.c.length||!t.a["data-skruv-wait-for-not-empty"])for(let n of P.filter(o=>!!o))e.removeChild(n),setTimeout(()=>{var o;!(m!=null&&m.contains(n))&&((o=E.get(n))==null?void 0:o.onremove)&&n.dispatchEvent(new CustomEvent("remove"))},1);for(let n=0;n<l.length;n++){let o=t.c[n],c=!1;if(l[n]){if(l[n]!==e.childNodes[n]){let d=l[n];d&&(n===0?e.prepend(d):e.childNodes[n-1].after(d))}}else{let d;t.t==="#comment"?d=y.createComment(""):o.t==="#text"?d=y.createTextNode(""):o.p===g&&(s||o.t==="svg")?d=y.createElementNS("http://www.w3.org/2000/svg",o.t):d=y.createElement(o.t),c=!0,e.childNodes[n]?e.replaceChild(d,e.childNodes[n]):n===0?e.prepend(d):e.childNodes[n-1].after(d)}let f=e.childNodes[n];if(f instanceof Text||f instanceof Comment){f.data!==o.a.data&&(f.data=o.a.data.toString());continue}if(!(f instanceof HTMLElement||f instanceof SVGElement))throw new Error("Child node of unknown type: "+JSON.stringify({childNode:f,child:o}));o.a["data-skruv-key"]&&!x.has(o.a["data-skruv-key"])&&x.set(o.a["data-skruv-key"],f),A(o,f,e,s||t.t==="svg"),c&&((L=E.get(f))==null?void 0:L.oncreate)&&f.dispatchEvent(new CustomEvent("create"))}return!0},C=async(t,e=document.documentElement,i=e==null?void 0:e.parentNode,s=!1)=>{if(!i)throw new Error("Skruv: No parent to render to");if(!(i instanceof HTMLElement||i instanceof SVGElement||i instanceof Document||i instanceof Window))throw new Error("Skruv: Parent of wrong type");p&&(b(t).r.r(),await W),A(b(t),e,i,s)},G={},M=new Proxy(G,{get:(t,e)=>(...i)=>T(e,...i)});var{html:H,head:R,title:J,meta:V,body:D,main:q,h1:U,form:z,input:B,button:$,ol:K,li:Q,a:X,style:Y}=M,k={todos:["Write todos"]},Z=":scope{color:#f1f1f1;background:#0f0f0f}body{max-width:40ch;margin:0 auto}form{display:flex}input{flex:1}a{color:#9b9b9b}",F=()=>C(H({lang:"en-US"},R(J(k.todos[0]),V({name:"viewport",content:"width=device-width, initial-scale=1"}),Y(Z)),D(q(U(k.todos[0]),z({onsubmit:t=>{t.preventDefault(),k.todos.unshift(new FormData(t.target).get("todo")),t.target.reset(),F()}},B({name:"todo"}),$("New!")),K(k.todos.map((t,e)=>Q(`${t} `,X({href:"#",onclick:i=>{i.preventDefault(),k.todos.splice(e,1),F()}},"x"))))))));F();
//# sourceMappingURL=index.min.js.map
